import{a as S,K as w,r as u,j as e,M as k,H as x,s as T}from"./index-Ba-_IHuQ.js";import{u as E}from"./useQuery-D_0ZzEPi.js";import{P as A}from"./PropertyCard-Dx417oG4.js";import{C as H,a as q,c as K,d as F,b as M}from"./card-DocFJD5R.js";import{S as h,a as g,b as j,c as f,d as t}from"./select-B0LLBn5t.js";import{B as U}from"./badge-DRGEcZbO.js";import{U as B}from"./users-B-O4Ext4.js";import"./useAdminStatus-CtzbR6_N.js";import"./StudentHousingBadge-BukBy-_d.js";import"./eye-off-QLdkjG-i.js";import"./trash-2-D9yzkGdt.js";import"./usePropertyViewsCount-BXmCnfId.js";import"./square-CxCi9vpu.js";const Y=()=>{const{t:R,currentLanguage:r}=S(),{cities:m,districts:b}=w(),[n,v]=u.useState("all"),[l,p]=u.useState("all"),{data:N=[],isLoading:y,error:o}=E({queryKey:["student-housing-properties",n,l],queryFn:async()=>{console.log("Fetching student housing properties with filters:",{selectedCity:n,selectedGender:l});let s=T.from("properties").select("*").eq("is_student_housing",!0).eq("status","available");n!=="all"&&(s=s.eq("city",n)),l!=="all"&&(s=s.eq("student_housing_gender",l));const{data:a,error:i}=await s.order("created_at",{ascending:!1});if(i)throw console.error("Error fetching student housing properties:",i),i;return console.log("Student housing properties fetched:",a),a||[]}}),_=s=>{const a=m.find(i=>i.id===s);return a?r==="ar"?a.name_ar:r==="tr"?a.name_tr:a.name_en:s},C=s=>{const a=b.find(i=>i.id===s);return a?r==="ar"?a.name_ar:r==="tr"?a.name_tr:a.name_en:s},c=s=>{switch(s){case"male":return r==="ar"?"ذكور":r==="tr"?"Erkek":"Male";case"female":return r==="ar"?"إناث":r==="tr"?"Kadın":"Female";case"mixed":return r==="ar"?"مختلط":r==="tr"?"Karışık":"Mixed";default:return r==="ar"?"غير محدد":r==="tr"?"Belirtilmemiş":"Unspecified"}},d=N.map(s=>({id:s.id,title:s.title||"",location:`${_(s.city||"")}${s.district?`, ${C(s.district)}`:""}`,city:s.city||"",district:s.district||"",price:s.price||0,currency:s.currency||"EUR",deposit:s.deposit||0,deposit_currency:s.deposit_currency||s.currency||"EUR",commission:s.commission||0,commission_currency:s.commission_currency||s.currency||"EUR",beds:s.bedrooms||0,baths:s.bathrooms||0,area:s.area||0,image:s.cover_image||"/placeholder.svg",images:Array.isArray(s.images)?s.images.map(a=>String(a)):[],featured:s.is_featured||!1,rating:4.5,type:s.property_type||"",listing_type:s.listing_type||"rent"}));return o&&console.error("Error in StudentHousing component:",o),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white py-20",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsxs("div",{className:"relative container mx-auto px-4 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-4",children:e.jsx(B,{className:"w-12 h-12"})})}),e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:r==="ar"?"سكن الطلاب":r==="tr"?"Öğrenci Konutları":"Student Housing"}),e.jsx("p",{className:"text-xl md:text-2xl text-blue-100 max-w-3xl mx-auto",children:r==="ar"?"اعثر على السكن المثالي لفترة دراستك":r==="tr"?"Eğitim döneminiz için mükemmel konutu bulun":"Find the perfect accommodation for your studies"})]})]}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(H,{className:"mb-8",children:[e.jsxs(q,{children:[e.jsxs(K,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),r==="ar"?"تصفية النتائج":r==="tr"?"Sonuçları Filtrele":"Filter Results"]}),e.jsx(F,{children:r==="ar"?"اختر المدينة ونوع السكن المناسب":r==="tr"?"Şehir ve konut türünü seçin":"Choose city and housing type"})]}),e.jsx(M,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:r==="ar"?"المدينة":r==="tr"?"Şehir":"City"}),e.jsxs(h,{value:n,onValueChange:v,children:[e.jsx(g,{children:e.jsx(j,{placeholder:r==="ar"?"اختر المدينة":r==="tr"?"Şehir Seçin":"Select City"})}),e.jsxs(f,{children:[e.jsx(t,{value:"all",children:r==="ar"?"جميع المدن":r==="tr"?"Tüm Şehirler":"All Cities"}),m.map(s=>e.jsx(t,{value:s.id,children:r==="ar"?s.name_ar:r==="tr"?s.name_tr:s.name_en},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:r==="ar"?"نوع السكن":r==="tr"?"Konut Türü":"Housing Type"}),e.jsxs(h,{value:l,onValueChange:p,children:[e.jsx(g,{children:e.jsx(j,{placeholder:r==="ar"?"اختر النوع":r==="tr"?"Tür Seçin":"Select Type"})}),e.jsxs(f,{children:[e.jsx(t,{value:"all",children:r==="ar"?"جميع الأنواع":r==="tr"?"Tüm Türler":"All Types"}),e.jsx(t,{value:"male",children:c("male")}),e.jsx(t,{value:"female",children:c("female")}),e.jsx(t,{value:"mixed",children:c("mixed")}),e.jsx(t,{value:"unspecified",children:c("unspecified")})]})]})]})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(x,{className:"w-6 h-6"}),r==="ar"?"السكنات المتاحة":r==="tr"?"Mevcut Konutlar":"Available Housing"]}),e.jsxs(U,{variant:"secondary",className:"text-lg px-3 py-1",children:[d.length," ",r==="ar"?"سكن":r==="tr"?"konut":"properties"]})]})}),y?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((s,a)=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 animate-pulse",children:[e.jsx("div",{className:"bg-gray-200 h-48 rounded-xl mb-4"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-gray-200 h-4 rounded w-3/4"}),e.jsx("div",{className:"bg-gray-200 h-4 rounded w-1/2"}),e.jsx("div",{className:"bg-gray-200 h-6 rounded w-1/3"})]})]},a))}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"bg-gray-100 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-4",children:e.jsx(x,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:r==="ar"?"لا توجد سكنات متاحة":r==="tr"?"Mevcut konut yok":"No housing available"}),e.jsx("p",{className:"text-gray-500",children:r==="ar"?"جرب تغيير معايير البحث":r==="tr"?"Arama kriterlerinizi değiştirmeyi deneyin":"Try adjusting your search criteria"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(s=>e.jsx(A,{property:s},s.id))})]})]})};export{Y as default};
