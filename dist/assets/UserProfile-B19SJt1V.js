import{a as K,G as pe,r as p,j as e,I as c,at as Ve,U as H,N as ge,O as ue,Q as be,u as je,s as V,C as J,aL as Ie,H as C,ay as Oe,V as Ge,av as He,a1 as Me,a2 as qe,X as Le,aj as fe,D as oe,as as Ke,M as Ye}from"./index-Ba-_IHuQ.js";import{C as q,a as we,c as ye,b as L,d as Xe}from"./card-DocFJD5R.js";import{B as O}from"./badge-DRGEcZbO.js";import{D as ee,f as ve,a as te,b as se,c as ae,d as Ne}from"./dialog-Bi8CA0Hs.js";import{L as ce}from"./label-3yzes-iA.js";import{T as Qe}from"./textarea-D6kC44b6.js";import{S as We,a as Je,b as Ze,c as Pe,d as et}from"./select-B0LLBn5t.js";import{u as _e,E as tt,S as ke}from"./separator-wDokUAnQ.js";import{u as st,V as me}from"./VerifiedBadge-CnJVYRi5.js";import{F as Z,u as at,O as rt}from"./useOwnerRating-D52OoPxK.js";import{u as nt,a as dt,b as lt,c as it}from"./useAdminStatus-CtzbR6_N.js";import{S as ot}from"./StudentHousingBadge-BukBy-_d.js";import{u as ct}from"./usePropertyViewsCount-BXmCnfId.js";import{E as I,a as mt}from"./eye-off-QLdkjG-i.js";import{C as P}from"./calendar-BZmh3iBK.js";import{f as xt,S as ht,A as pt}from"./AdminUserActivityDialog-D7M-L8UV.js";import{u as gt,C as ut}from"./useUserActions-DGvKvL3f.js";import{S as bt}from"./scroll-area-C94vp1UI.js";import{A as M,D as xe,a as jt,t as ft}from"./seedUserActivity-CcC_9Fqw.js";import{L as wt}from"./log-in-C1PKOqHo.js";import{I as yt}from"./image-BgofXdSF.js";import{T as re}from"./trash-2-D9yzkGdt.js";import{S as Ce}from"./square-pen-XvOR2TU8.js";import{e as vt}from"./en-US-ZBLZOCkG.js";import{A as Nt}from"./arrow-right-Bj_z4KDd.js";import{A as _t}from"./arrow-left-YqLAbwqU.js";import{R as kt}from"./refresh-cw-Dzle1iAu.js";import{S as W}from"./star-BDVVLF9N.js";import{M as Ct}from"./message-circle-B7g0Luhq.js";import{B as St}from"./ban-DH3c8ygT.js";import{C as he}from"./circle-check-big-D_hgqrRM.js";import{B as Dt,a as At,S as Rt}from"./square-CxCi9vpu.js";import"./send-DBGujvD3.js";import"./tabs-3zOAl0ep.js";import"./clock-Fq3ibpDw.js";const $t=({userId:r,userName:x,children:s})=>{const{currentLanguage:a}=K(),{reportUser:f,loading:g}=_e(),{userReportTypes:N}=st(),{toast:w}=pe(),[b,u]=p.useState(!1),[y,t]=p.useState(""),[_,j]=p.useState(""),S=async d=>{if(d.preventDefault(),!y||!_.trim()){w({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"يرجى ملء جميع الحقول":"Please fill all fields",variant:"destructive"});return}const i=await f(r,{report_type:y,reason:_.trim()});i.success?(w({title:a==="ar"?"تم الإرسال":"Submitted",description:a==="ar"?"تم إرسال البلاغ بنجاح":"Report submitted successfully"}),u(!1),t(""),j("")):w({title:a==="ar"?"خطأ":"Error",description:i.error||(a==="ar"?"حدث خطأ":"An error occurred"),variant:"destructive"})},l=d=>a==="ar"?d.name_ar:a==="tr"?d.name_tr:d.name_en,n=d=>a==="ar"?d.description_ar:a==="tr"?d.description_tr:d.description_en;return e.jsxs(ee,{open:b,onOpenChange:u,children:[e.jsx(ve,{asChild:!0,children:s||e.jsxs(c,{variant:"outline",size:"sm",className:"flex items-center gap-2 text-red-600 border-red-200 hover:bg-red-50",children:[e.jsx(Z,{className:"w-4 h-4"}),a==="ar"?"إبلاغ":"Report"]})}),e.jsxs(te,{className:"sm:max-w-md",children:[e.jsxs(se,{children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-red-500"}),a==="ar"?"إبلاغ عن المستخدم":"Report User",x&&e.jsxs("span",{className:"text-sm font-normal text-gray-600",children:["(",x,")"]})]}),e.jsx(Ne,{children:a==="ar"?"يرجى اختيار سبب البلاغ وتقديم التفاصيل":"Please select a reason and provide details for your report"})]}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(ce,{className:"text-sm font-medium",children:a==="ar"?"نوع البلاغ":"Report Type"}),e.jsxs(We,{value:y,onValueChange:t,children:[e.jsx(Je,{className:"w-full",children:e.jsx(Ze,{placeholder:a==="ar"?"اختر نوع البلاغ":a==="tr"?"Rapor türünü seçin":"Select report type"})}),e.jsx(Pe,{children:N.map(d=>e.jsx(et,{value:d.id,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:l(d)}),n(d)&&e.jsx("span",{className:"text-xs text-muted-foreground",children:n(d)})]})},d.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{htmlFor:"reason",children:a==="ar"?"تفاصيل البلاغ":"Report Details"}),e.jsx(Qe,{id:"reason",value:_,onChange:d=>j(d.target.value),placeholder:a==="ar"?"يرجى شرح سبب البلاغ بالتفصيل...":"Please explain your report in detail...",rows:4,required:!0})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(c,{type:"submit",disabled:g,className:"flex-1",children:g?a==="ar"?"جارٍ الإرسال...":"Submitting...":a==="ar"?"إرسال البلاغ":"Submit Report"}),e.jsx(c,{type:"button",variant:"outline",onClick:()=>u(!1),disabled:g,children:a==="ar"?"إلغاء":"Cancel"})]})]})]})]})},Et=({userId:r,userName:x,children:s})=>{const{currentLanguage:a}=K(),{fetchUserReports:f,loading:g}=_e(),[N,w]=p.useState(!1),[b,u]=p.useState([]),y={inappropriate_behavior:{ar:"سلوك غير مناسب",en:"Inappropriate Behavior",tr:"Uygunsuz Davranış"},fake_listings:{ar:"إعلانات وهمية",en:"Fake Listings",tr:"Sahte İlanlar"},scam:{ar:"نصب واحتيال",en:"Scam",tr:"Dolandırıcılık"},harassment:{ar:"مضايقة",en:"Harassment",tr:"Taciz"},fraud:{ar:"احتيال",en:"Fraud",tr:"Dolandırıcılık"},other:{ar:"أخرى",en:"Other",tr:"Diğer"}},t={pending:{ar:"قيد المراجعة",en:"Pending",tr:"Beklemede"},reviewed:{ar:"تمت المراجعة",en:"Reviewed",tr:"İncelendi"},resolved:{ar:"تم الحل",en:"Resolved",tr:"Çözüldü"},dismissed:{ar:"مرفوض",en:"Dismissed",tr:"Reddedildi"}};p.useEffect(()=>{N&&_()},[N]);const _=async()=>{const l=await f();if(l.data){const n=l.data.filter(d=>d.reported_user_id===r);u(n)}},j=l=>{switch(l){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"reviewed":return"bg-blue-100 text-blue-800 border-blue-300";case"resolved":return"bg-green-100 text-green-800 border-green-300";case"dismissed":return"bg-gray-100 text-gray-800 border-gray-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},S=l=>{window.open(`/user/${l}`,"_blank")};return e.jsxs(ee,{open:N,onOpenChange:w,children:[e.jsx(ve,{asChild:!0,children:s}),e.jsxs(te,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(se,{children:[e.jsxs(ae,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),a==="ar"?`البلاغات ضد ${x}`:`Reports against ${x}`]}),e.jsx(Ne,{children:a==="ar"?"جميع البلاغات المقدمة ضد هذا المستخدم":"All reports submitted against this user"})]}),e.jsx("div",{className:"space-y-4",children:g?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-brand-accent border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:a==="ar"?"جارٍ التحميل...":"Loading..."})]}):b.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ve,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:a==="ar"?"لا توجد بلاغات":"No Reports"}),e.jsx("p",{className:"text-gray-500",children:a==="ar"?"لم يتم تقديم أي بلاغات ضد هذا المستخدم":"No reports have been submitted against this user"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:a==="ar"?`إجمالي البلاغات: ${b.length}`:`Total Reports: ${b.length}`}),b.map(l=>{var n,d,i,D,U,A,E,R,F,T,B;return e.jsxs(q,{className:"border-l-4 border-l-red-500",children:[e.jsx(we,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-red-100 rounded-full p-2",children:e.jsx(H,{className:"w-4 h-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx(ye,{className:"text-lg",children:((n=y[l.report_type])==null?void 0:n[a])||l.report_type}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mt-1",children:[e.jsx(P,{className:"w-4 h-4"}),new Date(l.created_at).toLocaleDateString(a==="ar"?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsx(O,{className:`${j(l.status)} font-medium`,children:((d=t[l.status])==null?void 0:d[a])||l.status})]})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:a==="ar"?"المبلغ:":"Reported by:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ge,{className:"w-8 h-8",children:[e.jsx(ue,{src:(i=l.reporter_profile)==null?void 0:i.avatar_url}),e.jsx(be,{className:"bg-blue-100 text-blue-600 text-sm",children:((U=(D=l.reporter_profile)==null?void 0:D.full_name)==null?void 0:U.charAt(0))||((E=(A=l.reporter_profile)==null?void 0:A.username)==null?void 0:E.charAt(0))||"U"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(c,{variant:"link",className:"p-0 h-auto font-medium text-blue-600 hover:text-blue-800 flex items-center gap-1",onClick:()=>{var v;return S((v=l.reporter_profile)==null?void 0:v.username)},children:[((R=l.reporter_profile)==null?void 0:R.full_name)||((F=l.reporter_profile)==null?void 0:F.username)||"Unknown User",e.jsx(tt,{className:"w-3 h-3"})]}),((T=l.reporter_profile)==null?void 0:T.username)&&e.jsxs("p",{className:"text-sm text-gray-500",children:["@",l.reporter_profile.username]})]})]})]}),e.jsx(ke,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:a==="ar"?"نوع البلاغ:":"Report Type:"}),e.jsx("p",{className:"text-gray-700 bg-blue-50 rounded-lg p-3 border border-blue-200",children:((B=y[l.report_type])==null?void 0:B[a])||l.report_type})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:a==="ar"?"تفاصيل البلاغ:":"Report Details:"}),e.jsx("p",{className:"text-gray-700 bg-gray-50 rounded-lg p-3 border",children:l.reason})]})]})]},l.id)})]})})]})]})},Ut=({open:r,onOpenChange:x})=>{const{currentLanguage:s}=K(),{user:a}=je(),{toast:f}=pe(),[g,N]=p.useState([]),[w,b]=p.useState(!1);p.useEffect(()=>{r&&(a!=null&&a.id)&&u()},[r,a==null?void 0:a.id]);const u=async()=>{if(a!=null&&a.id){b(!0);try{const{data:n,error:d}=await V.from("user_activity_logs").select("*").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(50);if(d){console.error("Error fetching activities:",d);return}N(n||[])}catch(n){console.error("Error fetching activities:",n)}finally{b(!1)}}},y=async()=>{if(a!=null&&a.id)try{const{error:n}=await V.rpc("add_sample_activity_data",{target_user_id:a.id});if(n){console.error("Error adding sample data:",n),f({title:s==="ar"?"خطأ":"Error",description:s==="ar"?"حدث خطأ أثناء إضافة البيانات التجريبية":"Error adding sample data",variant:"destructive"});return}f({title:s==="ar"?"تم بنجاح":"Success",description:s==="ar"?"تم إضافة البيانات التجريبية بنجاح":"Sample data added successfully"}),await u()}catch(n){console.error("Error adding sample data:",n),f({title:s==="ar"?"خطأ":"Error",description:s==="ar"?"حدث خطأ أثناء إضافة البيانات التجريبية":"Error adding sample data",variant:"destructive"})}},t=n=>{switch(n){case"property_created":return e.jsx(C,{className:"w-4 h-4"});case"property_updated":return e.jsx(Ce,{className:"w-4 h-4"});case"property_deleted":return e.jsx(re,{className:"w-4 h-4"});case"property_hidden":return e.jsx(mt,{className:"w-4 h-4"});case"property_shown":return e.jsx(I,{className:"w-4 h-4"});case"property_sold":case"property_rented":return e.jsx(xe,{className:"w-4 h-4"});case"status_changed":return e.jsx(M,{className:"w-4 h-4"});case"price_changed":return e.jsx(xe,{className:"w-4 h-4"});case"images_updated":return e.jsx(yt,{className:"w-4 h-4"});case"login":return e.jsx(wt,{className:"w-4 h-4"});case"logout":return e.jsx(Ie,{className:"w-4 h-4"});default:return e.jsx(M,{className:"w-4 h-4"})}},_=n=>{switch(n){case"property_created":return"bg-green-100 text-green-800 border-green-200";case"property_updated":return"bg-blue-100 text-blue-800 border-blue-200";case"property_deleted":return"bg-red-100 text-red-800 border-red-200";case"property_hidden":return"bg-orange-100 text-orange-800 border-orange-200";case"property_shown":return"bg-green-100 text-green-800 border-green-200";case"property_sold":case"property_rented":return"bg-purple-100 text-purple-800 border-purple-200";case"status_changed":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"price_changed":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"images_updated":return"bg-pink-100 text-pink-800 border-pink-200";case"login":return"bg-cyan-100 text-cyan-800 border-cyan-200";case"logout":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},j=n=>{if(s==="ar")switch(n){case"property_created":return"إنشاء عقار";case"property_updated":return"تحديث عقار";case"property_deleted":return"حذف عقار";case"property_hidden":return"إخفاء عقار";case"property_shown":return"إظهار عقار";case"property_sold":return"بيع عقار";case"property_rented":return"تأجير عقار";case"status_changed":return"تغيير الحالة";case"price_changed":return"تغيير السعر";case"images_updated":return"تحديث الصور";case"login":return"تسجيل دخول";case"logout":return"تسجيل خروج";default:return"نشاط"}else switch(n){case"property_created":return"Property Created";case"property_updated":return"Property Updated";case"property_deleted":return"Property Deleted";case"property_hidden":return"Property Hidden";case"property_shown":return"Property Shown";case"property_sold":return"Property Sold";case"property_rented":return"Property Rented";case"status_changed":return"Status Changed";case"price_changed":return"Price Changed";case"images_updated":return"Images Updated";case"login":return"Login";case"logout":return"Logout";default:return"Activity"}},S=n=>{const d=n.action_details||{},i=d.property_title||n.property_title||"Unknown Property";if(s==="ar")switch(n.action_type){case"property_created":return`تم إنشاء عقار جديد: ${i}`;case"property_updated":const D=d.changes?d.changes.join(", "):"تحديثات عامة";return`تم تحديث العقار: ${i} (${D})`;case"property_deleted":return`تم حذف العقار: ${i}`;case"property_hidden":return`تم إخفاء العقار: ${i}`;case"property_shown":return`تم إظهار العقار: ${i}`;case"property_sold":return`تم بيع العقار: ${i}`;case"property_rented":return`تم تأجير العقار: ${i}`;case"status_changed":return`تم تغيير حالة العقار: ${i} من ${d.old_status||"غير محدد"} إلى ${d.new_status||"غير محدد"}`;case"price_changed":return`تم تغيير سعر العقار: ${i}`;case"images_updated":return`تم تحديث صور العقار: ${i}`;case"login":return"تم تسجيل الدخول";case"logout":return"تم تسجيل الخروج";default:return`نشاط: ${n.action_type}`}else switch(n.action_type){case"property_created":return`Created new property: ${i}`;case"property_updated":const D=d.changes?d.changes.join(", "):"general updates";return`Updated property: ${i} (${D})`;case"property_deleted":return`Deleted property: ${i}`;case"property_hidden":return`Hidden property: ${i}`;case"property_shown":return`Shown property: ${i}`;case"property_sold":return`Sold property: ${i}`;case"property_rented":return`Rented property: ${i}`;case"status_changed":return`Changed property status: ${i} from ${d.old_status||"unknown"} to ${d.new_status||"unknown"}`;case"price_changed":return`Changed property price: ${i}`;case"images_updated":return`Updated property images: ${i}`;case"login":return"Logged in";case"logout":return"Logged out";default:return`Activity: ${n.action_type}`}},l=n=>{const d=new Date(n);return xt(d,{addSuffix:!0,locale:s==="ar"?jt:s==="tr"?ft:vt})};return e.jsx(ee,{open:r,onOpenChange:x,children:e.jsxs(te,{className:"max-w-4xl max-h-[80vh]",children:[e.jsx(se,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ae,{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-5 h-5"}),s==="ar"?"سجل أنشطتي":"My Activity Log"]}),g.length===0&&e.jsx(c,{onClick:y,variant:"outline",size:"sm",children:s==="ar"?"إضافة بيانات تجريبية":"Add Sample Data"})]})}),e.jsx(bt,{className:"h-[60vh] pr-4",children:w?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):g.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(M,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s==="ar"?"لا توجد أنشطة":"No Activities"}),e.jsx("p",{className:"text-gray-600",children:s==="ar"?"لم يتم تسجيل أي أنشطة بعد.":"No activities have been recorded yet."})]}):e.jsx("div",{className:"space-y-4",children:g.map((n,d)=>{var i;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-lg border bg-white hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:t(n.action_type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(O,{variant:"outline",className:_(n.action_type),children:j(n.action_type)}),e.jsx("span",{className:"text-sm text-gray-500",children:l(n.created_at)})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:S(n)}),((i=n.action_details)==null?void 0:i.price)&&e.jsxs("div",{className:"text-xs text-gray-500",children:[s==="ar"?"السعر: ":"Price: ",n.action_details.price," ",n.action_details.currency||"EUR"]})]})]}),d<g.length-1&&e.jsx(ke,{className:"mt-4"})]},n.id)})})}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(c,{variant:"outline",onClick:()=>x(!1),children:s==="ar"?"إغلاق":"Close"})})]})})},Se=(r,x="en",s={})=>{const a=typeof r=="string"?new Date(r):r,f={year:"numeric",month:"short",day:"numeric",...s},g=Tt(x);return new Intl.DateTimeFormat(g,{...f,calendar:"gregory"}).format(a)},Ft=(r,x="en")=>Se(r,x,{year:"numeric",month:"long",day:"numeric"}),Tt=r=>{switch(r){case"ar":return"ar-EG";case"tr":return"tr-TR";case"en":default:return"en-US"}},js=()=>{const{username:r}=Oe(),x=Ge(),{currentLanguage:s}=K(),{user:a}=je(),{isAdmin:f}=nt(),{toggleFavorite:g,isFavorited:N}=dt(),{cities:w,loading:b}=lt(),{districts:u,loading:y}=it();He();const[t,_]=p.useState(null),[j,S]=p.useState([]),[l,n]=p.useState(!0),[d,i]=p.useState(!1),[D,U]=p.useState(!1),[A,E]=p.useState({totalProperties:0,featuredProperties:0,availableProperties:0,hiddenProperties:0,soldProperties:0,totalViews:0,latestPost:""}),R=async()=>{try{n(!0);const{data:o,error:m}=await V.from("profiles").select("*").eq("username",r).single();if(m)throw m;_(o);const{data:h,error:le}=await V.from("properties").select("*").eq("created_by",o.id).order("created_at",{ascending:!1});if(le)throw le;if(S(h||[]),h){const Ee=h.reduce((k,ze)=>k+(ze.views_count||0),0),Ue=h.filter(k=>k.is_featured).length,Fe=h.filter(k=>k.status==="available"&&!k.is_hidden).length,Te=h.filter(k=>k.is_hidden).length,Be=h.filter(k=>k.status==="sold"||k.status==="rented").length,ie=h[0];E({totalProperties:h.length,featuredProperties:Ue,availableProperties:Fe,hiddenProperties:Te,soldProperties:Be,totalViews:Ee,latestPost:ie?Se(ie.created_at,s):""})}}catch(o){console.error("Error fetching user profile:",o)}finally{n(!1)}},{toggleVerification:F,toggleApproval:T,deleteUser:B}=gt(R);p.useEffect(()=>{r&&R()},[r]);const{ownerRatingData:v,ratingLoading:G}=at(t==null?void 0:t.id);p.useEffect(()=>{console.log("Current user:",a),console.log("User profile:",t),console.log("Are they the same?",(a==null?void 0:a.id)===(t==null?void 0:t.id)),console.log("Should show report button?",a&&t&&a.id!==t.id)},[a,t]);const Y=o=>{S(m=>m.filter(h=>h.id!==o)),E(m=>({...m,totalProperties:m.totalProperties-1,availableProperties:m.availableProperties-1}))},X=o=>({client:s==="ar"?"عميل":"Client",seller:s==="ar"?"بائع":"Seller",property_owner:s==="ar"?"مالك عقارات":"Property Owner",real_estate_office:s==="ar"?"مكتب عقارات":"Real Estate Office",partner_and_site_owner:s==="ar"?"شريك ومالك الموقع":"Partner & Site Owner"})[o]||o,$=o=>{const m=w.find(h=>h.id===o);return m?s==="ar"?m.name_ar:s==="tr"?m.name_tr:m.name_en:o},Q=o=>{const m=u.find(h=>h.id===o);return m?s==="ar"?m.name_ar:s==="tr"?m.name_tr:m.name_en:o},z=o=>{switch(o){case"EUR":return"€";case"GBP":return"£";case"USD":return"$";default:return"€"}},De=()=>s==="ar"?"غرفة":s==="tr"?"yatak odası":"beds",Ae=()=>s==="ar"?"حمام":s==="tr"?"banyo":"baths",Re=()=>s==="ar"?"م²":"m²",$e=()=>{const o=(t==null?void 0:t.full_name)||(t==null?void 0:t.username)||"";return o.trim()?o.trim().slice(0,2).toUpperCase():""},ne=o=>e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((m,h)=>e.jsx(W,{className:`w-4 h-4 ${h<Math.floor(o)?"text-yellow-400 fill-yellow-400":h<o?"text-yellow-400 fill-yellow-200":"text-gray-300 dark:text-gray-600"}`},h))});if(l)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center px-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border border-brand-accent border-t-transparent rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 w-16 h-16 border border-brand-accent/20 rounded-full animate-pulse"})]})});if(!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center px-4",children:e.jsxs("div",{className:"text-center animate-fade-in max-w-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-brand-accent/10 to-brand-accent/20 rounded-full flex items-center justify-center",children:e.jsx(H,{className:"w-10 h-10 text-brand-accent"})}),e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white mb-4",children:s==="ar"?"المستخدم غير موجود":"User not found"}),e.jsx(c,{onClick:()=>x("/"),className:"bg-gradient-to-r from-brand-accent to-brand-accent/80 hover:from-brand-accent/90 hover:to-brand-accent text-white shadow-lg hover:shadow-brand-glow transition-all duration-300",children:s==="ar"?"العودة للرئيسية":"Back to Home"})]})});const de=(a==null?void 0:a.id)!==(t==null?void 0:t.id);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",dir:s==="ar"?"rtl":"ltr",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none hidden md:block",children:[e.jsx("div",{className:"absolute top-10 left-10 text-brand-accent/20 animate-float",children:e.jsx(C,{className:"w-8 h-8"})}),e.jsx("div",{className:"absolute top-1/4 right-20 text-brand-accent/15 animate-bounce-subtle animation-delay-500",children:e.jsx(C,{className:"w-6 h-6"})}),e.jsx("div",{className:"absolute top-1/3 left-1/4 text-brand-accent/10 animate-pulse-soft animation-delay-300",children:e.jsx(C,{className:"w-10 h-10"})}),e.jsx("div",{className:"absolute bottom-32 right-1/3 text-brand-accent/20 animate-float animation-delay-700",children:e.jsx(C,{className:"w-7 h-7"})}),e.jsx("div",{className:"absolute bottom-20 left-1/4 text-brand-accent/15 animate-bounce-subtle animation-delay-1000",children:e.jsx(C,{className:"w-9 h-9"})}),e.jsx("div",{className:"absolute top-2/3 right-10 text-brand-accent/10 animate-pulse-soft animation-delay-800",children:e.jsx(C,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 md:py-8 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 md:gap-6 mb-6 sm:mb-8 md:mb-10",children:[e.jsx(c,{variant:"outline",onClick:()=>x(-1),className:"rounded-full p-2 md:p-3 shrink-0 px-[16px] py-[8px]",children:s==="ar"?e.jsx(Nt,{className:"w-4 h-4 md:w-5 md:h-5"}):e.jsx(_t,{className:"w-4 h-4 md:w-5 md:h-5"})}),e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold flex-1 text-gray-900 dark:text-white truncate",children:s==="ar"?"ملف المستخدم":"User Profile"}),e.jsxs(c,{variant:"outline",size:"sm",onClick:R,disabled:l,className:"flex items-center gap-1 sm:gap-2 md:gap-3 border-brand-accent/20 text-brand-accent hover:bg-brand-accent hover:text-white transition-all duration-300 rounded-xl shrink-0 px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 md:py-2.5",children:[e.jsx(kt,{className:`w-4 h-4 md:w-5 md:h-5 ${l?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm md:text-base",children:s==="ar"?"تحديث":"Refresh"})]})]}),e.jsx(q,{className:"mb-6 sm:mb-8 md:mb-10 shadow-lg border bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-2xl overflow-hidden animate-scale-in",children:e.jsx(L,{className:"p-4 sm:p-6 md:p-8 lg:p-10",children:e.jsxs("div",{className:"flex flex-col space-y-6 md:space-y-8",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 sm:gap-6 md:gap-8",children:[e.jsx("div",{className:"relative group shrink-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-brand-accent to-brand-accent/60 rounded-full opacity-60 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs(ge,{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 lg:w-32 lg:h-32 relative border-4 border-white dark:border-gray-800 rounded-full shadow-lg group-hover:scale-105 transition-transform duration-300",children:[e.jsx(ue,{src:t==null?void 0:t.avatar_url}),e.jsx(be,{className:"text-lg md:text-xl lg:text-2xl bg-gradient-to-br from-brand-gradient-from to-brand-gradient-to text-white font-semibold",children:$e()||e.jsx(H,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12"})})]}),!G&&v&&v.averageRating>0&&e.jsx("div",{className:"absolute -bottom-2 -right-2 bg-white border-2 border-yellow-300/30 text-yellow-600 rounded-full px-2 py-1 text-xs sm:text-sm md:text-base font-bold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:v.averageRating.toFixed(1)})]})}),e.jsxs("div",{className:"flex-1 text-center min-w-0",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white mb-2 md:mb-3 flex items-center justify-center gap-2 sm:gap-3 md:gap-4",children:[(t==null?void 0:t.is_verified)&&e.jsx(me,{size:"md"}),e.jsx("span",{className:"truncate",children:(t==null?void 0:t.full_name)||(t==null?void 0:t.username)})]}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mb-3 md:mb-4 text-base sm:text-lg md:text-xl",children:["@",t==null?void 0:t.username]}),e.jsx("div",{className:"mb-4 md:mb-6",children:e.jsx("div",{className:"flex items-center justify-center gap-2 sm:gap-3 md:gap-4",children:e.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:!G&&v&&v.ratingCount>0?e.jsxs(e.Fragment,{children:[ne(v.averageRating),e.jsxs("span",{className:"text-xs sm:text-sm md:text-base font-medium text-gray-700 dark:text-gray-300 ml-1 md:ml-2",children:["(",v.ratingCount," ",s==="ar"?"تقييمات":"reviews",")"]})]}):e.jsxs(e.Fragment,{children:[ne(0),e.jsxs("span",{className:"text-xs sm:text-sm md:text-base text-gray-500 dark:text-gray-400 ml-1 md:ml-2",children:["(",s==="ar"?"بدون تقييمات":"No reviews",")"]})]})})})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"h-12 px-4 py-2 text-xs sm:text-sm md:text-base flex items-center gap-2 text-brand-accent border border-brand-accent/30 bg-brand-accent/5 rounded-xl",children:[e.jsx(H,{className:"w-4 h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate max-w-[120px] sm:max-w-[150px] md:max-w-none",children:X(t==null?void 0:t.user_type)})]}),(t==null?void 0:t.is_verified)&&e.jsxs("div",{className:"h-12 px-4 py-2 bg-yellow-50 text-yellow-700 border border-yellow-200 rounded-xl text-xs sm:text-sm md:text-base font-semibold flex items-center gap-2 shadow-sm",children:[e.jsx(me,{size:"sm"}),e.jsx("span",{children:s==="ar"?"موثق":"Verified"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-brand-accent/5 to-brand-accent/10 rounded-xl sm:rounded-2xl p-3 sm:p-4 md:p-6 border border-brand-accent/20 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-brand-accent to-brand-accent/80 rounded-lg sm:rounded-xl p-1.5 sm:p-2 md:p-3 shrink-0",children:e.jsx(P,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs sm:text-sm md:text-base font-medium text-brand-accent",children:s==="ar"?"عضو منذ":"Member since"}),e.jsx("p",{className:"text-sm sm:text-lg md:text-xl font-bold text-gray-900 dark:text-white truncate",children:Ft((t==null?void 0:t.created_at)||"",s)})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2 sm:gap-3 md:gap-4",children:[de&&e.jsx($t,{userId:(t==null?void 0:t.id)||"",userName:(t==null?void 0:t.full_name)||(t==null?void 0:t.username)||"",children:e.jsxs(c,{variant:"outline",className:"w-full text-red-600 border-red-200 hover:bg-red-500 hover:text-white hover:border-red-500 dark:border-red-700 dark:text-red-400 flex items-center gap-2 md:gap-3 transition-all duration-300 rounded-xl text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3",children:[e.jsx(Z,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"إبلاغ عن الناشر":s==="tr"?"Yayıncıyı Bildir":"Report Seller"})]})}),de&&e.jsx(rt,{ownerId:(t==null?void 0:t.id)||"",ownerName:(t==null?void 0:t.full_name)||(t==null?void 0:t.username)||"",children:e.jsxs(c,{variant:"outline",className:"w-full text-brand-accent border-brand-accent/30 hover:bg-brand-accent hover:text-white transition-all duration-300 rounded-xl flex items-center gap-2 md:gap-3 text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3",children:[e.jsx(W,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),s==="ar"?"تقييم":"Rate"]})}),f&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{variant:"outline",className:"w-full text-blue-600 border-blue-200 hover:bg-blue-500 hover:text-white hover:border-blue-500 flex items-center gap-2 md:gap-3 transition-all duration-300 rounded-xl text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3",onClick:()=>{V.auth.admin.getUserById((t==null?void 0:t.id)||"").then(({data:o})=>{var m;(m=o.user)!=null&&m.email&&(window.location.href=`mailto:${o.user.email}`)})},children:[e.jsx(Me,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"إيميل":"Email"})]}),(t==null?void 0:t.phone)&&e.jsxs(c,{variant:"outline",className:"w-full text-purple-600 border-purple-200 hover:bg-purple-500 hover:text-white hover:border-purple-500 flex items-center gap-2 md:gap-3 transition-all duration-300 rounded-xl text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3",onClick:()=>window.location.href=`tel:${t.phone}`,children:[e.jsx(qe,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"هاتف":"Phone"})]}),(t==null?void 0:t.whatsapp_number)&&e.jsxs(c,{variant:"outline",className:"w-full text-green-600 border-green-200 hover:bg-green-500 hover:text-white hover:border-green-500 flex items-center gap-2 md:gap-3 transition-all duration-300 rounded-xl text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3",onClick:()=>window.open(`https://wa.me/${t.whatsapp_number}`,"_blank"),children:[e.jsx(Ct,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"واتساب":"WhatsApp"})]}),e.jsx(ht,{userId:(t==null?void 0:t.id)||"",userName:(t==null?void 0:t.full_name)||(t==null?void 0:t.username)||"",onSuspensionUpdated:R,trigger:e.jsxs(c,{variant:"outline",className:"w-full text-orange-600 border-orange-200 hover:bg-orange-500 hover:text-white hover:border-orange-500 flex items-center gap-2 md:gap-3 transition-all duration-300 rounded-xl text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3",children:[e.jsx(St,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"حظر المستخدم":"Suspend User"})]})}),e.jsxs(c,{variant:"outline",className:"w-full text-red-600 border-red-200 hover:bg-red-500 hover:text-white hover:border-red-500 flex items-center gap-2 md:gap-3 transition-all duration-300 rounded-xl text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3",onClick:()=>B((t==null?void 0:t.id)||"",(t==null?void 0:t.full_name)||(t==null?void 0:t.username)||""),children:[e.jsx(re,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"حذف المستخدم":"Delete User"})]}),e.jsx(c,{variant:"outline",className:`w-full ${t!=null&&t.is_verified?"text-yellow-600 border-yellow-200 hover:bg-yellow-500":"text-green-600 border-green-200 hover:bg-green-500"} hover:text-white flex items-center gap-2 md:gap-3 transition-all duration-300 rounded-xl text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3`,onClick:()=>F((t==null?void 0:t.id)||"",(t==null?void 0:t.is_verified)||!1),children:t!=null&&t.is_verified?e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"إلغاء التوثيق":"Remove Verification"})]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"توثيق المستخدم":"Verify User"})]})}),(t==null?void 0:t.user_type)!=="client"&&e.jsx(c,{variant:"outline",className:`w-full ${t!=null&&t.is_approved?"text-red-600 border-red-200 hover:bg-red-500":"text-green-600 border-green-200 hover:bg-green-500"} hover:text-white flex items-center gap-2 md:gap-3 transition-all duration-300 rounded-xl text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3`,onClick:()=>T((t==null?void 0:t.id)||"",(t==null?void 0:t.is_approved)||!1),children:t!=null&&t.is_approved?e.jsxs(e.Fragment,{children:[e.jsx(ut,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"رفض الطلب":"Reject Request"})]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"الموافقة على الطلب":"Approve Request"})]})}),e.jsxs(c,{variant:"outline",className:"w-full text-indigo-600 border-indigo-200 hover:bg-indigo-500 hover:text-white hover:border-indigo-500 flex items-center gap-2 md:gap-3 transition-all duration-300 rounded-xl text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3",onClick:()=>i(!0),children:[e.jsx(J,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"سجل الأنشطة (مدير)":s==="tr"?"Etkinlik Günlüğü (Admin)":"Activity Log (Admin)"})]}),e.jsx(Et,{userId:(t==null?void 0:t.id)||"",userName:(t==null?void 0:t.full_name)||(t==null?void 0:t.username)||"",children:e.jsxs(c,{variant:"outline",className:"w-full text-blue-600 border-blue-200 hover:bg-blue-500 hover:text-white hover:border-blue-500 flex items-center gap-2 md:gap-3 transition-all duration-300 rounded-xl text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3",children:[e.jsx(I,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"عرض البلاغات":"View Reports"})]})})]}),(a==null?void 0:a.id)===(t==null?void 0:t.id)&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{variant:"outline",className:"w-full text-green-600 border-green-200 hover:bg-green-500 hover:text-white hover:border-green-500 flex items-center gap-2 md:gap-3 transition-all duration-300 rounded-xl text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3",onClick:()=>U(!0),children:[e.jsx(J,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"سجل الأنشطة":s==="tr"?"Etkinlik Günlüğü":"Activity Log"})]}),e.jsxs(c,{variant:"outline",className:"w-full text-purple-600 border-purple-200 hover:bg-purple-500 hover:text-white hover:border-purple-500 flex items-center gap-2 md:gap-3 transition-all duration-300 rounded-xl text-xs sm:text-sm md:text-base py-2 sm:py-2.5 md:py-3",onClick:()=>x(`/user-activity/${t==null?void 0:t.id}`),children:[e.jsx(M,{className:"w-3 h-3 sm:w-4 sm:h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"truncate",children:s==="ar"?"عرض الأنشطة":s==="tr"?"Etkinlikleri Görüntüle":"View Activity"})]})]})]})]})})}),e.jsxs(q,{className:"shadow-lg border-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm rounded-2xl overflow-hidden animate-slide-up animation-delay-200",children:[e.jsx(we,{className:"p-4 sm:p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 md:gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 md:gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-brand-accent to-brand-accent/80 p-2 sm:p-3 md:p-4 rounded-xl sm:rounded-2xl shadow-lg shrink-0",children:e.jsx(C,{className:"w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx(ye,{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl text-brand-accent",children:s==="ar"?"عقارات المستخدم":"User Properties"}),e.jsx(Xe,{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm sm:text-base md:text-lg",children:s==="ar"?"جميع العقارات المتاحة لهذا المستخدم":"All available properties by this user"})]})]}),e.jsxs(O,{variant:"secondary",className:"bg-brand-accent/10 text-brand-accent px-3 sm:px-4 md:px-6 py-1.5 sm:py-2 md:py-3 text-xs sm:text-sm md:text-base font-semibold rounded-xl self-start sm:self-auto",children:[A.totalProperties," ",s==="ar"?"عقارات":"Properties"]})]})}),e.jsxs(L,{className:"p-4 sm:p-6 md:p-8",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-6 border border-blue-200 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-3",children:e.jsx(C,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:A.totalProperties}),e.jsx("p",{className:"text-sm font-medium text-blue-700",children:s==="ar"?"إجمالي العقارات":"Total Properties"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-6 border border-purple-200 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-3",children:e.jsx(W,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-purple-900",children:A.featuredProperties}),e.jsx("p",{className:"text-sm font-medium text-purple-700",children:s==="ar"?"العقارات المميزة":"Featured Properties"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6 border border-green-200 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-3",children:e.jsx(I,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-green-900",children:fe(A.totalViews)}),e.jsx("p",{className:"text-sm font-medium text-green-700",children:s==="ar"?"المشاهدات":"Views"})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl p-6 border border-orange-200 hover:shadow-lg transition-all duration-300",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-3",children:e.jsx(P,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-orange-900",children:A.latestPost||(s==="ar"?"لا يوجد":"None")}),e.jsx("p",{className:"text-sm font-medium text-orange-700",children:s==="ar"?"آخر منشور":"Latest Post"})]})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mb-4 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-brand-accent to-brand-accent/80 rounded-lg sm:rounded-xl p-1.5 sm:p-2 md:p-3 shrink-0",children:e.jsx(C,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 text-white"})}),e.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-brand-accent",children:s==="ar"?"قائمة العقارات":"Properties List"})]}),j.length===0?e.jsxs("div",{className:"text-center py-12 sm:py-16 md:py-20 animate-fade-in",children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 md:w-32 md:h-32 mx-auto mb-4 sm:mb-6 md:mb-8 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700 rounded-full flex items-center justify-center",children:e.jsx(C,{className:"w-10 h-10 sm:w-12 sm:h-12 md:w-16 md:h-16 text-gray-400 dark:text-gray-500"})}),e.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-semibold mb-2 sm:mb-3 md:mb-4 text-gray-700 dark:text-gray-300",children:s==="ar"?"لا توجد عقارات":"No Properties"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg text-gray-500 dark:text-gray-400",children:s==="ar"?"لا توجد عقارات متاحة لهذا المستخدم":"No properties available from this user"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 md:gap-8",children:j.map((o,m)=>e.jsx(Bt,{property:o,index:m,currentLanguage:s,cities:w,districts:u,citiesLoading:b,districtsLoading:y,getCityNameById:$,getDistrictNameById:Q,getCurrencySymbol:z,getBedLabel:De,getBathLabel:Ae,getAreaUnit:Re,navigate:x,toggleFavorite:g,isFavorited:N,currentUser:a,onPropertyDeleted:Y},o.id))})]})]})]})]}),e.jsx(pt,{open:d,onOpenChange:i,userId:(t==null?void 0:t.id)||"",userName:(t==null?void 0:t.full_name)||(t==null?void 0:t.username)||""}),e.jsx(Ut,{open:D,onOpenChange:U})]})},Bt=({property:r,index:x,currentLanguage:s,cities:a,districts:f,citiesLoading:g,districtsLoading:N,getCityNameById:w,getDistrictNameById:b,getCurrencySymbol:u,getBedLabel:y,getBathLabel:t,getAreaUnit:_,navigate:j,toggleFavorite:S,isFavorited:l,currentUser:n,onPropertyDeleted:d})=>{const{viewsCount:i,loading:D}=ct(r.id),U=(n==null?void 0:n.id)===r.created_by,A=()=>{j(`/property/${r.id}`)},E=$=>{$.stopPropagation(),j(`/property/${r.id}`)},R=$=>{$.stopPropagation(),S(r.id)},F=l(r.id),T=async $=>{$.stopPropagation();const Q=s==="ar"?`هل أنت متأكد من حذف "${r.title}"؟`:`Are you sure you want to delete "${r.title}"?`;if(confirm(Q))try{const{error:z}=await V.from("properties").delete().eq("id",r.id);if(z)throw z;d&&d(r.id),alert(s==="ar"?"تم حذف العقار بنجاح":"Property deleted successfully")}catch(z){console.error("Error deleting property:",z),alert(s==="ar"?"فشل في حذف العقار":"Failed to delete property")}},B=$=>{$.stopPropagation(),j("/dashboard")},v=()=>s==="ar"?"وديعة: ":s==="tr"?"Depozito: ":"Deposit: ",G=()=>s==="ar"?"عمولة: ":s==="tr"?"Komisyon: ":"Commission: ",Y=r.title||"",X=r.listing_type==="rent"?s==="ar"?"للإيجار":s==="tr"?"Kiralık":"For Rent":s==="ar"?"للبيع":s==="tr"?"Satılık":"For Sale";return e.jsxs(q,{className:oe(`group cursor-pointer rounded-2xl overflow-hidden transition-all duration-500 transform hover:-translate-y-2 border-0
        bg-card text-card-foreground
        dark:bg-[#1a2232] dark:text-[#e4e8ef]
        ${r.is_featured?"shadow-brand-glow":""}`),onClick:A,style:{animationDelay:`${x*100}ms`},children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:r.cover_image,alt:r.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.is_featured&&e.jsxs("div",{className:"absolute top-3 left-3 bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-3 py-1 rounded-full text-xs font-semibold animate-pulse-soft",children:["⭐ ",s==="ar"?"مميز":s==="tr"?"Öne Çıkan":"Featured"]}),r.is_hidden&&e.jsxs("div",{className:"absolute top-3 right-14 bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:["🙈 ",s==="ar"?"مخفي":s==="tr"?"Gizli":"Hidden"]}),(r.status==="sold"||r.status==="rented")&&e.jsx("div",{className:`absolute bottom-3 left-3 px-3 py-1 rounded-full text-xs font-bold shadow-lg ${r.status==="sold"?"bg-green-500 text-white":"bg-blue-500 text-white"}`,children:r.status==="sold"?s==="ar"?"🏠 مباع":"🏠 Sold":s==="ar"?"🏠 مؤجر":"🏠 Rented"}),e.jsxs("div",{className:"absolute top-3 right-14 flex flex-col gap-1 z-10",children:[r.deposit===0&&e.jsx(O,{className:"bg-gradient-to-r from-green-400 to-emerald-500 text-white text-xs px-2 py-1 rounded-full shadow",children:s==="ar"?"بدون وديعة":s==="tr"?"Depozitosu Yok":"No Deposit"}),r.commission===0&&e.jsx(O,{className:"bg-gradient-to-r from-purple-400 to-pink-500 text-white text-xs px-2 py-1 rounded-full shadow",children:s==="ar"?"بدون عمولة":s==="tr"?"Komisyonsuz":"No Commission"}),e.jsx(ot,{isStudentHousing:r.is_student_housing||!1,gender:r.student_housing_gender,className:"text-xs"})]}),e.jsx(c,{variant:"ghost",size:"icon",className:`absolute top-3 right-3 rounded-full transition-all duration-300 ${F?"bg-white text-red-500 shadow-lg scale-110":"bg-black/20 text-white hover:bg-white hover:text-red-500 hover:scale-110"}`,onClick:R,children:e.jsx(Ke,{className:`w-5 h-5 ${F?"fill-current":""}`})}),e.jsx("div",{className:"absolute bottom-3 left-3 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{size:"sm",className:"bg-white/90 backdrop-blur-sm text-gray-800 hover:bg-white rounded-full font-semibold",onClick:E,children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),s==="ar"?"عرض":s==="tr"?"Görüntüle":"View"]}),U&&e.jsxs(e.Fragment,{children:[e.jsx(c,{size:"sm",className:"bg-blue-500/90 backdrop-blur-sm text-white hover:bg-blue-600 rounded-full font-semibold",onClick:B,title:s==="ar"?"تعديل العقار":"Edit Property",children:e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx(c,{size:"sm",className:"bg-red-500/90 backdrop-blur-sm text-white hover:bg-red-600 rounded-full font-semibold",onClick:T,title:s==="ar"?"حذف العقار":"Delete Property",children:e.jsx(re,{className:"w-4 h-4"})})]})]})})]}),e.jsxs(L,{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"flex items-center text-muted-foreground text-sm dark:text-gray-400",children:[e.jsx(Ye,{className:"w-4 h-4 mr-1 text-brand-accent"}),e.jsx("span",{children:g||N?e.jsx("span",{className:"text-gray-400",children:s==="ar"?"جارٍ التحميل...":"Loading..."}):a.length===0?e.jsx("span",{className:"text-red-400",children:s==="ar"?"خطأ في تحميل المدن":"Error loading cities"}):e.jsxs(e.Fragment,{children:[w(r.city),r.district&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:" - "}),b(r.district)]})]})})]}),e.jsxs("h3",{className:"font-semibold text-lg text-foreground dark:text-white group-hover:text-brand-accent transition-colors duration-300 line-clamp-2",children:[Y,r.listing_type&&e.jsxs("span",{className:"text-gray-600 font-normal dark:text-gray-300",children:[" - ",X]})]}),e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse text-muted-foreground text-sm dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Dt,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[r.bedrooms," ",y()]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(At,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[r.bathrooms," ",t()]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Rt,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[r.area,_()]})]})]}),(r.deposit>0||r.commission>0)&&e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[r.deposit>0&&e.jsxs("div",{className:"text-muted-foreground bg-muted px-2 py-1 rounded dark:bg-[#273143] dark:text-gray-200",children:[v(),u(r.deposit_currency||r.currency),r.deposit]}),r.commission>0&&e.jsxs("div",{className:"text-muted-foreground bg-muted px-2 py-1 rounded dark:bg-[#273143] dark:text-gray-200",children:[G(),u(r.commission_currency||r.currency),r.commission]})]}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-brand-accent dark:text-cyan-300",children:[u(r.currency),r.price.toLocaleString(),r.listing_type==="rent"&&e.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-1 dark:text-gray-400",children:s==="ar"?"/شهر":s==="tr"?"/ay":"/month"})]}),e.jsxs("div",{className:"mt-2 flex items-center text-sm text-muted-foreground dark:text-gray-400",children:[e.jsx(I,{className:"mr-1.5 h-4 w-4"}),e.jsx("span",{children:D?s==="ar"?"جارٍ التحميل...":s==="tr"?"Yükleniyor...":"Loading...":`${fe(i??0)} ${s==="ar"?"مشاهدات":s==="tr"?"Görüntüleme":"Views"}`})]})]}),e.jsx(c,{variant:"outline",size:"sm",className:oe("self-end rounded-full transition-all duration-300 font-semibold px-6","border-brand-accent/30 text-brand-accent hover:bg-brand-accent/10 hover:border-brand-accent/50","dark:bg-transparent dark:text-white dark:border-white/30 dark:hover:bg-white/10 dark:hover:text-white dark:ring-1 dark:ring-white/10"),onClick:E,children:s==="ar"?"عرض التفاصيل":s==="tr"?"Detayları Görüntüle":"View Details"})]})]})]})};export{js as default};
