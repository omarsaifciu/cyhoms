import{c as C,a as L,L as P,V as _,r as n,j as e,H as D,s as l}from"./index-Ba-_IHuQ.js";import{C as x,a as M,c as E,b as h}from"./card-DocFJD5R.js";import{B as H}from"./badge-DRGEcZbO.js";import{T as Y,a as z,b as c,c as d}from"./tabs-3zOAl0ep.js";import{u as B,R as K,P as O,f as V,g as q}from"./ReviewsManagement-CKsIOxw2.js";import{U as v}from"./users-B-O4Ext4.js";import{C as I}from"./clock-Fq3ibpDw.js";import{T as $}from"./triangle-alert-Ds9hEMyA.js";import{S as F}from"./star-BDVVLF9N.js";import"./useUserActions-DGvKvL3f.js";import"./select-B0LLBn5t.js";import"./separator-wDokUAnQ.js";import"./refresh-cw-Dzle1iAu.js";import"./eye-off-QLdkjG-i.js";import"./square-CxCi9vpu.js";import"./input-BB7eCBwl.js";import"./circle-check-big-D_hgqrRM.js";import"./trash-2-D9yzkGdt.js";import"./plus-BhvacCnt.js";/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],J=C("headphones",G),be=()=>{const{currentLanguage:t}=L(),{profile:a,loading:p}=P(),g=_(),{users:Q,pendingUsers:f,loading:j,fetchUsers:W,toggleApproval:y,toggleVerification:X,rejectUser:b,updateUserType:Z,deleteUser:ee,approveAllPending:w,toggleSuspension:te}=B(),[s,N]=n.useState({totalUsers:0,totalProperties:0,pendingApprovals:0,totalReports:0,totalReviews:0,activeUsers:0}),[o,u]=n.useState(!0);if(n.useEffect(()=>{!p&&a&&a.user_type!=="support"&&g("/")},[a,p,g]),n.useEffect(()=>{const r=async()=>{try{u(!0);const{count:i}=await l.from("profiles").select("*",{count:"exact",head:!0}),{count:S}=await l.from("properties").select("*",{count:"exact",head:!0}),{count:U}=await l.from("profiles").select("*",{count:"exact",head:!0}).eq("is_approved",!1).in("user_type",["agent","property_owner","real_estate_office","partner_and_site_owner"]),{count:R}=await l.from("reports").select("*",{count:"exact",head:!0}),{count:A}=await l.from("reviews").select("*",{count:"exact",head:!0}),m=new Date;m.setDate(m.getDate()-30);const{count:T}=await l.from("profiles").select("*",{count:"exact",head:!0}).gte("updated_at",m.toISOString());N({totalUsers:i||0,totalProperties:S||0,pendingApprovals:U||0,totalReports:R||0,totalReviews:A||0,activeUsers:T||0})}catch(i){console.error("Error fetching stats:",i)}finally{u(!1)}};(a==null?void 0:a.user_type)==="support"&&r()},[a]),p)return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-brand-accent mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:t==="ar"?"جاري التحميل...":t==="tr"?"Yükleniyor...":"Loading..."})]})});if(!a||a.user_type!=="support")return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:e.jsxs(x,{className:"w-full max-w-md",children:[e.jsx(M,{children:e.jsx(E,{className:"text-center text-red-600",children:t==="ar"?"غير مصرح":t==="tr"?"Yetkisiz":"Unauthorized"})}),e.jsx(h,{children:e.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400",children:t==="ar"?"ليس لديك صلاحية للوصول إلى لوحة الدعم الفني":t==="tr"?"Destek paneline erişim yetkiniz yok":"You do not have permission to access the support dashboard"})})]})});const k=[{title:t==="ar"?"إجمالي المستخدمين":t==="tr"?"Toplam Kullanıcılar":"Total Users",value:o?"...":s.totalUsers.toLocaleString(),icon:v,color:"text-blue-600",bgColor:"bg-blue-100"},{title:t==="ar"?"المستخدمين النشطين":t==="tr"?"Aktif Kullanıcılar":"Active Users",value:o?"...":s.activeUsers.toLocaleString(),icon:v,color:"text-green-600",bgColor:"bg-green-100"},{title:t==="ar"?"الموافقات المعلقة":t==="tr"?"Bekleyen Onaylar":"Pending Approvals",value:o?"...":s.pendingApprovals.toLocaleString(),icon:I,color:"text-orange-600",bgColor:"bg-orange-100"},{title:t==="ar"?"إجمالي العقارات":t==="tr"?"Toplam Mülkler":"Total Properties",value:o?"...":s.totalProperties.toLocaleString(),icon:D,color:"text-purple-600",bgColor:"bg-purple-100"},{title:t==="ar"?"إجمالي التقارير":t==="tr"?"Toplam Raporlar":"Total Reports",value:o?"...":s.totalReports.toLocaleString(),icon:$,color:"text-red-600",bgColor:"bg-red-100"},{title:t==="ar"?"إجمالي التقييمات":t==="tr"?"Toplam Değerlendirmeler":"Total Reviews",value:o?"...":s.totalReviews.toLocaleString(),icon:F,color:"text-yellow-600",bgColor:"bg-yellow-100"}];return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",dir:t==="ar"?"rtl":"ltr",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(J,{className:"w-8 h-8 text-brand-accent"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t==="ar"?"لوحة الدعم الفني":t==="tr"?"Destek Paneli":"Support Dashboard"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t==="ar"?"إدارة طلبات الدعم والمساعدة للمستخدمين":t==="tr"?"Kullanıcı destek taleplerini ve yardımı yönetin":"Manage user support requests and assistance"}),e.jsx(H,{variant:"secondary",className:"mt-2",children:t==="ar"?"دعم فني":t==="tr"?"Destek":"Support"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:k.map((r,i)=>e.jsx(x,{className:"hover:shadow-lg transition-shadow",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.value})]}),e.jsx("div",{className:`p-3 rounded-full ${r.bgColor}`,children:e.jsx(r.icon,{className:`w-6 h-6 ${r.color}`})})]})})},i))}),e.jsxs(Y,{defaultValue:"reports",className:"w-full",children:[e.jsxs(z,{className:"grid w-full grid-cols-4",children:[e.jsx(c,{value:"reports",children:t==="ar"?"إدارة التقارير":t==="tr"?"Rapor Yönetimi":"Reports Management"}),e.jsx(c,{value:"approvals",children:t==="ar"?"الموافقات المعلقة":t==="tr"?"Bekleyen Onaylar":"Pending Approvals"}),e.jsx(c,{value:"activities",children:t==="ar"?"أنشطة العقارات":t==="tr"?"Mülk Faaliyetleri":"Property Activities"}),e.jsx(c,{value:"reviews",children:t==="ar"?"إدارة التقييمات":t==="tr"?"Değerlendirme Yönetimi":"Reviews Management"})]}),e.jsx(d,{value:"reports",className:"mt-6",children:e.jsx(K,{})}),e.jsx(d,{value:"approvals",className:"mt-6",children:e.jsx(O,{pendingUsers:f,onApprove:y,onReject:b,onApproveAll:w,loading:j})}),e.jsx(d,{value:"activities",className:"mt-6",children:e.jsx(V,{})}),e.jsx(d,{value:"reviews",className:"mt-6",children:e.jsx(q,{})})]})]})})};export{be as default};
