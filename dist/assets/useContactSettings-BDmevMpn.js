import{r,G as w,s as o}from"./index-Ba-_IHuQ.js";const f=()=>{const[e,s]=r.useState({phone_number:"",email:"",whatsapp_number:"",whatsapp_greeting_ar:"",whatsapp_greeting_en:"",whatsapp_greeting_tr:""}),[p,g]=r.useState(!0),[c,i]=r.useState(!1),{toast:n}=w(),_=async()=>{try{const{data:t,error:a}=await o.from("contact_settings").select("*").eq("setting_key","default_contact").maybeSingle();if(a&&a.code!=="PGRST116"){console.error("Error fetching contact settings:",a);return}t&&s({phone_number:t.phone_number||"",email:t.email||"",whatsapp_number:t.whatsapp_number||"",whatsapp_greeting_ar:t.whatsapp_greeting_ar||"",whatsapp_greeting_en:t.whatsapp_greeting_en||"",whatsapp_greeting_tr:t.whatsapp_greeting_tr||""})}catch(t){console.error("Error fetching contact settings:",t)}finally{g(!1)}},h=(t,a)=>{s(l=>({...l,[t]:a}))},u=async()=>{i(!0);try{const{error:t}=await o.from("contact_settings").update({phone_number:e.phone_number,email:e.email,whatsapp_number:e.whatsapp_number,whatsapp_greeting_ar:e.whatsapp_greeting_ar,whatsapp_greeting_en:e.whatsapp_greeting_en,whatsapp_greeting_tr:e.whatsapp_greeting_tr,updated_at:new Date().toISOString()}).eq("setting_key","default_contact");if(t){console.error("Error saving contact settings:",t),n({title:"خطأ",description:"حدث خطأ أثناء حفظ إعدادات التواصل",variant:"destructive"});return}n({title:"تم الحفظ",description:"تم حفظ إعدادات التواصل بنجاح"})}catch(t){console.error("Error saving contact settings:",t),n({title:"خطأ",description:"حدث خطأ أثناء حفظ إعدادات التواصل",variant:"destructive"})}finally{i(!1)}};return r.useEffect(()=>{_()},[]),{settings:e,loading:p,saving:c,updateSetting:h,saveSettings:u}};export{f as u};
