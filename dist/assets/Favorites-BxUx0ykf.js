import{a as b,j as e,as as h,W as A,I as g,ae as w,V as k,M as B,u as D,G as P,K as T,r as v,L as $,s as y}from"./index-Ba-_IHuQ.js";import{L as G}from"./log-in-C1PKOqHo.js";import{C as M,b as q}from"./card-DocFJD5R.js";import{B as j}from"./badge-DRGEcZbO.js";import{S as R}from"./StudentHousingBadge-BukBy-_d.js";import{B as Y,a as H,S as W}from"./square-CxCi9vpu.js";import{A as U}from"./arrow-right-Bj_z4KDd.js";import{A as V}from"./arrow-left-YqLAbwqU.js";import{T as K}from"./trash-2-D9yzkGdt.js";const J=({user:r,profile:o})=>{var d,c,s;const{currentLanguage:i}=b(),t=i==="ar"?"المفضلة":i==="tr"?"Favoriler":"My Favorites",x=i==="ar"?"العقارات التي أضفتها إلى قائمة المفضلة الخاصة بك":i==="tr"?"Favori listenize kaydettiğiniz mülkler":"Properties you have saved to your favorites list.",f=i==="ar"?"مرحباً بعودتك، ":i==="tr"?"Tekrar hoş geldin, ":"Welcome back, ",n=(d=o==null?void 0:o.full_name)!=null&&d.trim()&&(o==null?void 0:o.full_name)!==""?o.full_name:((c=r==null?void 0:r.user_metadata)==null?void 0:c.full_name)||((s=r==null?void 0:r.email)==null?void 0:s.split("@")[0])||"";return e.jsxs("div",{className:"text-center mb-12 animate-fade-in",style:{animationDelay:"100ms"},children:[e.jsx("div",{className:"w-20 h-20 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl ring-4 ring-blue-500/10 dark:ring-blue-400/20",style:{background:"linear-gradient(135deg, var(--brand-gradient-from-color, #ec489a) 0%, var(--brand-gradient-to-color, #f43f5e) 100%)"},children:e.jsx(h,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent dark:from-gray-100 dark:to-gray-400",children:t}),e.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-300 mt-2 leading-relaxed max-w-2xl mx-auto",children:x}),r&&e.jsxs("div",{className:"mt-6 p-4 backdrop-blur-xl bg-white/90 dark:bg-slate-800/90 border border-white/30 dark:border-slate-700/50 shadow-xl rounded-3xl max-w-md mx-auto transition-all duration-300 hover:shadow-2xl",children:[e.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[f,n]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.email})]})]})},O=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 py-24 relative overflow-hidden transition-all duration-500",style:{background:`
          linear-gradient(135deg,
            color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 3%, transparent),
            color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 2%, transparent)
          ),
          linear-gradient(to bottom right,
            #fafbff 0%,
            #f1f5f9 50%,
            #e2e8f0 100%
          )
        `,...typeof window<"u"&&document.documentElement.classList.contains("dark")&&{background:`
            linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 8%, transparent),
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 5%, transparent)
            ),
            linear-gradient(to bottom right,
              #0f172a 0%,
              #1e293b 50%,
              #334155 100%
            )
          `}},children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx(A,{className:"w-16 h-16 animate-spin",strokeWidth:3,style:{color:"var(--brand-gradient-from-color)"}}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 font-medium text-lg tracking-wide",children:"...Loading"})]})}),Q=()=>{const{currentLanguage:r}=b(),o=r==="ar"?"يجب تسجيل الدخول لعرض المفضلة":r==="tr"?"Favorileri Görüntülemek İçin Giriş Yapmalısınız":"Login to View Favorites",i=r==="ar"?"سجل دخولك لترى العقارات التي أضفتها إلى قائمة المفضلة":r==="tr"?"Favori listenize eklediğiniz mülkleri görmek için giriş yapın":"Sign in to see the properties you have added to your favorites list.",t=r==="ar"?"تسجيل الدخول":r==="tr"?"Giriş Yap":"Sign In";return e.jsx("div",{className:"min-h-screen bg-gray-50/50 dark:bg-[#222636] pt-20",children:e.jsx("div",{className:"container mx-auto px-4 py-12 flex-grow flex items-center justify-center",children:e.jsxs("div",{className:"text-center py-16 animate-fade-in",children:[e.jsx(h,{className:"w-16 h-16 text-gray-300 dark:text-gray-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-600 dark:text-gray-300 mb-2",children:o}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:i}),e.jsx(g,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-brand-gradient-from to-brand-gradient-to text-white font-semibold rounded-full hover:scale-105 transition-transform",children:e.jsxs(w,{to:"/login",children:[e.jsx(G,{className:"w-5 h-5 mr-2"}),t]})})]})})})},X=()=>{const{currentLanguage:r}=b(),o=r==="ar"?"قائمة المفضلة فارغة":r==="tr"?"Favori Listeniz Boş":"Your Favorites List is Empty",i=r==="ar"?"ابدأ في استكشاف العقارات وإضافتها إلى المفضلة!":r==="tr"?"Mülkleri keşfetmeye başlayın ve favorilerinize ekleyin!":"Start exploring properties and add them to your favorites!",t=r==="ar"?"تصفح العقارات":r==="tr"?"Mülklere Göz At":"Browse Properties";return e.jsx("div",{className:"text-center py-20 animate-fade-in",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"w-24 h-24 rounded-3xl flex items-center justify-center mx-auto mb-8 shadow-2xl ring-4 ring-pink-500/10 dark:ring-pink-400/20 relative",style:{background:"linear-gradient(135deg, var(--brand-gradient-from-color, #ec489a) 0%, var(--brand-gradient-to-color, #f43f5e) 100%)"},children:[e.jsx(h,{className:"w-12 h-12 text-white animate-pulse"}),e.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-r from-pink-400/20 to-rose-400/20 animate-ping"})]}),e.jsx("h2",{className:"text-4xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent dark:from-gray-100 dark:to-gray-400 mb-4",children:o}),e.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-10 leading-relaxed",children:i}),e.jsx(g,{asChild:!0,size:"lg",className:"h-14 px-8 rounded-2xl text-white font-semibold shadow-xl hover:shadow-2xl transition-all duration-300 transform hover:scale-105 hover:brightness-95",style:{background:"linear-gradient(135deg, var(--brand-gradient-from-color, #ec489a) 0%, var(--brand-gradient-to-color, #f43f5e) 100%)"},children:e.jsxs(w,{to:"/",className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5"}),t]})})]})})},Z=({favorite:r,onRemove:o,getCityName:i,getDistrictName:t,getPropertyTitle:x,getCurrencySymbol:f,currentLanguage:n,animationDelay:d})=>{const c=k(),s=r.properties;return e.jsxs(M,{className:"group cursor-pointer rounded-2xl overflow-hidden transition-all duration-500 transform hover:-translate-y-2 backdrop-blur-xl bg-white/95 dark:bg-slate-800/95 border border-white/30 dark:border-slate-700/50 shadow-xl hover:shadow-2xl animate-scale-in",style:{animationDelay:d},onClick:()=>c(`/property/${s.id}`),children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:s.cover_image||"/placeholder.svg",alt:x(s),className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),e.jsx(g,{variant:"ghost",size:"icon",onClick:u=>{u.stopPropagation(),o(s.id)},className:"absolute top-3 right-3 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full h-10 w-10 shadow-lg transition-all duration-300 group/heart",children:e.jsx(h,{className:"w-5 h-5 fill-current group-hover/heart:scale-110 transition-transform duration-200"})}),e.jsxs("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:[s.deposit===0&&e.jsx(j,{className:"bg-gradient-to-r from-green-400 to-emerald-500 text-white text-xs px-3 py-1 rounded-full shadow-lg backdrop-blur-sm border border-white/20",children:n==="ar"?"بدون وديعة":n==="tr"?"Depozitosuz":"No Deposit"}),s.commission===0&&e.jsx(j,{className:"bg-gradient-to-r from-purple-400 to-indigo-500 text-white text-xs px-3 py-1 rounded-full shadow-lg backdrop-blur-sm border border-white/20",children:n==="ar"?"بدون عمولة":n==="tr"?"Komisyonsuz":"No Commission"}),s.is_student_housing&&e.jsx(R,{isStudentHousing:!0,gender:s.student_housing_gender,className:"text-xs shadow-lg"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsxs(q,{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white group-hover:text-brand-accent transition-colors duration-300 line-clamp-2 leading-tight",children:x(s)}),e.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[e.jsx(B,{className:"w-4 h-4 mr-2 flex-shrink-0 text-brand-accent/70"}),e.jsxs("span",{className:"text-sm truncate font-medium",children:[t(s.district||"")&&`${t(s.district||"")}, `,i(s.city)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-slate-700/50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Y,{className:"w-4 h-4 text-brand-accent"}),e.jsx("span",{className:"font-medium",children:s.bedrooms||1})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(H,{className:"w-4 h-4 text-brand-accent"}),e.jsx("span",{className:"font-medium",children:s.bathrooms||1})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(W,{className:"w-4 h-4 text-brand-accent"}),e.jsxs("span",{className:"font-medium",children:[s.area||50,"م²"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-xl font-bold text-brand-accent",children:[f(s.currency),s.price.toLocaleString()]}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:["/",n==="ar"?"شهرياً":"month"]})]}),e.jsx(g,{size:"sm",className:"rounded-xl text-white font-medium shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 px-4 py-2",style:{background:"linear-gradient(135deg, var(--brand-gradient-from-color, #ec489a) 0%, var(--brand-gradient-to-color, #f43f5e) 100%)"},onClick:u=>{u.stopPropagation(),c(`/property/${s.id}`)},children:n==="ar"?"عرض":"View"})]})]})]})},le=()=>{const{user:r,loading:o}=D(),{toast:i}=P(),{currentLanguage:t}=b(),{cities:x,districts:f}=T(),[n,d]=v.useState([]),[c,s]=v.useState(!0),{profile:u}=$(),N=k();v.useEffect(()=>{r?_():o||s(!1)},[r,o]);const _=async()=>{if(r){s(!0);try{const{data:a,error:l}=await y.from("favorites").select(`
          id, property_id, created_at,
          properties (
            id, title, title_ar, title_en, title_tr, price,
            currency, city, district, bedrooms, bathrooms,
            area, cover_image, deposit, commission, 
            is_student_housing, student_housing_gender
          )
        `).eq("user_id",r.id).order("created_at",{ascending:!1});if(l)throw l;const m=(a==null?void 0:a.filter(p=>p.properties))||[];d(m)}catch(a){console.error("Error fetching favorites:",a),i({title:t==="ar"?"خطأ":"Error",description:t==="ar"?"فشل في تحميل المفضلة":"Failed to load favorites",variant:"destructive"})}finally{s(!1)}}},F=async a=>{if(!r)return;const l=[...n];d(n.filter(p=>p.property_id!==a));const{error:m}=await y.from("favorites").delete().eq("user_id",r.id).eq("property_id",a);m?(d(l),i({title:t==="ar"?"خطأ":"Error",description:t==="ar"?"فشل في إزالة العقار من المفضلة":"Failed to remove property from favorites",variant:"destructive"})):i({title:t==="ar"?"تم بنجاح":"Success",description:t==="ar"?"تم إزالة العقار من المفضلة":"Property removed from favorites"})},C=async()=>{if(!(!r||n.length===0))try{const{error:a}=await y.from("favorites").delete().eq("user_id",r.id);if(a)throw a;d([]),i({title:t==="ar"?"نجح":"Success",description:t==="ar"?"تم حذف جميع المفضلة":"All favorites have been cleared"})}catch(a){console.error("Error clearing favorites:",a),i({title:t==="ar"?"خطأ":"Error",description:t==="ar"?"فشل في حذف جميع المفضلة":"Failed to clear all favorites",variant:"destructive"})}},z=a=>{const l=x.find(m=>m.id===a);return l?t==="ar"?l.name_ar:t==="tr"?l.name_tr:l.name_en:a},L=a=>{if(!a)return"";const l=f.find(m=>m.id===a);return l?t==="ar"?l.name_ar:t==="tr"?l.name_tr:l.name_en:a},S=a=>t==="ar"&&a.title_ar?a.title_ar:t==="tr"&&a.title_tr?a.title_tr:a.title_en||a.title,E=a=>{switch(a){case"EUR":return"€";case"GBP":return"£";case"USD":return"$";default:return"TRY"}};return o||c?e.jsx(O,{}):r?e.jsxs("div",{className:"min-h-screen flex flex-col p-4 py-24 relative overflow-hidden transition-all duration-500",style:{background:`
          linear-gradient(135deg,
            color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 3%, transparent),
            color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 2%, transparent)
          ),
          linear-gradient(to bottom right,
            #fafbff 0%,
            #f1f5f9 50%,
            #e2e8f0 100%
          )
        `,...typeof window<"u"&&document.documentElement.classList.contains("dark")&&{background:`
            linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 8%, transparent),
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 5%, transparent)
            ),
            linear-gradient(to bottom right,
              #0f172a 0%,
              #1e293b 50%,
              #334155 100%
            )
          `}},children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-5 dark:opacity-10",style:{background:`linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 8%, transparent) 0%,
              transparent 50%,
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 5%, transparent) 100%
            )`}}),e.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 rounded-full blur-3xl animate-pulse opacity-10 dark:opacity-15",style:{background:`linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 8%, transparent),
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 6%, transparent)
            )`}}),e.jsx("div",{className:"absolute bottom-20 right-20 w-80 h-80 rounded-full blur-3xl animate-pulse delay-1000 opacity-8 dark:opacity-12",style:{background:`linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 6%, transparent),
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 5%, transparent)
            )`}}),e.jsx("div",{className:"absolute top-32 right-1/4 w-3 h-3 rounded-full animate-bounce opacity-20 dark:opacity-30",style:{background:"color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 25%, transparent)"}}),e.jsx("div",{className:"absolute bottom-40 left-1/3 w-2 h-2 rounded-full animate-bounce delay-300 opacity-15 dark:opacity-25",style:{background:"color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 20%, transparent)"}}),e.jsx("div",{className:"absolute top-2/3 right-1/3 w-1 h-1 rounded-full animate-ping delay-700 opacity-25 dark:opacity-35",style:{background:"color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 30%, transparent)"}}),e.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 rounded-full blur-2xl animate-pulse delay-200 opacity-5 dark:opacity-8",style:{background:`linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 5%, transparent),
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 4%, transparent)
            )`}}),e.jsx("div",{className:"absolute bottom-32 left-10 w-40 h-40 rounded-full blur-3xl animate-pulse delay-800 opacity-4 dark:opacity-6",style:{background:`linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 4%, transparent),
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 3%, transparent)
            )`}})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 md:gap-6 mb-6 sm:mb-8 md:mb-10 pt-4 sm:pt-6 md:pt-8",children:[e.jsx(g,{variant:"outline",onClick:()=>N(-1),className:"rounded-full p-2 md:p-3 shrink-0 px-[16px] py-[8px]",children:t==="ar"?e.jsx(U,{className:"w-4 h-4 md:w-5 md:h-5"}):e.jsx(V,{className:"w-4 h-4 md:w-5 md:h-5"})}),e.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold flex-1 text-gray-900 dark:text-white truncate",children:t==="ar"?"المفضلة":t==="tr"?"Favoriler":"My Favorites"})]}),e.jsx(J,{user:r,profile:u}),n.length===0?e.jsx(X,{}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between animate-fade-in",style:{animationDelay:"300ms"},children:[e.jsx("p",{className:"text-slate-600 dark:text-slate-300 font-medium",children:t==="ar"?`لديك ${n.length} عقارات في المفضلة`:`You have ${n.length} properties in your favorites`}),e.jsxs(g,{variant:"outline",onClick:C,className:"text-red-600 dark:text-red-400 border-red-300 dark:border-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 rounded-xl bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),t==="ar"?"حذف الكل":"Clear All"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map((a,l)=>a.properties&&e.jsx(Z,{favorite:a,onRemove:F,getCityName:z,getDistrictName:L,getPropertyTitle:S,getCurrencySymbol:E,currentLanguage:t,animationDelay:`${400+l*100}ms`},a.id))})]})]})]}):e.jsx(Q,{})};export{le as default};
