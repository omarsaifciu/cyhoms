import{c as v,u as E,r as u,s as i,j as y,P as R,D as x}from"./index-Ba-_IHuQ.js";/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],b=v("external-link",N),A=()=>{const{user:o}=E(),[a,t]=u.useState(!1);return{loading:a,reportProperty:async(r,e)=>{if(!o)return{success:!1,error:"يجب تسجيل الدخول أولاً"};t(!0);try{const{error:s}=await i.from("property_reports").insert({property_id:r,reporter_user_id:o.id,report_type:e.report_type,reason:e.reason});if(s)throw s;return{success:!0}}catch(s){return console.error("Error reporting property:",s),{success:!1,error:"حدث خطأ أثناء إرسال البلاغ"}}finally{t(!1)}},reportUser:async(r,e)=>{if(!o)return{success:!1,error:"يجب تسجيل الدخول أولاً"};t(!0);try{const{error:s}=await i.from("user_reports").insert({reported_user_id:r,reporter_user_id:o.id,report_type:e.report_type,reason:e.reason});if(s)throw s;return{success:!0}}catch(s){return console.error("Error reporting user:",s),{success:!1,error:"حدث خطأ أثناء إرسال البلاغ"}}finally{t(!1)}},fetchPropertyReports:async()=>{t(!0);try{const{data:r,error:e}=await i.from("property_reports").select(`
          *,
          properties(id, title),
          profiles!property_reports_reporter_user_id_fkey(id, full_name, username)
        `).order("created_at",{ascending:!1});return e?(console.error("Error fetching property reports:",e),{data:[],error:e}):(console.log("Fetched property reports:",r),{data:r||[],error:null})}catch(r){return console.error("Error fetching property reports:",r),{data:[],error:r}}finally{t(!1)}},fetchUserReports:async()=>{t(!0);try{const{data:r,error:e}=await i.from("user_reports").select(`
          *,
          reported_profile:profiles!user_reports_reported_user_id_fkey(id, full_name, username),
          reporter_profile:profiles!user_reports_reporter_user_id_fkey(id, full_name, username)
        `).order("created_at",{ascending:!1});return e?(console.error("Error fetching user reports:",e),{data:[],error:e}):(console.log("Fetched user reports:",r),{data:r||[],error:null})}catch(r){return console.error("Error fetching user reports:",r),{data:[],error:r}}finally{t(!1)}},updateReportStatus:async(r,e,s,w=!1)=>{t(!0);try{const l=w?"user_reports":"property_reports",{error:f}=await i.from(l).update({status:e,admin_notes:s,reviewed_by:o==null?void 0:o.id,reviewed_at:new Date().toISOString()}).eq("id",r);if(f)throw f;return{success:!0}}catch(l){return console.error("Error updating report status:",l),{success:!1,error:l}}finally{t(!1)}}}};var S="Separator",_="horizontal",k=["horizontal","vertical"],h=u.forwardRef((o,a)=>{const{decorative:t,orientation:n=_,...p}=o,c=P(n)?n:_,d=t?{role:"none"}:{"aria-orientation":c==="vertical"?c:void 0,role:"separator"};return y.jsx(R.div,{"data-orientation":c,...d,...p,ref:a})});h.displayName=S;function P(o){return k.includes(o)}var m=h;const O=u.forwardRef(({className:o,orientation:a="horizontal",decorative:t=!0,...n},p)=>y.jsx(m,{ref:p,decorative:t,orientation:a,className:x("shrink-0 bg-border",a==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",o),...n}));O.displayName=m.displayName;export{b as E,O as S,A as u};
