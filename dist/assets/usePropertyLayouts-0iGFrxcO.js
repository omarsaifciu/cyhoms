import{a as _,G as m,r as s,s as c}from"./index-Ba-_IHuQ.js";const h=t=>{const{currentLanguage:a}=_(),{toast:p}=m(),[i,u]=s.useState([]),[y,l]=s.useState(!0),n=async()=>{l(!0);try{console.log("Fetching property layouts...");const{data:e,error:o}=await c.from("property_layouts").select("*").eq("is_active",!0).order("created_at",{ascending:!0});if(o)throw console.error("Supabase error:",o),o;console.log("Raw property layouts data:",e),console.log("Number of layouts found:",(e==null?void 0:e.length)||0),e==null||e.forEach((r,g)=>{console.log(`Layout ${g+1}:`,{id:r.id,name_ar:r.name_ar,name_en:r.name_en,name_tr:r.name_tr,property_type_id:r.property_type_id,is_active:r.is_active})}),u(e||[])}catch(e){console.error("Error fetching property layouts:",e),p({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"فشل في تحميل تقسيمات العقارات":"Failed to load property layouts",variant:"destructive"}),u([])}finally{l(!1)}};return s.useEffect(()=>{n()},[t]),s.useEffect(()=>{const e=c.channel("property_layouts_changes").on("postgres_changes",{event:"*",schema:"public",table:"property_layouts"},o=>{console.log("Property layout changed:",o),n()}).subscribe();return()=>{c.removeChannel(e)}},[]),{propertyLayouts:i,loading:y,fetchPropertyLayouts:n}},d=(t,a)=>{switch(a){case"ar":return t.name_ar;case"tr":return t.name_tr;default:return t.name_en}};export{d as g,h as u};
