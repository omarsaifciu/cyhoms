import{c as ee,r as c,s as F,a as A,j as e,I as V,M as je,aj as Yt,D as re,t as ke,y as Ne,A as Xe,P as B,e as L,v as Se,b as z,h as Qe,ak as Gt,a6 as Xt,a4 as Qt,al as ie,T as Ce,d as Zt,f as Ze,g as Jt,R as er,i as tr,_ as rr,k as ar,l as K,m as sr,z as nr,n as or,o as lr,p as ir,q as cr,am as Je,an as et,w as dr,S as ur,F as mr,ao as hr,ap as gr,aq as xr,ar as tt,H as fr,as as pr,u as ce,G as rt,at as le,N as br,O as vr,Q as yr,U as wr,au as jr,av as kr,ai as Nr,ab as Sr}from"./index-Ba-_IHuQ.js";import{E as Cr}from"./eye-off-QLdkjG-i.js";import{u as Pr,a as Er,c as _r,g as Rr,b as Dr}from"./cityUtils-DwiwOoBI.js";import{C as Pe,b as Ee}from"./card-DocFJD5R.js";import{S as W,a as Y,b as G,c as X,d as Q,u as Tr,e as at,C as Ar}from"./select-B0LLBn5t.js";import{P as st}from"./PropertyLayoutFilter-Dsev0TG9.js";import{P as nt,t as Mr,c as Lr}from"./PropertyCard-Dx417oG4.js";import{B as $r}from"./building-BvIGYq90.js";import{G as Or}from"./StudentHousingBadge-BukBy-_d.js";import{C as Ve,a as Fr,b as Br,c as Ir}from"./carousel-Bi4J4_1J.js";import{S as zr}from"./shield-DN6pgIRS.js";import{C as Vr}from"./clock-Fq3ibpDw.js";import{S as Z}from"./star-BDVVLF9N.js";import{T as Hr}from"./textarea-D6kC44b6.js";import{P as Ur}from"./plus-BhvacCnt.js";import{S as qr}from"./send-DBGujvD3.js";import{B as Kr}from"./badge-DRGEcZbO.js";import{U as Wr}from"./users-B-O4Ext4.js";import"./useQuery-D_0ZzEPi.js";import"./usePropertyLayouts-0iGFrxcO.js";import"./useAdminStatus-CtzbR6_N.js";import"./trash-2-D9yzkGdt.js";import"./usePropertyViewsCount-BXmCnfId.js";import"./square-CxCi9vpu.js";import"./arrow-right-Bj_z4KDd.js";import"./arrow-left-YqLAbwqU.js";/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Gr=ee("award",Yr);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Qr=ee("building-2",Xr);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Jr=ee("chevron-left",Zr);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],ta=ee("key",ea);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],aa=ee("sliders-vertical",ra);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],fe=ee("sparkles",sa),na=()=>{const[t,r]=c.useState([]),[s,a]=c.useState(!0);c.useEffect(()=>{o();const n=F.channel("hero_backgrounds_changes").on("postgres_changes",{event:"*",schema:"public",table:"hero_backgrounds"},()=>{o()}).subscribe();return()=>{n.unsubscribe()}},[]);const o=async()=>{a(!0);try{const{data:n,error:l}=await F.from("hero_backgrounds").select("id, image_url, is_active").order("created_at",{ascending:!0});l?(console.error("Error fetching hero backgrounds:",l),r([])):r(n||[])}catch(n){console.error("Error fetching hero backgrounds:",n),r([])}finally{a(!1)}};return{backgrounds:t,loading:s}},oa=()=>{A();const[t,r]=c.useState({totalProperties:0,totalCities:0,totalViews:0,loading:!0});c.useEffect(()=>{s()},[]);const s=async()=>{try{r(h=>({...h,loading:!0}));const{count:a,error:o}=await F.from("properties").select("*",{count:"exact",head:!0}).eq("status","available");if(o)throw o;const{count:n,error:l}=await F.from("districts").select("*",{count:"exact",head:!0}).eq("is_active",!0);if(l)throw l;const{count:i,error:m}=await F.from("property_views").select("property_id, properties!inner(status, hidden_by_admin)",{count:"exact",head:!0}).eq("properties.status","available").neq("properties.hidden_by_admin",!0);if(m)throw m;r({totalProperties:a||0,totalCities:n||0,totalViews:i||0,loading:!1})}catch(a){console.error("Error fetching hero stats:",a),r(o=>({...o,loading:!1}))}};return{...t,refreshStats:s}},la=({settings:t,settingsLoading:r})=>{const{t:s,currentLanguage:a}=A(),{backgrounds:o,loading:n}=na(),{totalProperties:l,totalCities:i,totalViews:m,loading:h}=oa(),[d,u]=c.useState(null),g="https://images.unsplash.com/photo-1721322800607-8c38375eef04";c.useEffect(()=>{if(!(r||n))if(t.heroSlideshowEnabled){const y=o.filter(v=>v.is_active);if(y.length>0){let v=0;u(y[v].image_url);const S=setInterval(()=>{v=(v+1)%y.length,u(y[v].image_url)},(t.heroSlideshowInterval||5)*1e3);return()=>clearInterval(S)}else u(null)}else{const y=o.find(v=>v.is_active);u(y?y.image_url:null)}},[t,r,o,n]);const f=()=>t?a==="ar"?t.heroTitleAr:a==="tr"?t.heroTitleTr:t.heroTitleEn:"",w=()=>t?a==="ar"?t.heroDescriptionAr:a==="tr"?t.heroDescriptionTr:t.heroDescriptionEn:"",x=d||g,p=(y,v)=>v?e.jsx("div",{className:"animate-pulse bg-white/20 rounded h-8 w-16"}):Yt(y),b=()=>{let y=document.querySelector('[data-section="featured-properties"]');if(y||(y=document.querySelector('[data-section="properties"]')||document.querySelector(".properties-section")),y){const v=y.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:v,behavior:"smooth"}),document.documentElement.style.scrollBehavior="smooth",setTimeout(()=>document.documentElement.style.scrollBehavior="auto",1e3)}else window.scrollTo({top:window.innerHeight*1.3,behavior:"smooth"})};return e.jsxs("section",{className:"relative min-h-screen h-auto flex items-center justify-center overflow-hidden w-full",children:[e.jsxs("div",{className:"absolute inset-0 w-full",children:[n?e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-200 to-gray-300 animate-pulse"}):e.jsx("div",{className:"absolute inset-0 w-full transition-opacity duration-1000",children:e.jsx("img",{src:x,alt:"Hero background",className:"w-full h-full object-cover scale-105 hero-float transition-all duration-1000 ease-out animate-fade-in",style:{filter:"brightness(0.85) contrast(1.1)"}},x)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-black/30 to-black/50 hero-fade-in"})]}),e.jsx("div",{className:"absolute top-1/4 left-1/4 w-2 h-2 bg-white/30 rounded-full hero-pulse-soft"}),e.jsx("div",{className:"absolute top-1/3 right-1/3 w-1 h-1 bg-pink-400/40 rounded-full hero-bounce-subtle hero-delay-1000"}),e.jsx("div",{className:"absolute bottom-1/3 left-1/5 w-3 h-3 bg-blue-400/20 rounded-full hero-pulse-soft hero-delay-500"}),e.jsx("div",{className:"absolute top-1/2 right-1/4 w-1.5 h-1.5 bg-yellow-400/30 rounded-full hero-twinkle hero-delay-700"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/5 w-2 h-2 bg-purple-400/25 rounded-full hero-drift hero-delay-300"}),e.jsxs("div",{className:"relative z-20 w-full px-3 pt-32 xs:pt-36 sm:pt-44 md:pt-52 lg:pt-48 xl:pt-52",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12 space-y-4 max-w-6xl mx-auto",children:[e.jsx("div",{className:"hero-scale-in",children:e.jsx("h1",{className:"text-2xl xs:text-3xl sm:text-4xl lg:text-7xl font-bold text-white leading-tight transform transition-all duration-700 hover:scale-105 mt-4 md:mt-10",children:f()})}),e.jsx("div",{className:"hero-fade-in hero-delay-300",children:e.jsx("p",{className:"text-base xs:text-lg sm:text-2xl text-white max-w-2xl mx-auto leading-relaxed transition-all duration-500 hover:text-white",children:w()})}),e.jsx("div",{className:"hero-fade-in hero-delay-500",children:e.jsxs(V,{onClick:b,className:"group bg-gradient-to-r from-brand-gradient-from to-brand-gradient-to hover:brightness-95 text-white px-6 py-2 xs:px-7 xs:py-3 sm:px-8 sm:py-4 rounded-full text-base xs:text-lg sm:text-lg font-semibold shadow-2xl transition-all duration-500 transform hover:scale-105 hover:-translate-y-1 active:scale-95 active:translate-y-0",children:[e.jsx(fe,{className:"w-4 h-4 mr-1.5 sm:w-5 sm:h-5 sm:mr-2 transition-transform duration-500 group-hover:rotate-12 group-active:rotate-45"}),a==="ar"?"ابدأ الاستكشاف":a==="tr"?"Keşfetmeye Başla":"Start Exploring"]})})]}),e.jsx("div",{className:`
            w-full flex flex-col items-center
            mt-8 xs:mt-10 sm:mt-14 md:mt-16
            mb-20 xs:mb-28 sm:mb-36 md:mb-44 lg:mb-52
          `,children:e.jsxs("div",{className:`
              flex flex-col gap-3 xs:gap-4 sm:gap-5 md:flex-row md:gap-8 lg:gap-10
              max-w-full md:max-w-5xl w-full mx-auto
            `,children:[e.jsxs("div",{className:`
                flex-1 flex flex-col justify-center items-center group
                backdrop-blur-lg bg-white/20 backdrop-blur-md rounded-2xl
                p-2 xs:p-3 sm:p-4 md:p-6
                border border-white/20 transition-all duration-300
                hover:bg-white/15 hover:scale-105 hover:-translate-y-2 hover:shadow-lg
                w-full min-w-0
                max-w-xs
                mx-auto
                sm:w-44 md:w-56 md:max-w-[220px]
              `,style:{minWidth:0},children:[e.jsx(Qr,{className:"w-7 h-7 xs:w-8 xs:h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 text-white/70 mb-1.5 xs:mb-2 sm:mb-3 md:mb-4"}),e.jsx("div",{className:"text-xl xs:text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-1 xs:mb-1.5 md:mb-2",children:p(l,h)}),e.jsx("div",{className:"text-white/80 text-xs xs:text-sm sm:text-base md:text-lg font-medium",children:a==="ar"?"عقار متاح":a==="tr"?"Mevcut Mülk":"Properties"})]}),e.jsxs("div",{className:`
                flex-1 flex flex-col justify-center items-center group
                backdrop-blur-lg bg-white/20 backdrop-blur-md rounded-2xl
                p-2 xs:p-3 sm:p-4 md:p-6
                border border-white/20 transition-all duration-300
                hover:bg-white/15 hover:scale-105 hover:-translate-y-2 hover:shadow-lg
                w-full min-w-0
                max-w-xs
                mx-auto
                sm:w-44 md:w-56 md:max-w-[220px]
              `,style:{minWidth:0},children:[e.jsx(je,{className:"w-7 h-7 xs:w-8 xs:h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 text-white/70 mb-1.5 xs:mb-2 sm:mb-3 md:mb-4"}),e.jsx("div",{className:"text-xl xs:text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-1 xs:mb-1.5 md:mb-2",children:p(i,h)}),e.jsx("div",{className:"text-white/80 text-xs xs:text-sm sm:text-base md:text-lg font-medium",children:a==="ar"?"مناطق":a==="tr"?"Bölgeler":"Regions"})]}),e.jsxs("div",{className:`
                flex-1 flex flex-col justify-center items-center group
                backdrop-blur-lg bg-white/20 backdrop-blur-md rounded-2xl
                p-2 xs:p-3 sm:p-4 md:p-6
                border border-white/20 transition-all duration-300
                hover:bg-white/15 hover:scale-105 hover:-translate-y-2 hover:shadow-lg
                w-full min-w-0
                max-w-xs
                mx-auto
                sm:w-44 md:w-56 md:max-w-[220px]
              `,style:{minWidth:0},children:[e.jsx(Cr,{className:"w-7 h-7 xs:w-8 xs:h-8 sm:w-9 sm:h-9 md:w-10 md:h-10 text-white/70 mb-1.5 xs:mb-2 sm:mb-3 md:mb-4"}),e.jsx("div",{className:"text-xl xs:text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-1 xs:mb-1.5 md:mb-2",children:p(m,h)}),e.jsx("div",{className:"text-white/80 text-xs xs:text-sm sm:text-base md:text-lg font-medium",children:a==="ar"?"مشاهدات":a==="tr"?"Görüntüleme":"Views"})]})]})})]})]})},ia=({selectedCity:t,setSelectedCity:r,selectedDistrict:s,setSelectedDistrict:a,cityOptions:o,districtOptions:n})=>{const{t:l,currentLanguage:i}=A(),m=d=>{console.log("City changed to:",d),r(d),a(l("all"))},h=d=>{console.log("District changed to:",d),a(d)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-semibold text-gray-700 dark:text-neutral-100 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"📍"})," ",e.jsx("span",{children:l("location")})]}),e.jsxs(W,{value:t,onValueChange:m,children:[e.jsx(Y,{className:re("w-full bg-white dark:bg-[#181c23] text-gray-900 dark:text-neutral-100 border border-gray-300 dark:border-[#232535] outline-none rounded-lg shadow-none transition-colors",i==="ar"&&"text-right"),children:e.jsx(G,{placeholder:l("selectCity"),className:"dark:text-neutral-100"})}),e.jsx(X,{className:"bg-white dark:bg-[#181c23] text-gray-900 dark:text-neutral-100 border border-gray-200 dark:border-[#232535] shadow-lg z-50 max-h-60 overflow-y-auto rounded-xl transition-all",children:o.map(d=>e.jsx(Q,{value:d.value,className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-[#232535] dark:text-neutral-100",children:d.label},d.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-semibold text-gray-700 dark:text-neutral-100 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"📍"}),e.jsx("span",{children:l("district")})]}),e.jsxs(W,{value:s,onValueChange:h,disabled:t===l("all")||n.length<=1,children:[e.jsx(Y,{className:re("w-full bg-white dark:bg-[#181c23] text-gray-900 dark:text-neutral-100 border border-gray-300 dark:border-[#232535] outline-none rounded-lg shadow-none transition-colors",i==="ar"&&"text-right"),children:e.jsx(G,{placeholder:t===l("all")?l("selectCityFirst"):l("selectDistrict"),className:"dark:text-neutral-100"})}),e.jsx(X,{className:"bg-white dark:bg-[#181c23] text-gray-900 dark:text-neutral-100 border border-gray-200 dark:border-[#232535] shadow-lg z-50 max-h-60 overflow-y-auto rounded-xl transition-all",children:n.map(d=>e.jsx(Q,{value:d.value,className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-[#232535] dark:text-neutral-100",children:d.label},d.value))})]})]})]})},ca=({selectedType:t,setSelectedType:r,selectedLayout:s="",setSelectedLayout:a=()=>{},propertyTypes:o,showLayoutFilter:n=!0})=>{const{t:l,currentLanguage:i}=A(),m=h=>{console.log("Type changed to:",h),r(h),a(l("all"))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-semibold text-gray-700 dark:text-neutral-100 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"🏠"}),e.jsx("span",{children:l("propertyType")})]}),e.jsxs(W,{value:t,onValueChange:m,children:[e.jsx(Y,{className:re("w-full bg-white dark:bg-[#181c23] text-gray-900 dark:text-neutral-100 border border-gray-300 dark:border-[#232535] outline-none rounded-lg shadow-none transition-colors",i==="ar"&&"text-right"),children:e.jsx(G,{placeholder:l("selectType"),className:"dark:text-neutral-100"})}),e.jsx(X,{className:"bg-white dark:bg-[#181c23] text-gray-900 dark:text-neutral-100 border border-gray-200 dark:border-[#232535] shadow-lg z-50 max-h-60 overflow-y-auto rounded-xl transition-all",children:o.map(h=>e.jsx(Q,{value:h,className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-[#232535] dark:text-neutral-100",children:h},h))})]})]}),n&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-xs font-semibold text-gray-700 dark:text-neutral-100 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"🏗️"}),e.jsx("span",{children:l("propertyLayout")})]}),e.jsx(st,{selectedLayout:s,setSelectedLayout:a,selectedPropertyType:t,className:"w-full"})]})]})};var _e="Collapsible",[da,hn]=ke(_e),[ua,Re]=da(_e),ot=c.forwardRef((t,r)=>{const{__scopeCollapsible:s,open:a,defaultOpen:o,disabled:n,onOpenChange:l,...i}=t,[m=!1,h]=Ne({prop:a,defaultProp:o,onChange:l});return e.jsx(ua,{scope:s,disabled:n,contentId:Xe(),open:m,onOpenToggle:c.useCallback(()=>h(d=>!d),[h]),children:e.jsx(B.div,{"data-state":Te(m),"data-disabled":n?"":void 0,...i,ref:r})})});ot.displayName=_e;var lt="CollapsibleTrigger",it=c.forwardRef((t,r)=>{const{__scopeCollapsible:s,...a}=t,o=Re(lt,s);return e.jsx(B.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":Te(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...a,ref:r,onClick:L(t.onClick,o.onOpenToggle)})});it.displayName=lt;var De="CollapsibleContent",ct=c.forwardRef((t,r)=>{const{forceMount:s,...a}=t,o=Re(De,t.__scopeCollapsible);return e.jsx(Se,{present:s||o.open,children:({present:n})=>e.jsx(ma,{...a,ref:r,present:n})})});ct.displayName=De;var ma=c.forwardRef((t,r)=>{const{__scopeCollapsible:s,present:a,children:o,...n}=t,l=Re(De,s),[i,m]=c.useState(a),h=c.useRef(null),d=z(r,h),u=c.useRef(0),g=u.current,f=c.useRef(0),w=f.current,x=l.open||i,p=c.useRef(x),b=c.useRef();return c.useEffect(()=>{const y=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(y)},[]),Qe(()=>{const y=h.current;if(y){b.current=b.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const v=y.getBoundingClientRect();u.current=v.height,f.current=v.width,p.current||(y.style.transitionDuration=b.current.transitionDuration,y.style.animationName=b.current.animationName),m(a)}},[l.open,a]),e.jsx(B.div,{"data-state":Te(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!x,...n,ref:d,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...t.style},children:x&&o})});function Te(t){return t?"open":"closed"}var ha=ot;const ga=ha,xa=it,fa=ct;var dt=["PageUp","PageDown"],ut=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],mt={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},te="Slider",[pe,pa,ba]=Gt(te),[ht,gn]=ke(te,[ba]),[va,de]=ht(te),gt=c.forwardRef((t,r)=>{const{name:s,min:a=0,max:o=100,step:n=1,orientation:l="horizontal",disabled:i=!1,minStepsBetweenThumbs:m=0,defaultValue:h=[a],value:d,onValueChange:u=()=>{},onValueCommit:g=()=>{},inverted:f=!1,...w}=t,x=c.useRef(new Set),p=c.useRef(0),y=l==="horizontal"?ya:wa,[v=[],S]=Ne({prop:d,defaultProp:h,onChange:j=>{var P;(P=[...x.current][p.current])==null||P.focus(),u(j)}}),N=c.useRef(v);function R(j){const _=Ca(v,j);k(j,_)}function C(j){k(j,p.current)}function D(){const j=N.current[p.current];v[p.current]!==j&&g(v)}function k(j,_,{commit:P}={commit:!1}){const T=Ra(n),E=Da(Math.round((j-a)/n)*n+a,T),M=at(E,[a,o]);S(($=[])=>{const O=Na($,M,_);if(_a(O,m*n)){p.current=O.indexOf(M);const I=String(O)!==String($);return I&&P&&g(O),I?O:$}else return $})}return e.jsx(va,{scope:t.__scopeSlider,name:s,disabled:i,min:a,max:o,valueIndexToChangeRef:p,thumbs:x.current,values:v,orientation:l,children:e.jsx(pe.Provider,{scope:t.__scopeSlider,children:e.jsx(pe.Slot,{scope:t.__scopeSlider,children:e.jsx(y,{"aria-disabled":i,"data-disabled":i?"":void 0,...w,ref:r,onPointerDown:L(w.onPointerDown,()=>{i||(N.current=v)}),min:a,max:o,inverted:f,onSlideStart:i?void 0:R,onSlideMove:i?void 0:C,onSlideEnd:i?void 0:D,onHomeKeyDown:()=>!i&&k(a,0,{commit:!0}),onEndKeyDown:()=>!i&&k(o,v.length-1,{commit:!0}),onStepKeyDown:({event:j,direction:_})=>{if(!i){const E=dt.includes(j.key)||j.shiftKey&&ut.includes(j.key)?10:1,M=p.current,$=v[M],O=n*E*_;k($+O,M,{commit:!0})}}})})})})});gt.displayName=te;var[xt,ft]=ht(te,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ya=c.forwardRef((t,r)=>{const{min:s,max:a,dir:o,inverted:n,onSlideStart:l,onSlideMove:i,onSlideEnd:m,onStepKeyDown:h,...d}=t,[u,g]=c.useState(null),f=z(r,v=>g(v)),w=c.useRef(),x=Xt(o),p=x==="ltr",b=p&&!n||!p&&n;function y(v){const S=w.current||u.getBoundingClientRect(),N=[0,S.width],C=Ae(N,b?[s,a]:[a,s]);return w.current=S,C(v-S.left)}return e.jsx(xt,{scope:t.__scopeSlider,startEdge:b?"left":"right",endEdge:b?"right":"left",direction:b?1:-1,size:"width",children:e.jsx(pt,{dir:x,"data-orientation":"horizontal",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const S=y(v.clientX);l==null||l(S)},onSlideMove:v=>{const S=y(v.clientX);i==null||i(S)},onSlideEnd:()=>{w.current=void 0,m==null||m()},onStepKeyDown:v=>{const N=mt[b?"from-left":"from-right"].includes(v.key);h==null||h({event:v,direction:N?-1:1})}})})}),wa=c.forwardRef((t,r)=>{const{min:s,max:a,inverted:o,onSlideStart:n,onSlideMove:l,onSlideEnd:i,onStepKeyDown:m,...h}=t,d=c.useRef(null),u=z(r,d),g=c.useRef(),f=!o;function w(x){const p=g.current||d.current.getBoundingClientRect(),b=[0,p.height],v=Ae(b,f?[a,s]:[s,a]);return g.current=p,v(x-p.top)}return e.jsx(xt,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:e.jsx(pt,{"data-orientation":"vertical",...h,ref:u,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const p=w(x.clientY);n==null||n(p)},onSlideMove:x=>{const p=w(x.clientY);l==null||l(p)},onSlideEnd:()=>{g.current=void 0,i==null||i()},onStepKeyDown:x=>{const b=mt[f?"from-bottom":"from-top"].includes(x.key);m==null||m({event:x,direction:b?-1:1})}})})}),pt=c.forwardRef((t,r)=>{const{__scopeSlider:s,onSlideStart:a,onSlideMove:o,onSlideEnd:n,onHomeKeyDown:l,onEndKeyDown:i,onStepKeyDown:m,...h}=t,d=de(te,s);return e.jsx(B.span,{...h,ref:r,onKeyDown:L(t.onKeyDown,u=>{u.key==="Home"?(l(u),u.preventDefault()):u.key==="End"?(i(u),u.preventDefault()):dt.concat(ut).includes(u.key)&&(m(u),u.preventDefault())}),onPointerDown:L(t.onPointerDown,u=>{const g=u.target;g.setPointerCapture(u.pointerId),u.preventDefault(),d.thumbs.has(g)?g.focus():a(u)}),onPointerMove:L(t.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&o(u)}),onPointerUp:L(t.onPointerUp,u=>{const g=u.target;g.hasPointerCapture(u.pointerId)&&(g.releasePointerCapture(u.pointerId),n(u))})})}),bt="SliderTrack",vt=c.forwardRef((t,r)=>{const{__scopeSlider:s,...a}=t,o=de(bt,s);return e.jsx(B.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...a,ref:r})});vt.displayName=bt;var be="SliderRange",yt=c.forwardRef((t,r)=>{const{__scopeSlider:s,...a}=t,o=de(be,s),n=ft(be,s),l=c.useRef(null),i=z(r,l),m=o.values.length,h=o.values.map(g=>jt(g,o.min,o.max)),d=m>1?Math.min(...h):0,u=100-Math.max(...h);return e.jsx(B.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...a,ref:i,style:{...t.style,[n.startEdge]:d+"%",[n.endEdge]:u+"%"}})});yt.displayName=be;var ve="SliderThumb",wt=c.forwardRef((t,r)=>{const s=pa(t.__scopeSlider),[a,o]=c.useState(null),n=z(r,i=>o(i)),l=c.useMemo(()=>a?s().findIndex(i=>i.ref.current===a):-1,[s,a]);return e.jsx(ja,{...t,ref:n,index:l})}),ja=c.forwardRef((t,r)=>{const{__scopeSlider:s,index:a,name:o,...n}=t,l=de(ve,s),i=ft(ve,s),[m,h]=c.useState(null),d=z(r,y=>h(y)),u=m?!!m.closest("form"):!0,g=Qt(m),f=l.values[a],w=f===void 0?0:jt(f,l.min,l.max),x=Sa(a,l.values.length),p=g==null?void 0:g[i.size],b=p?Pa(p,w,i.direction):0;return c.useEffect(()=>{if(m)return l.thumbs.add(m),()=>{l.thumbs.delete(m)}},[m,l.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[i.startEdge]:`calc(${w}% + ${b}px)`},children:[e.jsx(pe.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(B.span,{role:"slider","aria-label":t["aria-label"]||x,"aria-valuemin":l.min,"aria-valuenow":f,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...n,ref:d,style:f===void 0?{display:"none"}:t.style,onFocus:L(t.onFocus,()=>{l.valueIndexToChangeRef.current=a})})}),u&&e.jsx(ka,{name:o??(l.name?l.name+(l.values.length>1?"[]":""):void 0),value:f},a)]})});wt.displayName=ve;var ka=t=>{const{value:r,...s}=t,a=c.useRef(null),o=Tr(r);return c.useEffect(()=>{const n=a.current,l=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==r&&m){const h=new Event("input",{bubbles:!0});m.call(n,r),n.dispatchEvent(h)}},[o,r]),e.jsx("input",{style:{display:"none"},...s,ref:a,defaultValue:r})};function Na(t=[],r,s){const a=[...t];return a[s]=r,a.sort((o,n)=>o-n)}function jt(t,r,s){const n=100/(s-r)*(t-r);return at(n,[0,100])}function Sa(t,r){return r>2?`Value ${t+1} of ${r}`:r===2?["Minimum","Maximum"][t]:void 0}function Ca(t,r){if(t.length===1)return 0;const s=t.map(o=>Math.abs(o-r)),a=Math.min(...s);return s.indexOf(a)}function Pa(t,r,s){const a=t/2,n=Ae([0,50],[0,a]);return(a-n(r)*s)*s}function Ea(t){return t.slice(0,-1).map((r,s)=>t[s+1]-r)}function _a(t,r){if(r>0){const s=Ea(t);return Math.min(...s)>=r}return!0}function Ae(t,r){return s=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const a=(r[1]-r[0])/(t[1]-t[0]);return r[0]+a*(s-t[0])}}function Ra(t){return(String(t).split(".")[1]||"").length}function Da(t,r){const s=Math.pow(10,r);return Math.round(t*s)/s}var kt=gt,Ta=vt,Aa=yt,He=wt;const Nt=c.forwardRef(({className:t,...r},s)=>e.jsxs(kt,{ref:s,className:re("relative flex w-full touch-none select-none items-center group",t),...r,children:[e.jsx(Ta,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-gray-200 group-hover:bg-gray-300 transition-colors",children:e.jsx(Aa,{className:"absolute h-full bg-gradient-to-r from-brand-gradient-from to-brand-gradient-to rounded-full transition-all duration-200"})}),e.jsx(He,{className:"block h-5 w-5 rounded-full border-2 border-white bg-gradient-to-r from-brand-gradient-from to-brand-gradient-to shadow-lg ring-0 ring-brand-accent/20 transition-all duration-200 focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-brand-accent/20 disabled:pointer-events-none disabled:opacity-50 hover:scale-110 hover:shadow-xl cursor-pointer"}),r.value&&r.value.length>1&&e.jsx(He,{className:"block h-5 w-5 rounded-full border-2 border-white bg-gradient-to-r from-brand-gradient-from to-brand-gradient-to shadow-lg ring-0 ring-brand-accent/20 transition-all duration-200 focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-brand-accent/20 disabled:pointer-events-none disabled:opacity-50 hover:scale-110 hover:shadow-xl cursor-pointer"})]}));Nt.displayName=kt.displayName;const Me=({priceRange:t,setPriceRange:r,dynamicPriceRange:s,properties:a,showQuickButtons:o=!1,darkMode:n})=>{const{currentLanguage:l}=A(),{theme:i,resolvedTheme:m}=ie(),h=f=>f>=1e3?`€${(f/1e3).toFixed(0)}K`:`€${f}`,d=f=>{r(f)},u=n!==void 0?n:m==="dark"||i==="dark",g=f=>u?f?"bg-brand-accent text-white border-brand-accent hover:bg-brand-accent/90 shadow-lg":"bg-gray-800 text-gray-200 border border-gray-700 hover:bg-gray-700 hover:border-gray-600 transition-all duration-200":f?"bg-brand-accent text-white border border-brand-accent shadow-md hover:bg-brand-accent/90":"bg-white text-gray-900 border border-gray-200 hover:border-brand-accent hover:text-brand-accent hover:shadow-md transition-all duration-200";return e.jsxs("div",{className:`
      space-y-4 
      ${u?"bg-gray-900 border border-gray-800":"bg-white border border-gray-200 shadow-2xl"} 
      p-4 rounded-2xl
      transition-all duration-200
      `,style:{boxShadow:u?"0 12px 34px rgba(0, 0, 0, 0.3)":"0 12px 34px rgba(44, 50, 129, 0.07)"},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-base font-semibold text-brand-accent",children:[h(t[0])," - ",h(t[1])]}),u&&e.jsxs("div",{className:"text-xs font-semibold text-brand-accent hidden md:block",children:[h(t[0])," - ",h(t[1])]})]}),e.jsx("div",{className:"relative px-2 py-3",children:e.jsx(Nt,{value:t,onValueChange:d,max:s.max,min:s.min,step:Math.max(1,Math.floor(s.max/100)),className:"w-full"})}),e.jsxs("div",{className:`flex justify-between text-xs px-2 ${u?"text-gray-300":"text-gray-500"}`,children:[e.jsx("span",{children:h(s.min)}),o&&e.jsxs("span",{className:"text-center text-gray-400",children:[a.length," ",l==="ar"?"عقار":l==="tr"?"mülk":"properties"]}),e.jsx("span",{children:h(s.max)})]}),o&&e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[{label:l==="ar"?"الكل":l==="tr"?"Tümü":"All",value:[s.min,s.max]},{label:"< 1K",value:[s.min,Math.min(1e3,s.max)]},{label:"1K-3K",value:[1e3,Math.min(3e3,s.max)]},{label:"3K+",value:[3e3,s.max]}].map((f,w)=>{const x=t[0]===f.value[0]&&t[1]===f.value[1];return e.jsx(V,{variant:"outline",size:"sm",className:`
                  text-xs rounded-xl h-10
                  ${g(x)}
                `,onClick:()=>d(f.value),type:"button",children:f.label},w)})})]})},Ma=({priceRange:t,setPriceRange:r,dynamicPriceRange:s,properties:a})=>{const{t:o}=A(),{theme:n,resolvedTheme:l}=ie(),[i,m]=c.useState(!1),h=l==="dark"||n==="dark",d=u=>u>=1e3?`€${(u/1e3).toFixed(0)}K`:`€${u}`;return e.jsxs(ga,{open:i,onOpenChange:m,children:[e.jsx(xa,{asChild:!0,children:e.jsxs(V,{variant:"outline",className:`
            w-full justify-between
            bg-white dark:bg-[#181c23]
            text-gray-900 dark:text-white
            border border-gray-300 dark:border-[#232535] 
            rounded-lg
            shadow-none
            transition-colors
            hover:bg-gray-100
            dark:hover:bg-[#181c23]
            focus:bg-gray-100
            dark:focus:bg-[#181c23]
            active:bg-gray-200
            dark:active:bg-[#232535]
          `,children:[e.jsxs("span",{className:"flex items-center gap-2",children:["💰 ",o("priceRange")]}),e.jsx(Ar,{className:`h-4 w-4 transition-transform ${i?"rotate-180":""}`})]})}),e.jsx(fa,{className:"space-y-4 mt-4",children:e.jsxs("div",{className:`
          space-y-2 
          px-1 py-1
          rounded-xl
          bg-white dark:bg-[#181c23]
          border border-gray-200 dark:border-[#232535]
          shadow-lg
        `,children:[e.jsxs("label",{className:"text-xs font-semibold text-gray-700 dark:text-neutral-200 flex items-center gap-2 mt-2",children:["💰 ",o("priceRange")]}),e.jsxs("div",{className:"px-3 py-3",children:[e.jsxs("div",{className:"text-center text-sm font-medium text-gray-800 dark:text-white",children:[d(t[0])," - ",d(t[1])]}),e.jsx(Me,{priceRange:t,setPriceRange:r,dynamicPriceRange:s,properties:a,showQuickButtons:!0,darkMode:h})]})]})})]})},La=({onSearch:t})=>{const{currentLanguage:r}=A();return e.jsxs(V,{onClick:t,className:"w-full text-white py-3 font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:brightness-95",style:{background:"linear-gradient(to right, var(--brand-gradient-from-color, #ec489a), var(--brand-gradient-to-color, #f43f5e))"},children:[e.jsx(Ce,{className:`w-5 h-5 ${r==="ar"?"":"mr-2"}`}),r==="ar"?"بحث":r==="tr"?"Ara":"Search"]})},$a=({selectedCity:t,setSelectedCity:r,selectedDistrict:s,setSelectedDistrict:a,selectedType:o,setSelectedType:n,selectedLayout:l="",setSelectedLayout:i=()=>{},priceRange:m,setPriceRange:h,cityOptions:d,districtOptions:u,propertyTypes:g,dynamicPriceRange:f,properties:w,onSearch:x,showLayoutFilter:p=!0})=>e.jsxs("div",{className:"lg:hidden space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx(ia,{selectedCity:t,setSelectedCity:r,selectedDistrict:s,setSelectedDistrict:a,cityOptions:d,districtOptions:u}),e.jsx(ca,{selectedType:o,setSelectedType:n,selectedLayout:l,setSelectedLayout:i,propertyTypes:g,showLayoutFilter:p})]}),e.jsx(Ma,{priceRange:m,setPriceRange:h,dynamicPriceRange:f,properties:w}),e.jsx(La,{onSearch:x})]}),Oa=({selectedCity:t,onCityChange:r,cityOptions:s})=>{const{t:a}=A();return e.jsx("div",{className:"group cursor-pointer",children:e.jsxs(W,{value:t,onValueChange:r,children:[e.jsx(Y,{className:"w-full bg-transparent border-none outline-none p-4 hover:bg-gray-50 dark:hover:bg-[#222636] rounded-full transition-colors cursor-pointer focus:ring-0 h-auto min-h-[80px]",children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse w-full",children:[e.jsx(je,{className:"w-5 h-5 text-gray-400 group-hover:text-pink-500 transition-colors flex-shrink-0"}),e.jsxs("div",{className:"flex-1 text-left rtl:text-right",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700 dark:text-white block",children:a("location")}),e.jsx(G,{placeholder:a("selectCity"),className:"text-gray-800 dark:text-white text-sm font-medium mt-1 block cursor-pointer"})]})]})}),e.jsx(X,{className:"bg-white dark:bg-[#111726] border dark:border-[#232535] shadow-lg z-50 max-h-60 overflow-y-auto rounded-xl transition-all",children:s.map(o=>e.jsx(Q,{value:o.value,className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-[#232535] dark:text-white",children:o.label},o.value))})]})})},Fa=({selectedCity:t,selectedDistrict:r,onDistrictChange:s,districtOptions:a})=>{const{t:o}=A();return e.jsx("div",{className:"group cursor-pointer lg:border-l border-gray-200",children:e.jsxs(W,{value:r,onValueChange:s,disabled:t===o("all")||a.length<=1,children:[e.jsx(Y,{className:"w-full bg-transparent border-none outline-none p-4 hover:bg-gray-50 dark:hover:bg-[#222636] rounded-full transition-colors cursor-pointer focus:ring-0 disabled:opacity-50 h-auto min-h-[80px]",children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse w-full",children:[e.jsx(je,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-500 transition-colors flex-shrink-0"}),e.jsxs("div",{className:"flex-1 text-left rtl:text-right",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700 dark:text-white block",children:o("district")}),e.jsx(G,{placeholder:t===o("all")?o("selectCityFirst"):o("selectDistrict"),className:"text-gray-800 dark:text-white text-sm font-medium mt-1 block cursor-pointer"})]})]})}),e.jsx(X,{className:"bg-white dark:bg-[#111726] border dark:border-[#232535] shadow-lg z-50 max-h-60 overflow-y-auto rounded-xl transition-all",children:a.map(n=>e.jsx(Q,{value:n.value,className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-[#232535] dark:text-white",children:n.label},n.value))})]})})},Ba=({selectedType:t,onTypeChange:r,propertyTypes:s})=>{const{t:a}=A();return e.jsx("div",{className:"group cursor-pointer lg:border-l border-gray-200",children:e.jsxs(W,{value:t,onValueChange:r,children:[e.jsx(Y,{className:"w-full bg-transparent border-none outline-none p-4 hover:bg-gray-50 dark:hover:bg-[#222636] rounded-full transition-colors cursor-pointer focus:ring-0 h-auto min-h-[80px]",children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse w-full",children:[e.jsx("div",{className:"w-5 h-5 text-gray-400 group-hover:text-pink-500 transition-colors flex-shrink-0",children:"🏠"}),e.jsxs("div",{className:"flex-1 text-left rtl:text-right",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700 dark:text-white block",children:a("propertyType")}),e.jsx(G,{placeholder:a("selectType"),className:"text-gray-800 dark:text-white text-sm font-medium mt-1 block cursor-pointer"})]})]})}),e.jsx(X,{className:"bg-white dark:bg-[#111726] border dark:border-[#232535] shadow-lg z-50 max-h-60 overflow-y-auto rounded-xl transition-all",children:s.map(o=>e.jsx(Q,{value:o,className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-[#232535] dark:text-white",children:o},o))})]})})};var Ia="DismissableLayer",ye="dismissableLayer.update",za="dismissableLayer.pointerDownOutside",Va="dismissableLayer.focusOutside",Ue,St=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ct=c.forwardRef((t,r)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:n,onInteractOutside:l,onDismiss:i,...m}=t,h=c.useContext(St),[d,u]=c.useState(null),g=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=c.useState({}),w=z(r,C=>u(C)),x=Array.from(h.layers),[p]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),b=x.indexOf(p),y=d?x.indexOf(d):-1,v=h.layersWithOutsidePointerEventsDisabled.size>0,S=y>=b,N=qa(C=>{const D=C.target,k=[...h.branches].some(j=>j.contains(D));!S||k||(o==null||o(C),l==null||l(C),C.defaultPrevented||i==null||i())},g),R=Ka(C=>{const D=C.target;[...h.branches].some(j=>j.contains(D))||(n==null||n(C),l==null||l(C),C.defaultPrevented||i==null||i())},g);return Zt(C=>{y===h.layers.size-1&&(a==null||a(C),!C.defaultPrevented&&i&&(C.preventDefault(),i()))},g),c.useEffect(()=>{if(d)return s&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(Ue=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(d)),h.layers.add(d),qe(),()=>{s&&h.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=Ue)}},[d,g,s,h]),c.useEffect(()=>()=>{d&&(h.layers.delete(d),h.layersWithOutsidePointerEventsDisabled.delete(d),qe())},[d,h]),c.useEffect(()=>{const C=()=>f({});return document.addEventListener(ye,C),()=>document.removeEventListener(ye,C)},[]),e.jsx(B.div,{...m,ref:w,style:{pointerEvents:v?S?"auto":"none":void 0,...t.style},onFocusCapture:L(t.onFocusCapture,R.onFocusCapture),onBlurCapture:L(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:L(t.onPointerDownCapture,N.onPointerDownCapture)})});Ct.displayName=Ia;var Ha="DismissableLayerBranch",Ua=c.forwardRef((t,r)=>{const s=c.useContext(St),a=c.useRef(null),o=z(r,a);return c.useEffect(()=>{const n=a.current;if(n)return s.branches.add(n),()=>{s.branches.delete(n)}},[s.branches]),e.jsx(B.div,{...t,ref:o})});Ua.displayName=Ha;function qa(t,r=globalThis==null?void 0:globalThis.document){const s=Ze(t),a=c.useRef(!1),o=c.useRef(()=>{});return c.useEffect(()=>{const n=i=>{if(i.target&&!a.current){let m=function(){Pt(za,s,h,{discrete:!0})};const h={originalEvent:i};i.pointerType==="touch"?(r.removeEventListener("click",o.current),o.current=m,r.addEventListener("click",o.current,{once:!0})):m()}else r.removeEventListener("click",o.current);a.current=!1},l=window.setTimeout(()=>{r.addEventListener("pointerdown",n)},0);return()=>{window.clearTimeout(l),r.removeEventListener("pointerdown",n),r.removeEventListener("click",o.current)}},[r,s]),{onPointerDownCapture:()=>a.current=!0}}function Ka(t,r=globalThis==null?void 0:globalThis.document){const s=Ze(t),a=c.useRef(!1);return c.useEffect(()=>{const o=n=>{n.target&&!a.current&&Pt(Va,s,{originalEvent:n},{discrete:!1})};return r.addEventListener("focusin",o),()=>r.removeEventListener("focusin",o)},[r,s]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function qe(){const t=new CustomEvent(ye);document.dispatchEvent(t)}function Pt(t,r,s,{discrete:a}){const o=s.originalEvent.target,n=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});r&&o.addEventListener(t,r,{once:!0}),a?Jt(o,n):o.dispatchEvent(n)}var he=0;function Wa(){c.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Ke()),document.body.insertAdjacentElement("beforeend",t[1]??Ke()),he++,()=>{he===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),he--}},[])}function Ke(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var Ya="Portal",Et=c.forwardRef((t,r)=>{var i;const{container:s,...a}=t,[o,n]=c.useState(!1);Qe(()=>n(!0),[]);const l=s||o&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return l?er.createPortal(e.jsx(B.div,{...a,ref:r}),l):null});Et.displayName=Ya;var _t=tr(),ge=function(){},ue=c.forwardRef(function(t,r){var s=c.useRef(null),a=c.useState({onScrollCapture:ge,onWheelCapture:ge,onTouchMoveCapture:ge}),o=a[0],n=a[1],l=t.forwardProps,i=t.children,m=t.className,h=t.removeScrollBar,d=t.enabled,u=t.shards,g=t.sideCar,f=t.noIsolation,w=t.inert,x=t.allowPinchZoom,p=t.as,b=p===void 0?"div":p,y=t.gapMode,v=rr(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=g,N=ar([s,r]),R=K(K({},v),o);return c.createElement(c.Fragment,null,d&&c.createElement(S,{sideCar:_t,removeScrollBar:h,shards:u,noIsolation:f,inert:w,setCallbacks:n,allowPinchZoom:!!x,lockRef:s,gapMode:y}),l?c.cloneElement(c.Children.only(i),K(K({},R),{ref:N})):c.createElement(b,K({},R,{className:m,ref:N}),i))});ue.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ue.classNames={fullWidth:sr,zeroRight:nr};var we=!1;if(typeof window<"u")try{var ne=Object.defineProperty({},"passive",{get:function(){return we=!0,!0}});window.addEventListener("test",ne,ne),window.removeEventListener("test",ne,ne)}catch{we=!1}var U=we?{passive:!1}:!1,Ga=function(t){return t.tagName==="TEXTAREA"},Rt=function(t,r){var s=window.getComputedStyle(t);return s[r]!=="hidden"&&!(s.overflowY===s.overflowX&&!Ga(t)&&s[r]==="visible")},Xa=function(t){return Rt(t,"overflowY")},Qa=function(t){return Rt(t,"overflowX")},We=function(t,r){var s=r.ownerDocument,a=r;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var o=Dt(t,a);if(o){var n=Tt(t,a),l=n[1],i=n[2];if(l>i)return!0}a=a.parentNode}while(a&&a!==s.body);return!1},Za=function(t){var r=t.scrollTop,s=t.scrollHeight,a=t.clientHeight;return[r,s,a]},Ja=function(t){var r=t.scrollLeft,s=t.scrollWidth,a=t.clientWidth;return[r,s,a]},Dt=function(t,r){return t==="v"?Xa(r):Qa(r)},Tt=function(t,r){return t==="v"?Za(r):Ja(r)},es=function(t,r){return t==="h"&&r==="rtl"?-1:1},ts=function(t,r,s,a,o){var n=es(t,window.getComputedStyle(r).direction),l=n*a,i=s.target,m=r.contains(i),h=!1,d=l>0,u=0,g=0;do{var f=Tt(t,i),w=f[0],x=f[1],p=f[2],b=x-p-n*w;(w||b)&&Dt(t,i)&&(u+=b,g+=w),i instanceof ShadowRoot?i=i.host:i=i.parentNode}while(!m&&i!==document.body||m&&(r.contains(i)||r===i));return(d&&(Math.abs(u)<1||!o)||!d&&(Math.abs(g)<1||!o))&&(h=!0),h},oe=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Ye=function(t){return[t.deltaX,t.deltaY]},Ge=function(t){return t&&"current"in t?t.current:t},rs=function(t,r){return t[0]===r[0]&&t[1]===r[1]},as=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},ss=0,q=[];function ns(t){var r=c.useRef([]),s=c.useRef([0,0]),a=c.useRef(),o=c.useState(ss++)[0],n=c.useState(or)[0],l=c.useRef(t);c.useEffect(function(){l.current=t},[t]),c.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var x=lr([t.lockRef.current],(t.shards||[]).map(Ge),!0).filter(Boolean);return x.forEach(function(p){return p.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),x.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var i=c.useCallback(function(x,p){if("touches"in x&&x.touches.length===2)return!l.current.allowPinchZoom;var b=oe(x),y=s.current,v="deltaX"in x?x.deltaX:y[0]-b[0],S="deltaY"in x?x.deltaY:y[1]-b[1],N,R=x.target,C=Math.abs(v)>Math.abs(S)?"h":"v";if("touches"in x&&C==="h"&&R.type==="range")return!1;var D=We(C,R);if(!D)return!0;if(D?N=C:(N=C==="v"?"h":"v",D=We(C,R)),!D)return!1;if(!a.current&&"changedTouches"in x&&(v||S)&&(a.current=N),!N)return!0;var k=a.current||N;return ts(k,p,x,k==="h"?v:S,!0)},[]),m=c.useCallback(function(x){var p=x;if(!(!q.length||q[q.length-1]!==n)){var b="deltaY"in p?Ye(p):oe(p),y=r.current.filter(function(N){return N.name===p.type&&(N.target===p.target||p.target===N.shadowParent)&&rs(N.delta,b)})[0];if(y&&y.should){p.cancelable&&p.preventDefault();return}if(!y){var v=(l.current.shards||[]).map(Ge).filter(Boolean).filter(function(N){return N.contains(p.target)}),S=v.length>0?i(p,v[0]):!l.current.noIsolation;S&&p.cancelable&&p.preventDefault()}}},[]),h=c.useCallback(function(x,p,b,y){var v={name:x,delta:p,target:b,should:y,shadowParent:os(b)};r.current.push(v),setTimeout(function(){r.current=r.current.filter(function(S){return S!==v})},1)},[]),d=c.useCallback(function(x){s.current=oe(x),a.current=void 0},[]),u=c.useCallback(function(x){h(x.type,Ye(x),x.target,i(x,t.lockRef.current))},[]),g=c.useCallback(function(x){h(x.type,oe(x),x.target,i(x,t.lockRef.current))},[]);c.useEffect(function(){return q.push(n),t.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:g}),document.addEventListener("wheel",m,U),document.addEventListener("touchmove",m,U),document.addEventListener("touchstart",d,U),function(){q=q.filter(function(x){return x!==n}),document.removeEventListener("wheel",m,U),document.removeEventListener("touchmove",m,U),document.removeEventListener("touchstart",d,U)}},[]);var f=t.removeScrollBar,w=t.inert;return c.createElement(c.Fragment,null,w?c.createElement(n,{styles:as(o)}):null,f?c.createElement(ir,{gapMode:t.gapMode}):null)}function os(t){for(var r=null;t!==null;)t instanceof ShadowRoot&&(r=t.host,t=t.host),t=t.parentNode;return r}const ls=cr(_t,ns);var At=c.forwardRef(function(t,r){return c.createElement(ue,K({},t,{ref:r,sideCar:ls}))});At.classNames=ue.classNames;var Le="Popover",[Mt,xn]=ke(Le,[Je]),ae=Je(),[is,H]=Mt(Le),Lt=t=>{const{__scopePopover:r,children:s,open:a,defaultOpen:o,onOpenChange:n,modal:l=!1}=t,i=ae(r),m=c.useRef(null),[h,d]=c.useState(!1),[u=!1,g]=Ne({prop:a,defaultProp:o,onChange:n});return e.jsx(xr,{...i,children:e.jsx(is,{scope:r,contentId:Xe(),triggerRef:m,open:u,onOpenChange:g,onOpenToggle:c.useCallback(()=>g(f=>!f),[g]),hasCustomAnchor:h,onCustomAnchorAdd:c.useCallback(()=>d(!0),[]),onCustomAnchorRemove:c.useCallback(()=>d(!1),[]),modal:l,children:s})})};Lt.displayName=Le;var $t="PopoverAnchor",cs=c.forwardRef((t,r)=>{const{__scopePopover:s,...a}=t,o=H($t,s),n=ae(s),{onCustomAnchorAdd:l,onCustomAnchorRemove:i}=o;return c.useEffect(()=>(l(),()=>i()),[l,i]),e.jsx(et,{...n,...a,ref:r})});cs.displayName=$t;var Ot="PopoverTrigger",Ft=c.forwardRef((t,r)=>{const{__scopePopover:s,...a}=t,o=H(Ot,s),n=ae(s),l=z(r,o.triggerRef),i=e.jsx(B.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Ht(o.open),...a,ref:l,onClick:L(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?i:e.jsx(et,{asChild:!0,...n,children:i})});Ft.displayName=Ot;var $e="PopoverPortal",[ds,us]=Mt($e,{forceMount:void 0}),Bt=t=>{const{__scopePopover:r,forceMount:s,children:a,container:o}=t,n=H($e,r);return e.jsx(ds,{scope:r,forceMount:s,children:e.jsx(Se,{present:s||n.open,children:e.jsx(Et,{asChild:!0,container:o,children:a})})})};Bt.displayName=$e;var J="PopoverContent",It=c.forwardRef((t,r)=>{const s=us(J,t.__scopePopover),{forceMount:a=s.forceMount,...o}=t,n=H(J,t.__scopePopover);return e.jsx(Se,{present:a||n.open,children:n.modal?e.jsx(ms,{...o,ref:r}):e.jsx(hs,{...o,ref:r})})});It.displayName=J;var ms=c.forwardRef((t,r)=>{const s=H(J,t.__scopePopover),a=c.useRef(null),o=z(r,a),n=c.useRef(!1);return c.useEffect(()=>{const l=a.current;if(l)return dr(l)},[]),e.jsx(At,{as:ur,allowPinchZoom:!0,children:e.jsx(zt,{...t,ref:o,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:L(t.onCloseAutoFocus,l=>{var i;l.preventDefault(),n.current||(i=s.triggerRef.current)==null||i.focus()}),onPointerDownOutside:L(t.onPointerDownOutside,l=>{const i=l.detail.originalEvent,m=i.button===0&&i.ctrlKey===!0,h=i.button===2||m;n.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:L(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),hs=c.forwardRef((t,r)=>{const s=H(J,t.__scopePopover),a=c.useRef(!1),o=c.useRef(!1);return e.jsx(zt,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var l,i;(l=t.onCloseAutoFocus)==null||l.call(t,n),n.defaultPrevented||(a.current||(i=s.triggerRef.current)==null||i.focus(),n.preventDefault()),a.current=!1,o.current=!1},onInteractOutside:n=>{var m,h;(m=t.onInteractOutside)==null||m.call(t,n),n.defaultPrevented||(a.current=!0,n.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=n.target;((h=s.triggerRef.current)==null?void 0:h.contains(l))&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&o.current&&n.preventDefault()}})}),zt=c.forwardRef((t,r)=>{const{__scopePopover:s,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:n,disableOutsidePointerEvents:l,onEscapeKeyDown:i,onPointerDownOutside:m,onFocusOutside:h,onInteractOutside:d,...u}=t,g=H(J,s),f=ae(s);return Wa(),e.jsx(mr,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:o,onUnmountAutoFocus:n,children:e.jsx(Ct,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:d,onEscapeKeyDown:i,onPointerDownOutside:m,onFocusOutside:h,onDismiss:()=>g.onOpenChange(!1),children:e.jsx(hr,{"data-state":Ht(g.open),role:"dialog",id:g.contentId,...f,...u,ref:r,style:{...u.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Vt="PopoverClose",gs=c.forwardRef((t,r)=>{const{__scopePopover:s,...a}=t,o=H(Vt,s);return e.jsx(B.button,{type:"button",...a,ref:r,onClick:L(t.onClick,()=>o.onOpenChange(!1))})});gs.displayName=Vt;var xs="PopoverArrow",fs=c.forwardRef((t,r)=>{const{__scopePopover:s,...a}=t,o=ae(s);return e.jsx(gr,{...o,...a,ref:r})});fs.displayName=xs;function Ht(t){return t?"open":"closed"}var ps=Lt,bs=Ft,vs=Bt,Ut=It;const Oe=ps,Fe=bs,me=c.forwardRef(({className:t,align:r="center",sideOffset:s=4,...a},o)=>e.jsx(vs,{children:e.jsx(Ut,{ref:o,align:r,sideOffset:s,className:re("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...a})}));me.displayName=Ut.displayName;const ys=({priceRange:t,setPriceRange:r,dynamicPriceRange:s,properties:a})=>{const{t:o}=A(),{theme:n,resolvedTheme:l}=ie(),i=l==="dark"||n==="dark",m=h=>h>=1e3?`€${(h/1e3).toFixed(0)}K`:`€${h}`;return e.jsx("div",{className:"group cursor-pointer lg:border-l border-gray-200 dark:border-gray-700",children:e.jsxs(Oe,{children:[e.jsx(Fe,{className:"w-full bg-transparent border-none outline-none p-4 hover:bg-gray-50 dark:hover:bg-[#222636] rounded-full transition-colors cursor-pointer focus:ring-0 h-auto min-h-[80px]",children:e.jsxs("div",{className:"flex items-center space-x-3 rtl:space-x-reverse w-full",children:[e.jsx("div",{className:"w-5 h-5 text-gray-400 group-hover:text-brand-accent transition-colors flex-shrink-0",children:"💰"}),e.jsxs("div",{className:"flex-1 text-left rtl:text-right",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-700 dark:text-neutral-100 block",children:o("priceRange")}),e.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-white mt-1",children:[m(t[0])," - ",m(t[1])]})]})]})}),e.jsx(me,{className:`
            w-80 p-6 rounded-2xl shadow-2xl border-0 transition-colors z-30
            ${i?"bg-gray-900 border border-gray-800":"bg-white border border-gray-200"}
          `,align:"center",style:{boxShadow:i?"0 12px 34px rgba(0, 0, 0, 0.3)":"0 12px 34px rgba(44, 50, 129, 0.07)"},children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`
              font-semibold text-lg text-center
              ${i?"text-white":"text-gray-800"}
            `,children:o("priceRange")}),e.jsx(Me,{priceRange:t,setPriceRange:r,dynamicPriceRange:s,properties:a,showQuickButtons:!0,darkMode:i})]})})]})})},ws=({onSearch:t})=>{const{currentLanguage:r}=A();return e.jsx("div",{className:"p-2",children:e.jsxs(V,{onClick:t,className:"bg-gradient-to-r from-brand-gradient-from to-brand-gradient-to hover:brightness-95 text-white rounded-full px-8 py-4 font-semibold shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 w-full lg:w-auto cursor-pointer",children:[e.jsx(Ce,{className:`w-5 h-5 ${r==="ar"?"":"mr-2"}`}),r==="ar"?"بحث":r==="tr"?"Ara":"Search"]})})},js=({selectedCity:t,setSelectedCity:r,selectedDistrict:s,setSelectedDistrict:a,selectedType:o,setSelectedType:n,selectedLayout:l="",setSelectedLayout:i=()=>{},priceRange:m,setPriceRange:h,cityOptions:d,districtOptions:u,propertyTypes:g,dynamicPriceRange:f,properties:w,onSearch:x,showLayoutFilter:p=!0})=>{const{t:b}=A(),y=R=>{console.log("City changed to:",R),r(R),a(b("all"))},v=R=>{console.log("District changed to:",R),a(R)},S=R=>{console.log("Type changed to:",R),n(R),i(b("all"))},N=p?"lg:grid-cols-6":"lg:grid-cols-5";return e.jsxs("div",{className:`hidden lg:grid ${N} gap-0 items-center`,children:[e.jsx(Oa,{selectedCity:t,onCityChange:y,cityOptions:d}),e.jsx(Fa,{selectedCity:t,selectedDistrict:s,onDistrictChange:v,districtOptions:u}),e.jsx(Ba,{selectedType:o,onTypeChange:S,propertyTypes:g}),p&&e.jsx("div",{className:"group cursor-pointer lg:border-l border-gray-200",children:e.jsx("div",{className:"",children:e.jsx(st,{selectedLayout:l,setSelectedLayout:i,selectedPropertyType:o,showAsFilterButton:!0})})}),e.jsx(ys,{priceRange:m,setPriceRange:h,dynamicPriceRange:f,properties:w}),e.jsx(ws,{onSearch:x})]})},ks=({priceRange:t,setPriceRange:r,dynamicPriceRange:s,properties:a})=>{const{t:o,currentLanguage:n}=A(),{theme:l,resolvedTheme:i}=ie(),m=i==="dark"||l==="dark";return e.jsx("div",{className:"flex justify-center",children:e.jsxs(Oe,{children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(V,{variant:"outline",className:`
              rounded-full px-6 py-3 text-base transition-colors
              ${m?"border-gray-600 hover:border-gray-500 bg-[#232535] text-white hover:bg-[#181c23]":"border-gray-300 hover:border-gray-400 bg-white text-gray-900"}
            `,children:[e.jsx(aa,{className:"w-4 h-4 mr-2"}),n==="ar"?"فلاتر متقدمة":n==="tr"?"Gelişmiş Filtreler":"More Filters"]})}),e.jsx(me,{className:`
            w-[95vw] max-w-md p-6
            ${m?"bg-[#111726] border-[#232535]":"bg-white border-gray-200"}
            rounded-2xl shadow-2xl mx-4
            transition-colors
            z-30
          `,align:"center",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:`
              font-semibold text-lg text-center
              ${m?"text-white":"text-gray-800"}
            `,children:n==="ar"?"فلاتر متقدمة":n==="tr"?"Gelişmiş Filtreler":"Advanced Filters"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("label",{className:`
                  text-sm font-medium
                  ${m?"text-neutral-200":"text-gray-700"}
                `,children:o("priceRange")})}),e.jsx(Me,{priceRange:t,setPriceRange:r,dynamicPriceRange:s,properties:a,showQuickButtons:!0,darkMode:m})]})]})})]})})},Ns=({selectedCity:t,setSelectedCity:r,selectedDistrict:s,setSelectedDistrict:a,selectedType:o,setSelectedType:n,selectedLayout:l="",setSelectedLayout:i=()=>{},priceRange:m,setPriceRange:h,properties:d=[],showLayoutFilter:u=!0})=>{const{t:g,currentLanguage:f}=A(),{cities:w,districts:x,loading:p}=tt(),{propertyTypes:b,loading:y}=Pr(),[v,S]=c.useState({min:0,max:5e3}),N=t!==g("all")&&t!==""?Er(t,x):[],R=[g("all"),...b.map(j=>_r(j,f))];c.useEffect(()=>{if(d&&d.length>0){const j=d.map(_=>_.price||0).filter(_=>_>0);if(j.length>0){const _=Math.min(...j),P=Math.max(...j),T=Math.ceil(P*1.1),E=Math.max(0,Math.floor(_*.9));S({min:E,max:T}),(m[0]<E||m[1]>T)&&h([E,T])}}},[d]);const C=()=>{console.log("Search clicked with filters:",{city:t,district:s,type:o,layout:l,priceRange:m})},D=[{value:g("all"),label:g("all")},...w.map(j=>({value:j.id,label:Rr(j,f)}))],k=[{value:g("all"),label:g("all")},...N.map(j=>({value:j.id,label:Dr(j,f)}))];return p||y?e.jsx("div",{className:"w-full max-w-4xl mx-auto px-4",children:e.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-6 border",children:e.jsx("div",{className:"animate-shimmer bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 bg-[length:200%_100%] h-32 rounded-2xl"})})}):e.jsxs("div",{className:"w-full max-w-6xl mx-auto space-y-4 px-4",children:[e.jsx(Pe,{className:"bg-white dark:bg-[#181c23] rounded-3xl shadow-2xl border-0 overflow-hidden hover:shadow-3xl transition-all duration-300",children:e.jsxs(Ee,{className:"p-4 lg:p-6",children:[e.jsx($a,{selectedCity:t,setSelectedCity:r,selectedDistrict:s,setSelectedDistrict:a,selectedType:o,setSelectedType:n,selectedLayout:l,setSelectedLayout:i,priceRange:m,setPriceRange:h,cityOptions:D,districtOptions:k,propertyTypes:R,dynamicPriceRange:v,properties:d,onSearch:C,showLayoutFilter:u}),e.jsx(js,{selectedCity:t,setSelectedCity:r,selectedDistrict:s,setSelectedDistrict:a,selectedType:o,setSelectedType:n,selectedLayout:l,setSelectedLayout:i,priceRange:m,setPriceRange:h,cityOptions:D,districtOptions:k,propertyTypes:R,dynamicPriceRange:v,properties:d,onSearch:C,showLayoutFilter:u})]})}),e.jsx(ks,{priceRange:m,setPriceRange:h,dynamicPriceRange:v,properties:d})]})},Ss=({selectedFilter:t,onFilterChange:r,propertyCounts:s})=>{const{currentLanguage:a}=A(),o=[{id:"all",label:a==="ar"?"جميع العقارات":a==="tr"?"Tüm Mülkler":"All Properties",icon:$r,count:s.all,color:"from-brand-gradient-from to-brand-gradient-to"},{id:"sale",label:a==="ar"?"للبيع":a==="tr"?"Satılık":"For Sale",icon:fr,count:s.sale,color:"from-blue-500 to-cyan-500"},{id:"rent",label:a==="ar"?"للإيجار":a==="tr"?"Kiralık":"For Rent",icon:ta,count:s.rent,color:"from-green-500 to-emerald-500"},{id:"student",label:a==="ar"?"سكنات الطلاب":a==="tr"?"Öğrenci Konutları":"Student Housing",icon:Or,count:s.student,color:"from-orange-500 to-red-500"}];return e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mb-12 sm:gap-4",children:o.map(n=>{const l=n.icon,i=t===n.id;return e.jsxs("button",{onClick:()=>r(n.id),className:`
              group relative overflow-hidden
              px-4 py-3 sm:px-6 sm:py-4 rounded-2xl
              transition-all duration-300 ease-out
              hover:scale-105 hover:shadow-xl
              ${i?`bg-gradient-to-r ${n.color} text-white shadow-lg scale-105`:`
                  bg-white text-gray-700 border-2 border-gray-200
                  hover:border-gray-300
                  dark:bg-[#242734] dark:text-white dark:border-[#2c3141]
                  dark:hover:bg-[#2d3040]
                `}
              focus:outline-none focus:ring-4 focus:ring-opacity-30
              ${i?"focus:ring-white":"focus:ring-gray-400 dark:focus:ring-gray-600"}
              transform active:scale-95
            `,children:[e.jsx("div",{className:`
              absolute inset-0 opacity-0 group-hover:opacity-20 transition-opacity duration-300
              bg-gradient-to-r ${n.color}
              ${i?"opacity-0":""}
            `}),e.jsxs("div",{className:"relative flex items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:`
                p-2 rounded-xl transition-all duration-300
                ${i?"bg-white/20":"bg-gray-100 group-hover:bg-gray-200 dark:bg-[#222537] dark:group-hover:bg-[#23263e]"}
              `,children:e.jsx(l,{className:`
                  w-5 h-5 transition-all duration-300
                  ${i?"text-white":"text-gray-600 group-hover:text-gray-800 dark:text-gray-300 dark:group-hover:text-white"}
                  group-hover:rotate-12
                `})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:`
                  font-semibold text-xs sm:text-sm transition-colors duration-300
                  ${i?"text-white":"text-gray-800 dark:text-white"}
                `,children:n.label}),e.jsxs("div",{className:`
                  text-xs transition-colors duration-300
                  ${i?"text-white/80":"text-gray-500 dark:text-gray-200"}
                `,children:[n.count," ",a==="ar"?"عقار":a==="tr"?"mülk":"properties"]})]})]}),e.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-0 group-active:opacity-30 transition-opacity duration-150 bg-white dark:bg-white/20"})]},n.id)})})},Cs=({properties:t,loading:r,selectedFilter:s="all",onFilterChange:a=()=>{}})=>{const{t:o,currentLanguage:n}=A(),[l,i]=c.useState(0),m={all:t.length,sale:t.filter(d=>d.listing_type==="sale").length,rent:t.filter(d=>d.listing_type==="rent").length,student:t.filter(d=>d.is_student_housing).length};console.log("PropertiesSection - Properties:",t.length),console.log("PropertiesSection - Property counts:",m),console.log("PropertiesSection - Selected filter:",s);const h=()=>{i(d=>d+1),window.location.reload()};return r?e.jsx("section",{className:"py-12 px-4 bg-background dark:bg-[#181926]",id:"featured-properties",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("h2",{className:"text-3xl font-bold mb-4 text-foreground dark:text-white",children:n==="ar"?"العقارات المميزة":n==="tr"?"Öne Çıkan Emlaklar":"Featured Properties"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(6)].map((d,u)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 h-64 rounded-3xl mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]},u))})]})}):e.jsx("section",{className:"py-12 px-4 bg-background dark:bg-[#181926]",id:"featured-properties",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 text-foreground dark:text-white",children:n==="ar"?"جميع العقارات":n==="tr"?"Tüm Mülkler":"All Properties"}),e.jsx("p",{className:"text-lg text-muted-foreground dark:text-gray-300 max-w-2xl mx-auto",children:n==="ar"?"تصفح مجموعتنا الكاملة من العقارات المتاحة":n==="tr"?"Mevcut mülklerin tam koleksiyonumuza göz atın":"Browse our complete collection of available properties"}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400 mt-2",children:n==="ar"?`تصحيح: ${t.length} إجمالي العقارات، ${m.sale} متاحة، ${m.rent} بعد التصفية`:n==="tr"?`Hata ayıklama: ${t.length} toplam mülk, ${m.sale} mevcut, ${m.rent} filtreden sonra`:`Debug: ${t.length} total properties, ${m.sale} available, ${m.rent} after filter`})]}),e.jsx(Ss,{selectedFilter:s,onFilterChange:a,propertyCounts:m}),t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-lg text-muted-foreground dark:text-gray-300",children:n==="ar"?"لا توجد عقارات متاحة حالياً":n==="tr"?"Şu anda mevcut emlak yok":"No properties available at the moment"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[(()=>{const d=t.filter(g=>g.featured===!0),u=t.filter(g=>g.featured!==!0);return console.log("🏠 PropertiesSection Debug:",{totalProperties:t.length,featuredFirst:d.length,nonFeatured:u.length,firstFewProperties:t.slice(0,5).map(g=>({id:g.id,title:g.title,featured:g.featured}))}),null})(),t.map((d,u)=>e.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${u*.1}s`},children:e.jsx(nt,{property:d,onUpdate:h})},d.id))]},l)]})})},Ps=({properties:t,loading:r,onUpdate:s})=>{const{currentLanguage:a}=A(),o=t.filter(n=>n.is_featured&&n.status==="available");return r?e.jsxs("section",{className:"py-20 px-4 w-full","data-section":"featured-properties",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 animate-pulse"})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-96 mx-auto animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-8",children:[...Array(8)].map((n,l)=>e.jsx("div",{className:"bg-gray-200 rounded-2xl h-80 animate-pulse"},l))})]}):o.length===0?e.jsx("section",{className:"py-20 px-4 w-full","data-section":"featured-properties",children:e.jsxs("div",{className:"text-center mb-12 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"w-8 h-8 text-yellow-500"}),e.jsx(fe,{className:"w-4 h-4 text-yellow-400 absolute -top-1 -right-1 animate-pulse"})]}),e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold bg-gradient-to-r from-pink-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:a==="ar"?"العقارات المميزة":a==="tr"?"Öne Çıkan Mülkler":"Featured Properties"})]}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-200 max-w-2xl mx-auto leading-relaxed",children:a==="ar"?"لا توجد عقارات مميزة حالياً. سيتم عرض العقارات المميزة هنا عند إضافتها.":a==="tr"?"Şu anda öne çıkan mülk yok. Öne çıkan mülkler eklendiğinde burada görüntülenecek.":"No featured properties at the moment. Featured properties will be displayed here when added."})]})}):e.jsxs("section",{className:"py-20 px-4 w-full","data-section":"featured-properties",children:[e.jsxs("div",{className:"text-center mb-12 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"w-8 h-8 text-yellow-500"}),e.jsx(fe,{className:"w-4 h-4 text-yellow-400 absolute -top-1 -right-1 animate-pulse"})]}),e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold bg-gradient-to-r from-pink-600 via-purple-600 to-blue-600 bg-clip-text text-transparent",children:a==="ar"?"العقارات المميزة":a==="tr"?"Öne Çıkan Mülkler":"Featured Properties"})]}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-200 max-w-2xl mx-auto leading-relaxed",children:a==="ar"?"اكتشف مجموعتنا المختارة بعناية من أفضل العقارات الفاخرة":a==="tr"?"Özenle seçilmiş lüks mülklerimizi keşfedin":"Discover our carefully curated collection of premium properties"})]}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:`absolute inset-0 rounded-3xl blur-3xl pointer-events-none
            bg-gradient-to-r from-pink-50/50 via-purple-50/40 to-blue-50/30
            dark:bg-gradient-to-br dark:from-[#222338]/80 dark:via-[#23253a]/80 dark:to-[#21233b]/80 transition-colors duration-500`}),e.jsx("div",{className:`relative bg-gradient-to-br from-white via-pink-50/30 to-purple-50/30 rounded-3xl p-8 backdrop-blur-sm border border-white/50 shadow-xl w-full
            dark:from-[#191c27]/95 dark:via-[#1b1e2b]/95 dark:to-[#202535]/95 dark:bg-[#191c27]/95 dark:border-[#232433]/60 transition-colors duration-500`,children:o.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-lg mb-4",children:a==="ar"?"لا توجد عقارات مميزة في الوقت الحالي. ستظهر العقارات المميزة هنا عند إضافتها.":a==="tr"?"Şu anda öne çıkan mülk yok. Öne çıkan mülkler eklendiğinde burada görüntülenecek.":"No featured properties at the moment. Featured properties will be displayed here when added."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 3xl:grid-cols-6 gap-8",children:o.map((n,l)=>e.jsx("div",{className:"animate-scale-in",style:{animationDelay:`${l*100}ms`},children:e.jsx(nt,{property:n,onUpdate:s})},n.id))})})]})]})},Es=()=>{const{t,currentLanguage:r}=A(),s=[{icon:Ce,title:r==="ar"?"بحث متقدم":r==="tr"?"Gelişmiş Arama":"Advanced Search",description:r==="ar"?"أدوات بحث قوية للعثور على العقار المثالي":r==="tr"?"Mükemmel mülkü bulmak için güçlü arama araçları":"Powerful search tools to find your perfect property",color:"from-blue-500 to-cyan-500",bgColor:"bg-blue-50 dark:bg-[#23283b]/70"},{icon:zr,title:r==="ar"?"عقارات موثقة":r==="tr"?"Doğrulanmış Mülkler":"Verified Properties",description:r==="ar"?"جميع العقارات محققة ومضمونة الجودة":r==="tr"?"Tüm mülkler doğrulanmış ve kalite garantili":"All properties are verified and quality guaranteed",color:"from-green-500 to-emerald-500",bgColor:"bg-green-50 dark:bg-[#203529]/70"},{icon:Vr,title:r==="ar"?"دعم سريع":r==="tr"?"Hızlı Destek":"Quick Support",description:r==="ar"?"فريق دعم متاح 24/7 لمساعدتك":r==="tr"?"Size yardımcı olmak için 7/24 destek ekibi":"24/7 support team available to help you",color:"from-purple-500 to-pink-500",bgColor:"bg-purple-50 dark:bg-[#301c36]/70"},{icon:Z,title:r==="ar"?"تقييمات حقيقية":r==="tr"?"Gerçek Değerlendirmeler":"Real Reviews",description:r==="ar"?"تقييمات صادقة من مستأجرين حقيقيين":r==="tr"?"Gerçek kiracılardan dürüst değerlendirmeler":"Honest reviews from real tenants",color:"from-yellow-500 to-orange-500",bgColor:"bg-yellow-50 dark:bg-[#3d3120]/70"},{icon:pr,title:r==="ar"?"خدمة شخصية":r==="tr"?"Kişiselleştirilmiş Hizmet":"Personal Service",description:r==="ar"?"نهتم بكل التفاصيل لجعل تجربتك مميزة":r==="tr"?"Deneyiminizi özel kılmak için her detayla ilgileniyoruz":"We care about every detail to make your experience special",color:"from-pink-500 to-rose-500",bgColor:"bg-pink-50 dark:bg-[#3d1f2e]/70"},{icon:Gr,title:r==="ar"?"أفضل الأسعار":r==="tr"?"En İyi Fiyatlar":"Best Prices",description:r==="ar"?"أسعار تنافسية وعروض حصرية":r==="tr"?"Rekabetçi fiyatlar ve özel teklifler":"Competitive prices and exclusive deals",color:"from-indigo-500 to-blue-500",bgColor:"bg-indigo-50 dark:bg-[#212647]/70"}];return e.jsx("section",{className:"py-20 bg-gradient-to-br from-gray-50 via-white to-blue-50 dark:from-[#181926] dark:via-[#232433] dark:to-[#181926] transition-colors",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16 animate-fade-in",children:[e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-gray-900 dark:text-white mb-6",children:r==="ar"?"لماذا تختارنا؟":r==="tr"?"Neden Bizi Seçmelisiniz?":"Why Choose Us?"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto leading-relaxed",children:r==="ar"?"نقدم خدمات متميزة تجعل رحلة البحث عن العقار تجربة ممتعة وسهلة":r==="tr"?"Mülk arama yolculuğunuzu keyifli ve kolay hale getiren üstün hizmetler sunuyoruz":"We provide exceptional services that make your property search journey enjoyable and easy"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map((a,o)=>e.jsx("div",{className:"group animate-scale-in",style:{animationDelay:`${o*100}ms`},children:e.jsxs("div",{className:`${a.bgColor} rounded-2xl p-8 h-full hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 border border-white/50 dark:border-[#232433]/60`,children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${a.color} rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:e.jsx(a.icon,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 group-hover:text-transparent group-hover:bg-gradient-to-r group-hover:from-gray-900 group-hover:to-gray-600 group-hover:bg-clip-text transition-all duration-300",children:a.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:a.description})]})},o))})]})})},qt=()=>{const[t,r]=c.useState([]),[s,a]=c.useState(!0),[o,n]=c.useState(!1),[l,i]=c.useState(!1),[m,h]=c.useState(!0),[d,u]=c.useState(null),{user:g}=ce(),{toast:f}=rt(),w=async()=>{try{const{data:b,error:y}=await F.from("site_reviews").select("*").eq("is_approved",!0).order("created_at",{ascending:!1});if(y)throw y;const v=(b==null?void 0:b.map(C=>C.user_id))||[];if(v.length===0){r([]),a(!1);return}const{data:S,error:N}=await F.from("profiles").select("id, full_name, avatar_url, user_type").in("id",v);if(N)throw N;const R=(b==null?void 0:b.map(C=>({...C,profiles:(S==null?void 0:S.find(D=>D.id===C.user_id))||void 0})))||[];r(R)}catch(b){console.error("Error fetching reviews:",b),f({title:"خطأ",description:"حدث خطأ في تحميل التقييمات",variant:"destructive"})}finally{a(!1)}},x=async()=>{if(!g){i(!1),u(null),h(!1);return}h(!0);try{const{data:b,error:y}=await F.from("site_reviews").select("*").eq("user_id",g.id).limit(1);if(y)throw y;b&&b.length>0?(i(!0),u(b[0])):(i(!1),u(null))}catch(b){console.error("Error checking for existing review:",b)}finally{h(!1)}},p=async(b,y)=>{if(!g)return f({title:"يجب تسجيل الدخول",description:"يجب تسجيل الدخول لإضافة تقييم",variant:"destructive"}),!1;n(!0);try{if(d){const{error:v}=await F.from("site_reviews").update({rating:b,comment:y,is_approved:!1,updated_at:new Date().toISOString()}).eq("id",d.id);if(v)throw v;f({title:"تم تحديث التقييم",description:"سيتم مراجعة تقييمك والموافقة عليه قريباً"}),await x(),await w()}else{const{error:v}=await F.from("site_reviews").insert({user_id:g.id,rating:b,comment:y,is_approved:!1});if(v)throw v;i(!0),f({title:"تم إرسال التقييم",description:"سيتم مراجعة تقييمك والموافقة عليه قريباً"}),await x(),await w()}return!0}catch(v){return console.error("Error submitting review:",v),f({title:"خطأ",description:"حدث خطأ في إرسال التقييم",variant:"destructive"}),!1}finally{n(!1)}};return c.useEffect(()=>{w()},[]),c.useEffect(()=>{x()},[g]),{reviews:t,loading:s,submitting:o,submitReview:p,refetch:w,hasUserReviewed:l,checkingReviewStatus:m,userReview:d}},_s=()=>{const{currentLanguage:t,t:r}=A(),{toast:s}=rt(),{user:a}=ce(),{submitReview:o,submitting:n,hasUserReviewed:l,userReview:i}=qt(),[m,h]=c.useState((i==null?void 0:i.rating)||0),[d,u]=c.useState(0),[g,f]=c.useState((i==null?void 0:i.comment)||""),[w,x]=c.useState(!1),b={ar:{title:l?"تعديل تقييمك":"أضف تقييمك",ratingLabel:"تقييم الموقع",commentLabel:"تعليقك (اختياري)",commentPlaceholder:"شاركنا تجربتك مع موقعنا...",submitButton:l?"تحديث التقييم":"إضافة تقييم",submitting:l?"جاري التحديث...":"جاري الإرسال...",cancel:"إلغاء",selectRating:"الرجاء تحديد تقييم",loginRequired:"يجب تسجيل الدخول لإضافة تقييم",submissionError:"حدث خطأ أثناء إرسال التقييم",submissionSuccess:"شكراً لك على تقييمك!",addReview:"أضف تقييمك",editReview:"تعديل التقييم"},en:{title:l?"Edit Your Rating":"Add Your Rating",ratingLabel:"Rate Our Site",commentLabel:"Your Comment (Optional)",commentPlaceholder:"Share your experience with our site...",submitButton:l?"Update Rating":"Add Rating",submitting:l?"Updating...":"Submitting...",cancel:"Cancel",selectRating:"Please select a rating",loginRequired:"You must be logged in to add a rating",submissionError:"Error submitting your rating",submissionSuccess:"Thank you for your rating!",addReview:"Add Your Review",editReview:"Edit Review"},tr:{title:l?"Puanınızı Düzenleyin":"Puanınızı Ekleyin",ratingLabel:"Sitemizi Puanlayın",commentLabel:"Yorumunuz (İsteğe Bağlı)",commentPlaceholder:"Sitemizle ilgili deneyiminizi paylaşın...",submitButton:l?"Puanı Güncelle":"Puan Ekle",submitting:l?"Güncelleniyor...":"Gönderiliyor...",cancel:"İptal",selectRating:"Lütfen bir puan seçin",loginRequired:"Puan vermek için giriş yapmalısınız",submissionError:"Puanınız gönderilirken hata oluştu",submissionSuccess:"Puanınız için teşekkürler!",addReview:"Yorumunuzu Ekleyin",editReview:"Yorumu Düzenle"}}[t],y=async N=>{if(N.preventDefault(),!a){s({title:b.loginRequired,variant:"destructive"});return}if(m===0){s({title:b.selectRating,variant:"destructive"});return}await o(m,g.trim())&&(s({title:b.submissionSuccess}),x(!1))},v=getComputedStyle(document.documentElement).getPropertyValue("--brand-gradient-from-color")||"#2e90fa",S=getComputedStyle(document.documentElement).getPropertyValue("--brand-gradient-to-color")||"#a855f7";return e.jsx("div",{className:"flex justify-center",children:e.jsxs(Oe,{open:w,onOpenChange:x,children:[e.jsx(Fe,{asChild:!0,children:e.jsxs(V,{className:"group relative overflow-hidden rounded-xl text-white font-semibold py-3 px-6 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center gap-2",style:{background:`linear-gradient(135deg, ${v}, ${S})`},children:[e.jsx(le,{className:"w-5 h-5 transition-transform duration-300 group-hover:scale-110"}),e.jsx("span",{className:"hidden sm:inline",children:r(l?"editReview":"addReview")}),e.jsx("span",{className:"sm:hidden",children:r(l?"edit":"addReview")}),!l&&e.jsx(Ur,{className:"w-4 h-4 transition-transform duration-300 group-hover:rotate-90"})]})}),e.jsx(me,{className:"w-80 sm:w-96 p-0 border-0 shadow-2xl bg-white/95 dark:bg-[#232639]/95 backdrop-blur-sm",align:"center",side:"top",sideOffset:10,alignOffset:0,avoidCollisions:!1,style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:50},children:e.jsxs(Pe,{className:"border-0 shadow-none bg-transparent",children:[e.jsxs("div",{className:"px-4 sm:px-6 py-4 sm:py-6 text-center relative overflow-hidden rounded-t-xl",style:{background:`linear-gradient(135deg, ${v}, ${S})`},children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute top-2 right-4 w-12 h-12 bg-white/20 rounded-full blur-xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-2 left-4 w-8 h-8 bg-white/20 rounded-full blur-xl animate-pulse",style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-2 mb-2",children:[e.jsx(le,{className:"w-5 h-5 text-white animate-bounce",style:{animationDuration:"2s"}}),e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white drop-shadow-lg",children:b.title})]}),e.jsx("p",{className:"text-white/90 text-sm font-medium drop-shadow-sm",children:b.ratingLabel})]}),e.jsx(Ee,{className:"p-4 sm:p-6 space-y-4 sm:space-y-6 bg-white dark:bg-[#232639] rounded-b-xl",children:e.jsxs("form",{onSubmit:y,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("label",{className:"block text-base sm:text-lg font-semibold text-gray-800 dark:text-gray-200",children:b.ratingLabel}),e.jsx("div",{className:"flex justify-center gap-1 sm:gap-2",children:[1,2,3,4,5].map(N=>e.jsx("button",{type:"button",onClick:()=>h(N),onMouseEnter:()=>u(N),onMouseLeave:()=>u(0),className:"transition-all duration-300 transform hover:scale-125 focus:outline-none p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Z,{className:`w-6 sm:w-8 h-6 sm:h-8 transition-all duration-300 ${N<=(d||m)?"text-yellow-400 fill-yellow-400 scale-110 drop-shadow-lg":"text-gray-300 dark:text-gray-600 hover:text-yellow-300 dark:hover:text-yellow-400"}`})},N))}),m>0&&e.jsx("div",{className:"animate-fade-in",children:e.jsxs("span",{className:"inline-flex items-center gap-2 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-300 px-3 py-1 rounded-full text-sm font-medium border border-yellow-200 dark:border-yellow-700",children:[e.jsx(Z,{className:"w-3 h-3 fill-current"}),m," من 5 نجوم"]})})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("label",{htmlFor:"comment",className:"block text-base sm:text-lg font-semibold text-gray-800 dark:text-gray-200",children:b.commentLabel}),e.jsx(Hr,{id:"comment",value:g,onChange:N=>f(N.target.value),placeholder:b.commentPlaceholder,className:`min-h-[80px] sm:min-h-[100px] resize-none rounded-xl border-2 border-gray-200 dark:border-gray-600 
                      focus:border-brand-accent dark:focus:border-brand-accent transition-all duration-300
                      bg-white dark:bg-[#2a2b3e] text-gray-900 dark:text-gray-100
                      placeholder:text-gray-500 dark:placeholder:text-gray-400 text-sm sm:text-base`,maxLength:300}),e.jsxs("div",{className:"text-right text-xs text-gray-500 dark:text-gray-400",children:[g.length,"/300"]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(V,{type:"button",variant:"outline",onClick:()=>x(!1),className:"flex-1 rounded-xl border-2 border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:b.cancel}),e.jsx(V,{type:"submit",disabled:m===0||n,className:"flex-1 group relative overflow-hidden rounded-xl text-white font-semibold py-2 px-4 transition-all duration-300 transform hover:scale-105 disabled:opacity-60 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",style:{background:`linear-gradient(135deg, ${v}, ${S})`},children:n?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm sm:text-base",children:b.submitting})]}):e.jsxs(e.Fragment,{children:[e.jsx(qr,{className:"w-4 h-4 mr-2 transition-transform duration-300 group-hover:translate-x-1"}),e.jsx("span",{className:"text-sm sm:text-base",children:b.submitButton})]})})]})]})})]})})]})})},Rs=({review:t,index:r})=>{var h,d,u;const{currentLanguage:s}=A(),a=g=>{switch(g){case"seller":return{text:s==="ar"?"بائع":s==="tr"?"Satıcı":"Seller",color:"bg-gradient-to-r from-blue-500 to-blue-600"};case"property_owner":return{text:s==="ar"?"مالك عقار":s==="tr"?"Mülk Sahibi":"Property Owner",color:"bg-gradient-to-r from-green-500 to-green-600"};case"real_estate_office":return{text:s==="ar"?"مكتب عقارات":s==="tr"?"Emlak Ofisi":"Real Estate Office",color:"bg-gradient-to-r from-purple-500 to-purple-600"};case"partner_and_site_owner":return{text:s==="ar"?"شريك ومالك الموقع":s==="tr"?"Ortak & Site Sahibi":"Partner & Site Owner",color:"bg-gradient-to-r from-yellow-500 to-orange-400"};default:return{text:s==="ar"?"عميل":s==="tr"?"Müşteri":"Client",color:"bg-gradient-to-r from-gray-500 to-gray-600"}}},o=g=>new Date(g).toLocaleDateString(s==="ar"?"ar-SA":s==="tr"?"tr-TR":"en-US"),n=a(((h=t.profiles)==null?void 0:h.user_type)||"client"),l=getComputedStyle(document.documentElement).getPropertyValue("--brand-gradient-from-color")||"#2e90fa",i=getComputedStyle(document.documentElement).getPropertyValue("--brand-gradient-to-color")||"#a855f7",m=()=>{var g;return(g=t.profiles)!=null&&g.full_name?t.profiles.full_name:s==="ar"?"مستخدم":s==="tr"?"Kullanıcı":"User"};return e.jsxs(Pe,{className:`group relative overflow-hidden rounded-xl
      bg-white/80 dark:bg-gradient-to-tl dark:from-[#262734]/95 dark:to-[#232334]/95 dark:text-gray-50
      backdrop-blur-[2px] border-0 shadow-lg hover:shadow-2xl transition-all duration-700
      transform hover:-translate-y-2 hover:scale-[1.02] animate-fade-in`,children:[e.jsx("div",{className:"absolute inset-0 bg-white rounded-lg opacity-0 group-hover:opacity-20 transition-opacity duration-500 pointer-events-none dark:hidden"}),e.jsx("div",{className:"hidden dark:block absolute inset-0 opacity-30 pointer-events-none",style:{background:`linear-gradient(120deg, ${l}11 65%, ${i}22 100%)`}}),e.jsx("div",{className:"absolute top-3 md:top-4 right-3 md:right-4 w-6 md:w-8 h-6 md:h-8 bg-gradient-to-br from-brand-gradient-from/30 to-brand-gradient-to/30 rounded-full blur-sm opacity-0 group-hover:opacity-100 transition-all duration-500 animate-pulse"}),e.jsx("div",{className:"absolute bottom-4 md:bottom-6 left-4 md:left-6 w-4 md:w-6 h-4 md:h-6 bg-gradient-to-br from-brand-gradient-from/30 to-brand-gradient-to/30 rounded-full blur-sm opacity-0 group-hover:opacity-100 transition-all duration-700 animate-pulse",style:{animationDelay:"0.3s"}}),e.jsxs(Ee,{className:"relative p-4 md:p-6 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-start gap-3 md:gap-4 mb-3 md:mb-4",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"absolute inset-0 w-full h-full rounded-full",style:{background:`linear-gradient(135deg, ${l}, ${i})`,zIndex:0,boxShadow:"0 2px 8px 0 rgba(60, 61, 178, 0.06)"}}),e.jsxs(br,{className:"w-10 md:w-14 h-10 md:h-14 ring-2 ring-white dark:ring-[#1d1c28] shadow-lg transition-all duration-500 group-hover:ring-4 group-hover:ring-brand-accent/20 group-hover:scale-110 relative z-10",children:[e.jsx(vr,{src:((d=t.profiles)==null?void 0:d.avatar_url)||"",alt:m(),className:"object-cover"}),e.jsx(yr,{className:"bg-transparent text-white text-sm md:text-lg flex items-center justify-center",children:(u=t.profiles)!=null&&u.full_name?t.profiles.full_name.slice(0,2).toUpperCase():e.jsx(wr,{className:"w-5 md:w-7 h-5 md:h-7"})})]}),e.jsx("div",{className:"absolute -bottom-0.5 md:-bottom-1 -right-0.5 md:-right-1 w-3 md:w-5 h-3 md:h-5 bg-gradient-to-br from-green-400 to-green-500 rounded-full border-2 border-white dark:border-[#1d1c28] shadow-md z-20 animate-pulse",style:{boxShadow:"0 2px 8px 0 #fff8, 0 1px 3px 0 #71e77533"}})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1 md:gap-2 mb-1 md:mb-2 flex-wrap",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-gray-50 text-sm md:text-lg group-hover:text-brand-accent transition-colors duration-300 truncate",children:m()}),e.jsx(Kr,{className:`${n.color} text-white text-xs px-2 md:px-3 py-0.5 md:py-1 rounded-full shadow-md transition-all duration-300 hover:scale-110 hover:shadow-lg border-0 flex-shrink-0`,children:n.text})]}),e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[[1,2,3,4,5].map(g=>e.jsx(Z,{className:`w-3 md:w-5 h-3 md:h-5 transition-all duration-300 hover:scale-125 ${g<=t.rating?"text-yellow-400 fill-current drop-shadow-sm":"text-gray-300 dark:text-gray-600"}`,style:{animationDelay:`${g*.1}s`}},g)),e.jsxs("span",{className:"text-xs md:text-sm font-semibold text-gray-600 dark:text-gray-300 ml-1 md:ml-2 bg-gray-100 dark:bg-[#232432] px-1 md:px-2 py-0.5 md:py-1 rounded-full",children:[t.rating,"/5"]})]})]})]}),e.jsx("div",{className:"mb-3 md:mb-4 flex-grow",children:e.jsxs("div",{className:"relative h-full",children:[e.jsx("div",{className:"absolute -left-1 md:-left-2 top-0 w-0.5 md:w-1 h-full bg-gradient-to-b from-brand-gradient-from to-brand-gradient-to rounded-full opacity-30 group-hover:opacity-60 transition-opacity duration-300"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-200 leading-relaxed pl-2 md:pl-4 text-xs md:text-base group-hover:text-gray-800 dark:group-hover:text-white transition-colors duration-300 italic line-clamp-4",children:['"',t.comment,'"']})]})}),e.jsx("div",{className:"pt-3 md:pt-4 border-t border-gray-100 dark:border-gray-700 group-hover:border-gray-200 dark:group-hover:border-gray-500 transition-colors duration-300",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-300 font-medium bg-gray-50 dark:bg-[#232432] px-2 md:px-3 py-1 rounded-full group-hover:bg-gray-100 dark:group-hover:bg-[#2a2b3e] transition-colors duration-300",children:o(t.created_at)})})})]})]})},Ds={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function Ts(t,r){const s=t.scrollSnapList();return typeof r=="number"?s.map(()=>r):r(s,t)}function As(t,r){const s=t.rootNode();return r&&r(s)||s}function Be(t={}){let r,s,a,o,n=null,l=0,i=!1,m=!1,h=!1,d=!1;function u(E,M){s=E;const{mergeOptions:$,optionsAtMedia:O}=M,I=$(Ds,Be.globalOptions),Kt=$(I,t);if(r=O(Kt),s.scrollSnapList().length<=1)return;d=r.jump,a=!1,o=Ts(s,r.delay);const{eventStore:se,ownerDocument:Wt}=s.internalEngine(),Ie=!!s.internalEngine().options.watchDrag,ze=As(s,r.rootNode);se.add(Wt,"visibilitychange",b),Ie&&s.on("pointerDown",v),Ie&&!r.stopOnInteraction&&s.on("pointerUp",S),r.stopOnMouseEnter&&se.add(ze,"mouseenter",N),r.stopOnMouseEnter&&!r.stopOnInteraction&&se.add(ze,"mouseleave",R),r.stopOnFocusIn&&s.on("slideFocusStart",p),r.stopOnFocusIn&&!r.stopOnInteraction&&se.add(s.containerNode(),"focusout",x),r.playOnInit&&x()}function g(){s.off("pointerDown",v).off("pointerUp",S).off("slideFocusStart",p),p(),a=!0,i=!1}function f(){const{ownerWindow:E}=s.internalEngine();E.clearTimeout(l),l=E.setTimeout(_,o[s.selectedScrollSnap()]),n=new Date().getTime(),s.emit("autoplay:timerset")}function w(){const{ownerWindow:E}=s.internalEngine();E.clearTimeout(l),l=0,n=null,s.emit("autoplay:timerstopped")}function x(){if(!a){if(y()){h=!0;return}i||s.emit("autoplay:play"),f(),i=!0}}function p(){a||(i&&s.emit("autoplay:stop"),w(),i=!1)}function b(){if(y())return h=i,p();h&&x()}function y(){const{ownerDocument:E}=s.internalEngine();return E.visibilityState==="hidden"}function v(){m||p()}function S(){m||x()}function N(){m=!0,p()}function R(){m=!1,x()}function C(E){typeof E<"u"&&(d=E),x()}function D(){i&&p()}function k(){i&&x()}function j(){return i}function _(){const{index:E}=s.internalEngine(),M=E.clone().add(1).get(),$=s.scrollSnapList().length-1,O=r.stopOnLastSnap&&M===$;if(s.canScrollNext()?s.scrollNext(d):s.scrollTo(0,d),s.emit("autoplay:select"),O)return p();x()}function P(){if(!n)return null;const E=o[s.selectedScrollSnap()],M=new Date().getTime()-n;return E-M}return{name:"autoplay",options:t,init:u,destroy:g,play:C,stop:D,reset:k,isPlaying:j,timeUntilNext:P}}Be.globalOptions=void 0;const Ms=()=>{const{currentLanguage:t}=A(),{reviews:r,loading:s}=qt(),[a,o]=c.useState(),[n,l]=c.useState(!1),[i,m]=c.useState(!1),[h,d]=c.useState([]),u=getComputedStyle(document.documentElement).getPropertyValue("--brand-gradient-from-color")||"#2e90fa",g=getComputedStyle(document.documentElement).getPropertyValue("--brand-gradient-to-color")||"#a855f7",f="text-gray-900 dark:text-white",w="text-gray-600 dark:text-gray-400",x="bg-white/90 dark:bg-[#232639]/80",p="border border-white/50 dark:border-[#3d4164]/60",[b]=c.useState(()=>Be({delay:4e3,stopOnInteraction:!1,stopOnMouseEnter:!0})),y=c.useCallback(()=>{a&&(l(a.canScrollPrev()),m(a.canScrollNext()),d(a.slidesInView(!0)))},[a]);c.useEffect(()=>{if(a)return y(),a.on("select",y),a.on("reInit",y),a.on("scroll",y),()=>{a==null||a.off("select",y),a==null||a.off("reInit",y),a==null||a.off("scroll",y)}},[a,y]);const v=c.useCallback(()=>{a==null||a.scrollPrev()},[a]),S=c.useCallback(()=>{a==null||a.scrollNext()},[a]),N=()=>t==="ar"?"آراء عملائنا":t==="tr"?"Müşteri Görüşleri":"Customer Reviews",R=()=>t==="ar"?"اكتشف ما يقوله عملاؤنا عن خدماتنا وشاركنا تجربتك":t==="tr"?"Müşterilerimizin hizmetlerimiz hakkında söylediklerini keşfedin ve deneyiminizi paylaşın":"Discover what our customers say about our services and share your experience",C=()=>r.length===0?0:(r.reduce((k,j)=>k+j.rating,0)/r.length).toFixed(1);return s?e.jsx("section",{className:"py-20 px-4 w-full",style:{background:"#fff",...typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?{background:"#181926"}:{}},children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded w-64 mx-auto mb-4 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-96 mx-auto animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[...Array(6)].map((D,k)=>e.jsx("div",{className:"bg-gray-200 rounded-2xl h-64 animate-pulse"},k))})]})}):e.jsxs("section",{className:"py-12 md:py-20 px-2 md:px-4 w-full relative overflow-hidden bg-white dark:bg-[#181926] transition-colors duration-500",style:{},children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 rounded-full blur-3xl animate-pulse dark:hidden",style:{background:`radial-gradient(circle at 60% 40%, ${u}22 70%, ${g}00 100%)`}}),e.jsx("div",{className:"absolute bottom-20 right-10 w-40 h-40 rounded-full blur-3xl animate-pulse dark:hidden",style:{background:`radial-gradient(circle at 60% 60%, ${g}22 70%, ${u}00 100%)`,animationDelay:"2s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 rounded-full blur-3xl animate-pulse dark:hidden",style:{background:`radial-gradient(circle at 50% 50%, ${u}11 60%, ${g}10 100%)`,animationDelay:"4s"}}),e.jsx("div",{className:"absolute inset-0 hidden dark:block rounded-3xl pointer-events-none",style:{background:"linear-gradient(120deg,#232433 60%,#2c2d3e 100%)",opacity:.85,filter:"blur(48px)",zIndex:1}})]}),e.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[e.jsxs("div",{className:"text-center mb-12 md:mb-16 animate-fade-in px-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-full blur-lg opacity-30 animate-pulse",style:{background:`linear-gradient(135deg, ${u}, ${g})`}}),e.jsx(le,{className:"relative w-6 md:w-8 h-6 md:h-8 text-[inherit] animate-bounce",style:{color:u,animationDuration:"3s"}}),e.jsx(Z,{className:"w-3 md:w-4 h-3 md:h-4 absolute -top-1 -right-1 animate-pulse",style:{color:"#facc15"}})]}),e.jsx("h2",{className:"text-2xl md:text-4xl lg:text-5xl font-bold bg-clip-text text-transparent animate-scale-in",style:{background:`linear-gradient(90deg, ${u} 0%, ${g} 100%)`,WebkitBackgroundClip:"text",color:"transparent"},children:N()})]}),e.jsx("p",{className:"text-sm md:text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto leading-relaxed mb-6 animate-fade-in",style:{animationDelay:"0.2s"},children:R()}),r.length>0&&e.jsxs("div",{className:"flex items-center justify-center gap-4 md:gap-8 mb-8 animate-fade-in flex-wrap",style:{animationDelay:"0.4s"},children:[e.jsxs("div",{className:`group relative overflow-hidden rounded-full px-4 md:px-8 py-3 md:py-4 shadow-2xl hover:shadow-3xl transition-all duration-500 hover:scale-110 cursor-pointer ${x} ${p}`,style:{border:`1.5px solid ${u}`,background:`linear-gradient(90deg, ${u}09 0%, ${g}09 100%)`},children:[e.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(120deg, ${u}22 0%, ${g}22 100%)`,transform:"skewX(-12deg)"}}),e.jsxs("div",{className:"relative flex items-center gap-2 md:gap-3",children:[e.jsx(Z,{className:"w-4 md:w-6 h-4 md:h-6",style:{color:"#facc15"}}),e.jsx("span",{className:`font-bold text-lg md:text-2xl ${f}`,children:C()}),e.jsx("span",{className:`text-xs md:text-base font-medium ${w}`,children:t==="ar"?"من 5":t==="tr"?"/ 5":"out of 5"})]})]}),e.jsxs("div",{className:`group relative overflow-hidden rounded-full px-4 md:px-8 py-3 md:py-4 shadow-2xl hover:shadow-3xl transition-all duration-500 hover:scale-110 cursor-pointer ${x} ${p}`,style:{border:`1.5px solid ${g}`,background:`linear-gradient(90deg, ${u}09 0%, ${g}09 100%)`},children:[e.jsx("div",{className:"absolute inset-0",style:{background:`linear-gradient(120deg, ${u}22 0%, ${g}22 100%)`,transform:"skewX(-12deg)"}}),e.jsxs("div",{className:"relative flex items-center gap-2 md:gap-3",children:[e.jsx(Wr,{className:"w-4 md:w-6 h-4 md:h-6",style:{color:u,animationDelay:"1s"}}),e.jsx("span",{className:`font-bold text-lg md:text-2xl ${f}`,children:r.length}),e.jsx("span",{className:`text-xs md:text-base font-medium ${w}`,children:t==="ar"?"تقييم":t==="tr"?"değerlendirme":"reviews"})]})]})]})]}),e.jsx("div",{className:"mb-12 md:mb-16 animate-fade-in px-2",style:{animationDelay:"0.6s"},children:e.jsx(_s,{})}),r.length===0?e.jsx("div",{className:"text-center py-20 animate-fade-in px-4",style:{animationDelay:"0.8s"},children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"relative w-20 md:w-24 h-20 md:h-24 mx-auto mb-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full animate-pulse"}),e.jsx("div",{className:"relative w-20 md:w-24 h-24 md:h-24 bg-gradient-to-br from-blue-200 to-purple-200 rounded-full flex items-center justify-center animate-bounce",style:{animationDuration:"2s"},children:e.jsx(le,{className:"w-10 md:w-12 h-10 md:h-12 text-blue-600"})})]}),e.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-gray-900 mb-4",children:t==="ar"?"لا توجد تقييمات بعد":t==="tr"?"Henüz değerlendirme yok":"No reviews yet"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600",children:t==="ar"?"كن أول من يشارك تجربته معنا":t==="tr"?"Bizimle deneyiminizi paylaşan ilk kişi olun":"Be the first to share your experience with us"})]})}):e.jsx("div",{className:"relative animate-fade-in px-2 md:px-8",style:{animationDelay:"1s"},children:e.jsxs(Fr,{setApi:o,plugins:[b],opts:{align:"start",loop:!0,slidesToScroll:1},className:"w-full",onMouseEnter:()=>b.stop(),onMouseLeave:()=>b.play(),children:[e.jsx(Br,{className:"-ml-1 md:-ml-4",children:r.map((D,k)=>{const j=h.includes(k);return e.jsx(Ir,{className:`
                        pl-1 md:pl-4
                        basis-[90%] xs:basis-[80%]
                        sm:basis-1/2
                        lg:basis-1/3
                        xl:basis-1/4
                      `,children:e.jsx("div",{className:"h-full transition-all duration-500 ease-out",style:{opacity:j?1:0,transform:j?"scale(1)":"scale(0.9)"},children:e.jsx(Rs,{review:D,index:k})})},D.id)})}),e.jsx("button",{onClick:v,disabled:!n,className:"hidden md:flex absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 w-14 h-14 text-white transition-all duration-500 hover:scale-110 hover:brightness-110 shadow-2xl hover:shadow-3xl group rounded-full items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed z-10",style:{background:`linear-gradient(135deg, ${u}, ${g})`},children:e.jsx(Jr,{className:"w-6 h-6 group-hover:animate-pulse transition-transform group-hover:-translate-x-0.5"})}),e.jsx("button",{onClick:S,disabled:!i,className:"hidden md:flex absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 w-14 h-14 text-white transition-all duration-500 hover:scale-110 hover:brightness-110 shadow-2xl hover:shadow-3xl group rounded-full items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed z-10",style:{background:`linear-gradient(135deg, ${u}, ${g})`},children:e.jsx(jr,{className:"w-6 h-6 group-hover:animate-pulse transition-transform group-hover:translate-x-0.5"})})]})})]})]})},Ls=({children:t,className:r=""})=>{const s=kr();return e.jsx("div",{className:`
      ${s?"px-4 py-6":"px-6 py-8"} 
      w-full max-w-none
      ${r}
    `,children:t})},$s=({initialCities:t,initialDistricts:r,citiesAndDistrictsLoading:s})=>{const{t:a,currentLanguage:o}=A(),[n,l]=Nr(),[i,m]=c.useState(n.get("city")||a("all")),[h,d]=c.useState(n.get("district")||a("all")),[u,g]=c.useState(a("all")),[f,w]=c.useState(a("all")),[x,p]=c.useState([0,5e3]),[b,y]=c.useState(n.get("search")||""),[v,S]=c.useState(n.get("city"));c.useEffect(()=>{if(s)return;const k=n.get("city"),j=n.get("district"),_=n.get("search");if(y(_||""),k){const T=t.some(E=>E.id===k);m(T?k:a("all")),S(k)}else i&&i!==a("all")||(m(a("all")),S(null));const P=k||(i!==a("all")&&t.find(T=>T.id===i)?i:null);if(j){const T=r.some(M=>M.id===j),E=P?r.some(M=>M.id===j&&M.city_id===P):T;d(T&&E?j:a("all"))}else d(a("all"))},[n,t,r,s,a,i]),c.useEffect(()=>{if(s)return;const k=n.get("city"),j=n.get("district");m(k&&t.some(_=>_.id===k)?k:i||a("all")),d(j&&r.some(_=>_.id===j)?j:a("all")),g(a("all")),w(a("all"))},[o,a,t,r,n,s]);const N=c.useCallback(k=>{m(k),d(a("all")),l(j=>{const _=new URLSearchParams(j);return k===a("all")||!t.some(P=>P.id===k)?_.delete("city"):_.set("city",k),_.delete("district"),_},{replace:!0}),S(k)},[a,l,t]),R=c.useCallback(k=>{d(k),l(j=>{const _=new URLSearchParams(j);return k===a("all")||!r.some(P=>P.id===k)?_.delete("district"):_.set("district",k),_},{replace:!0})},[a,l,r]),C=c.useCallback(k=>{y(k),l(j=>{const _=new URLSearchParams(j);return k.trim()?_.set("search",k.trim()):_.delete("search"),_},{replace:!0})},[l]),D=c.useCallback(()=>{y(""),l(k=>{const j=new URLSearchParams(k);return j.delete("search"),j},{replace:!0})},[l]);return{selectedCity:i,handleCityChange:N,selectedDistrict:h,handleDistrictChange:R,selectedType:u,setSelectedType:g,selectedLayout:f,setSelectedLayout:w,priceRange:x,setPriceRange:p,searchQuery:b,handleSearchQueryChange:C,clearSearch:D}},xe=t=>{const r=t.cover_image||(Array.isArray(t.images)&&t.images.length>0?t.images[0]:"/placeholder.svg");return{id:t.id,title:t.title||t.title_en||t.title_ar||t.title_tr||"",location:`${t.city||""}, ${t.district||""}`.replace(/^, |, $/,""),city:t.city||"",district:t.district||"",price:t.price||0,currency:t.currency||"EUR",deposit:t.deposit||0,commission:t.commission||0,deposit_currency:t.deposit_currency,commission_currency:t.commission_currency,beds:t.bedrooms||0,baths:t.bathrooms||0,area:t.area||0,image:r,featured:t.is_featured||!1,is_featured:t.is_featured||!1,rating:0,type:t.property_type,listing_type:t.listing_type,images:Array.isArray(t.images)?t.images:[],is_student_housing:t.is_student_housing,student_housing_gender:t.student_housing_gender,status:t.status,hidden_by_admin:t.hidden_by_admin,created_at:t.created_at}},Os=()=>{const[t,r]=c.useState([]),[s,a]=c.useState(!0),{isAdmin:o}=ce(),n=async()=>{try{a(!0),console.log("Fetching properties...");let l=F.from("properties").select(`
          *,
          property_types (
            id,
            name_ar,
            name_en,
            name_tr,
            is_active,
            created_at,
            created_by,
            updated_at
          ),
          property_layouts (
            id,
            name_ar,
            name_en,
            name_tr
          ),
          profiles!inner (
            id,
            full_name,
            avatar_url,
            whatsapp_number,
            is_suspended
          )
        `).eq("profiles.is_suspended",!1);o||(l=l.eq("status","available").neq("hidden_by_admin",!0));const{data:i,error:m}=await l.order("created_at",{ascending:!1});if(m){console.error("Error fetching properties:",m);let h=F.from("properties").select("*");o||(h=h.eq("status","available").neq("hidden_by_admin",!0));const{data:d,error:u}=await h.order("created_at",{ascending:!1});if(u)throw console.error("Simple query also failed:",u),u;console.log("Simple query succeeded, using basic data:",(d==null?void 0:d.length)||0);const g=(d||[]).map(f=>({...f,images:Array.isArray(f.images)?f.images:typeof f.images=="string"?[f.images]:[]}));r(g.map(xe))}else{console.log("Complex query succeeded:",(i==null?void 0:i.length)||0);const h=(i||[]).map(u=>({...u,images:Array.isArray(u.images)?u.images:typeof u.images=="string"?[u.images]:[],property_types:u.property_types?{...u.property_types,id:u.property_types.id||u.property_type_id||""}:void 0})),d=h.filter(u=>u.is_featured===!0);console.log("🌟 Properties with is_featured=true in fetched data:",d.length),d.length>0&&console.log("Featured properties details:",d.map(u=>({id:u.id,title:u.title_ar||u.title_en||u.title_tr||"No title",is_featured:u.is_featured,status:u.status}))),r(h.map(xe))}}catch(l){console.error("Error in fetchProperties:",l);try{let i=F.from("properties").select("*");o||(i=i.eq("status","available").neq("hidden_by_admin",!0));const{data:m}=await i.limit(50);console.log("Fallback query result:",(m==null?void 0:m.length)||0);const h=(m||[]).map(d=>({...d,images:Array.isArray(d.images)?d.images:typeof d.images=="string"?[d.images]:[]}));r(h.map(xe))}catch(i){console.error("Even fallback failed:",i),r([])}}finally{a(!1)}};return c.useEffect(()=>{n()},[o]),{properties:t,loading:s,fetchProperties:n}},Fs=({searchQuery:t,filteredPropertiesCount:r,clearSearchHandler:s})=>{const{t:a,currentLanguage:o}=A();return t?e.jsx("section",{className:"py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"bg-pink-50 border border-pink-200 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-pink-800",children:[o==="ar"?"نتائج البحث عن:":o==="tr"?"Arama sonuçları:":"Search results for:",' "',t,'"']}),e.jsxs("p",{className:"text-sm text-pink-600 mt-1",children:[r," ",o==="ar"?"عقار موجود":o==="tr"?"mülk bulundu":"properties found"]})]}),e.jsx("button",{onClick:s,className:"text-pink-600 hover:text-pink-800 font-medium",children:o==="ar"?"مسح البحث":o==="tr"?"Aramayı Temizle":"Clear Search"})]})})}):null},Bs=({properties:t,searchQuery:r,selectedCity:s,selectedDistrict:a,selectedType:o,selectedLayout:n,priceRange:l,cities:i,districts:m,currentLanguage:h,t:d})=>{const{isAdmin:u}=ce();return c.useMemo(()=>{let g=[...t];return u||(g=g.filter(f=>f.status==="available"&&!f.hidden_by_admin)),s&&s!==d("all")&&i.find(w=>w.id===s)&&(g=g.filter(w=>w.city===s)),a&&a!==d("all")&&m.find(w=>w.id===a)&&(g=g.filter(w=>w.district===a)),o&&o!==d("all")&&(g=g.filter(f=>f.type?({[d("apartment")]:["apartment","شقة","daire"],[d("villa")]:["villa","فيلا","villa"],[d("studio")]:["studio","استوديو","stüdyo"],[d("house")]:["house","بيت","ev"]}[o]||[o.toLowerCase()]).some(p=>{var b;return(b=f.type)==null?void 0:b.toLowerCase().includes(p.toLowerCase())}):!1)),l&&l.length===2&&(g=g.filter(f=>f.price>=l[0]&&f.price<=l[1])),g.sort((f,w)=>{if(f.featured&&!w.featured)return-1;if(!f.featured&&w.featured)return 1;const x=new Date(f.created_at||0).getTime();return new Date(w.created_at||0).getTime()-x}),g},[t,s,a,o,n,l,i,m,h,d,u])},fn=()=>{const{t,currentLanguage:r}=A(),{cities:s,districts:a,loading:o}=tt(),{settings:n,loading:l}=Sr(),{selectedCity:i,handleCityChange:m,selectedDistrict:h,handleDistrictChange:d,selectedType:u,setSelectedType:g,selectedLayout:f,setSelectedLayout:w,priceRange:x,setPriceRange:p,searchQuery:b,clearSearch:y}=$s({initialCities:s,initialDistricts:a,citiesAndDistrictsLoading:o}),[v,S]=c.useState("all"),{properties:N,loading:R,fetchProperties:C}=Os();c.useEffect(()=>{(async()=>{console.log("Running Supabase connection tests...");const T=await Mr(),E=await Lr();console.log("Index page - Connection test:",T),console.log("Index page - Permission test:",E)})()},[]),c.useEffect(()=>{},[r,C]),c.useEffect(()=>{if(!l&&n){const P=r==="ar"?n.siteNameAr:r==="en"?n.siteNameEn:n.siteNameTr,T=r==="ar"?n.siteDescriptionAr:r==="en"?n.siteDescriptionEn:n.siteDescriptionTr,E=(M,$,O)=>{let I=document.querySelector(`meta[${M}='${$}']`);I||(I=document.createElement("meta"),I.setAttribute(M,$),document.head.appendChild(I)),I.content=O};P&&(document.title=P),T&&E("name","description",T),P&&(E("property","og:title",P),E("name","twitter:title",P)),T&&(E("property","og:description",T),E("name","twitter:description",T))}},[n,l,r]),c.useEffect(()=>{window.location.hash==="#featured-properties"&&setTimeout(()=>{const P=document.getElementById("featured-properties");P&&P.scrollIntoView({behavior:"smooth",block:"start"})},300)},[]),c.useEffect(()=>{const P=T=>{const E=T.detail;E&&(m(E),setTimeout(()=>{d(t("all")),w(t("all")),g(t("all"));const M=document.getElementById("featured-properties");M?M.scrollIntoView({behavior:"smooth",block:"start"}):window.scrollTo({top:0,behavior:"smooth"})},150))};return window.addEventListener("footer-city-select",P),()=>{window.removeEventListener("footer-city-select",P)}},[m,d,w,g,t]),c.useMemo(()=>[t("all"),t("apartment"),t("villa"),t("studio"),t("house")],[t]);const D=Bs({properties:N,searchQuery:{selectedCity:i,selectedDistrict:h,selectedType:u,selectedLayout:f,priceRange:x},selectedCity:i,selectedDistrict:h,selectedType:u,selectedLayout:f,priceRange:x,cities:s,districts:a,currentLanguage:r,t}),k=c.useMemo(()=>v==="all"?D:D.filter(P=>{switch(v){case"sale":return P.listing_type==="sale";case"rent":return P.listing_type==="rent";case"student":return P.is_student_housing;default:return!0}}),[D,v]),j=R||o||l,_=c.useCallback(P=>{Array.isArray(P)&&P.length===2&&typeof P[0]=="number"&&typeof P[1]=="number"?p([P[0],P[1]]):console.warn("Price range update received an invalid array, expected [min, max]:",P)},[p]);return e.jsx("div",{className:`min-h-screen w-full -mt-20 bg-background transition-colors duration-300
      dark:bg-[#181926]`,dir:r==="ar"?"rtl":"ltr",children:e.jsxs("div",{className:"animate-fade-in w-full",children:[e.jsx("div",{className:`fixed inset-0 -z-10 pointer-events-none transition-colors duration-300
            bg-gradient-to-b from-brand-gradient-from-light to-brand-gradient-to-light
            dark:from-[#232433] dark:to-[#181926]`}),e.jsx(la,{settings:n,settingsLoading:l}),e.jsx("section",{className:"relative -mt-16 lg:-mt-20 z-10",children:e.jsx(Ls,{children:e.jsx(Ns,{selectedCity:i,setSelectedCity:m,selectedDistrict:h,setSelectedDistrict:d,selectedType:u,setSelectedType:g,selectedLayout:f,setSelectedLayout:w,priceRange:x,setPriceRange:_,properties:N})})}),e.jsx(Fs,{searchQuery:b,filteredPropertiesCount:k.length,clearSearchHandler:y}),(()=>{const P=t("all"),T=!b;return console.log("Featured Properties Section Debug:",{searchQuery:b,selectedCity:i,selectedDistrict:h,selectedType:u,allTranslation:P,shouldShowFeatured:T,currentLanguage:r,searchQueryEmpty:!b}),T})()&&e.jsx(Ps,{properties:N,loading:j,onUpdate:C}),e.jsx("div",{className:"w-full",children:e.jsx(Cs,{properties:k,loading:j,selectedFilter:v,onFilterChange:S})}),e.jsx(Ms,{}),e.jsx(Es,{})]})})};export{fn as default};
