import{c as ce,u as Ns,r as x,s as T,a as F,j as e,H as Me,M as as,C as da,b as Se,d as Or,P as ve,e as pe,f as ma,g as zr,h as Vr,R as qr,i as Gr,_ as Wr,k as Hr,l as We,m as Yr,z as Kr,n as Xr,o as Jr,p as Zr,q as Qr,t as _s,v as bs,S as et,w as st,F as at,x as rt,y as ha,A as Fs,B as tt,D as be,E as ua,G as se,I as S,J as xa,U as pa,K as Xe,L as ga,X as Be,N as ws,O as Cs,Q as Ss,T as Os,V as nt,W as K,Y as it,Z as lt,$ as ct,a0 as sa,a1 as Oe,a2 as Re,a3 as Je,a4 as ot,a5 as ja,a6 as dt,a7 as mt,a8 as ht,a9 as ut,aa as xt,ab as ks,ac as pt,ad as gt}from"./index-Ba-_IHuQ.js";import{T as ke,a as Ee,b as ee,c as L,d as Ae,e as D,G as va,L as fa,u as ya,P as Na,R as jt,f as vt,g as ft}from"./ReviewsManagement-CKsIOxw2.js";import{T as Te,a as Fe,b as ae,c as re}from"./tabs-3zOAl0ep.js";import{C as P,a as $,b as R,c as O,d as q}from"./card-DocFJD5R.js";import{B as G}from"./badge-DRGEcZbO.js";import{g as Ze,a as gs,b as _a,c as js,u as zs}from"./cityUtils-DwiwOoBI.js";import{U as Qe}from"./users-B-O4Ext4.js";import{E as ge,a as Le}from"./eye-off-QLdkjG-i.js";import{T as ba,P as wa,a as yt,C as Ds,I as Nt,u as _t}from"./ImageUpload-D0MBGldL.js";import{u as Vs,B as bt,V as Ca}from"./VerifiedBadge-CnJVYRi5.js";import{S as we}from"./square-pen-XvOR2TU8.js";import{T as me}from"./trash-2-D9yzkGdt.js";import{I as C}from"./input-BB7eCBwl.js";import{T as V}from"./textarea-D6kC44b6.js";import{L as j}from"./label-3yzes-iA.js";import{S as Ce,U as Ye}from"./switch-CCSj0eWM.js";import{A as wt}from"./arrow-left-YqLAbwqU.js";import{S as Ct,a as St}from"./settings-BehK2Pjf.js";import{P as _e}from"./plus-BhvacCnt.js";import{S as X,a as J,b as Z,c as Q,d as E,C as kt,u as Et}from"./select-B0LLBn5t.js";import{C as Sa}from"./checkbox-DzOBksiD.js";import{I as ze}from"./image-BgofXdSF.js";import{P as At}from"./PropertyLayoutFilter-Dsev0TG9.js";import{u as Tt}from"./usePropertyViewsCount-BXmCnfId.js";import{C as vs}from"./circle-check-big-D_hgqrRM.js";import{E as es}from"./separator-wDokUAnQ.js";import{S as fs}from"./star-BDVVLF9N.js";import{D as Ft,A as ka}from"./seedUserActivity-CcC_9Fqw.js";import{B as Dt,a as Pt,S as Rt}from"./square-CxCi9vpu.js";import{C as Mt}from"./calendar-BZmh3iBK.js";import{R as Ke}from"./refresh-cw-Dzle1iAu.js";import{D as Lt,a as Ut,b as $t,c as It,d as Bt,e as Ot}from"./dialog-Bi8CA0Hs.js";import{g as zt,u as Vt}from"./usePropertyLayouts-0iGFrxcO.js";import{B as qs}from"./building-BvIGYq90.js";import{C as je}from"./clock-Fq3ibpDw.js";import{u as qt,S as Gt,A as Wt}from"./AdminUserActivityDialog-D7M-L8UV.js";import{B as rs}from"./ban-DH3c8ygT.js";import{C as Ht}from"./useUserActions-DGvKvL3f.js";import{T as Ea}from"./triangle-alert-Ds9hEMyA.js";import{M as $s}from"./message-circle-B7g0Luhq.js";import{S as Es}from"./shield-DN6pgIRS.js";import{u as Yt}from"./useContactSettings-BDmevMpn.js";import{u as Kt}from"./useContactSubjects-CiBKd0Za.js";import{u as Xt}from"./useTermsManagement-CcHHwj5s.js";import{F as Jt}from"./file-text-Bq93HhdF.js";import"./useQuery-D_0ZzEPi.js";import"./en-US-ZBLZOCkG.js";import"./scroll-area-C94vp1UI.js";/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],Aa=ce("circle-stop",Zt);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],en=ce("clipboard-list",Qt);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],an=ce("clipboard",sn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Gs=ce("database",rn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ta=ce("download",tn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]],ln=ce("file-x",nn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Fa=ce("funnel",cn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],dn=ce("gift",on);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],ss=ce("infinity",mn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],un=ce("info",hn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Da=ce("languages",xn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]],gn=ce("megaphone",pn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],vn=ce("network",jn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],yn=ce("palette",fn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_n=ce("shield-check",Nn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],wn=ce("type",bn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Sn=ce("user-plus",Cn);/**
 * @license lucide-react v0.515.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],aa=ce("video",kn),En=()=>{const{user:s}=Ns(),[a,r]=x.useState(!1),[t,n]=x.useState(!0);return x.useEffect(()=>{let c=!0;return(async()=>{if(!s){c&&(r(!1),n(!1));return}try{const{data:i,error:l}=await T.rpc("is_admin");l?console.error("Error checking admin status:",l):c&&r(i===!0)}catch(i){console.error("Error checking admin status:",i),c&&r(!1)}finally{c&&n(!1)}})(),()=>{c=!1}},[s==null?void 0:s.id]),{isAdmin:a,isLoading:t}},An=()=>{const{currentLanguage:s}=F(),[a,r]=x.useState({totalProperties:0,registeredUsers:0,monthlyVisits:0,rentedProperties:0,previousMonthProperties:0,previousMonthUsers:0,previousMonthRented:0}),[t,n]=x.useState([]),[c,o]=x.useState(!0);x.useEffect(()=>{i()},[s]);const i=async()=>{try{o(!0);const{data:m,error:h}=await T.from("cities").select("*").eq("is_active",!0);if(h)throw h;const{data:d,error:g}=await T.from("properties").select("id, created_at, status, city");if(g)throw g;const{data:u,error:v}=await T.from("profiles").select("id, created_at");if(v)throw v;const{count:p,error:_}=await T.from("property_views").select("property_id, properties!inner(status, hidden_by_admin)",{count:"exact",head:!0}).eq("properties.status","available").neq("properties.hidden_by_admin",!0);if(_)throw _;const f=new Date,N=new Date(f.getFullYear(),f.getMonth(),1),y=new Date(f.getFullYear(),f.getMonth()-1,1),w=(d==null?void 0:d.length)||0,M=(u==null?void 0:u.length)||0,k=(d==null?void 0:d.filter(H=>H.status==="rented"||H.status==="pending").length)||0,b=(d==null?void 0:d.filter(H=>new Date(H.created_at)>=N).length)||0,I=(d==null?void 0:d.filter(H=>new Date(H.created_at)>=y&&new Date(H.created_at)<N).length)||0,A=(u==null?void 0:u.filter(H=>new Date(H.created_at)>=N).length)||0,ne=(u==null?void 0:u.filter(H=>new Date(H.created_at)>=y&&new Date(H.created_at)<N).length)||0,ie={};d==null||d.forEach(H=>{if(H.city){const he=m==null?void 0:m.find(U=>U.id===H.city);if(he){const U=Ze(he,s);ie[U]=(ie[U]||0)+1}else ie[H.city]=(ie[H.city]||0)+1}});const W=Object.entries(ie).map(([H,he])=>({city:H,properties:he,percentage:w>0?Math.round(he/w*100):0})).sort((H,he)=>he.properties-H.properties).slice(0,6);r({totalProperties:w,registeredUsers:M,monthlyVisits:p||0,rentedProperties:k,previousMonthProperties:I,previousMonthUsers:ne,previousMonthRented:k}),n(W)}catch(m){console.error("Error fetching admin stats:",m)}finally{o(!1)}};return{stats:a,cityStats:t,loading:c,calculatePercentageChange:(m,h)=>{if(h===0)return m>0?"+100%":"0%";const d=(m-h)/h*100;return d>=0?`+${Math.round(d)}%`:`${Math.round(d)}%`},refreshStats:i}},Tn=()=>{const{currentLanguage:s}=F(),{stats:a,cityStats:r,loading:t,calculatePercentageChange:n}=An();if(t)return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(o=>e.jsxs(P,{className:"animate-pulse",children:[e.jsxs($,{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"})]}),e.jsx(R,{children:e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})})]},o))})});const c=[{title:s==="ar"?"إجمالي العقارات":"Total Properties",value:a.totalProperties.toLocaleString(),change:n(a.totalProperties,a.previousMonthProperties),icon:Me,color:"bg-blue-500"},{title:s==="ar"?"المستخدمين المسجلين":"Registered Users",value:a.registeredUsers.toLocaleString(),change:n(a.registeredUsers,a.previousMonthUsers),icon:Qe,color:"bg-green-500"},{title:s==="ar"?"عدد المشاهدات الكلي":"Total Views",value:a.monthlyVisits.toLocaleString(),change:"+15%",icon:ge,color:"bg-purple-500"},{title:s==="ar"?"العقارات المؤجرة":"Rented Properties",value:a.rentedProperties.toLocaleString(),change:n(a.rentedProperties,a.previousMonthRented),icon:ba,color:"bg-orange-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map((o,i)=>{const l=o.icon;return e.jsxs(P,{className:"relative overflow-hidden",children:[e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(O,{className:"text-sm font-medium text-gray-600",children:o.title}),e.jsx("div",{className:`w-8 h-8 ${o.color} rounded-lg flex items-center justify-center`,children:e.jsx(l,{className:"w-4 h-4 text-white"})})]}),e.jsxs(R,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:o.value}),e.jsxs("p",{className:`text-xs font-medium ${o.change.startsWith("+")?"text-green-600":o.change.startsWith("-")?"text-red-600":"text-gray-600"}`,children:[o.change," ",s==="ar"?"من الشهر الماضي":"from last month"]})]})]},i)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(as,{className:"w-5 h-5"}),s==="ar"?"توزيع العقارات حسب المدينة":"Property Distribution by City"]}),e.jsx(q,{children:s==="ar"?"عدد العقارات في كل مدينة":"Number of properties in each city"})]}),e.jsx(R,{children:e.jsx("div",{className:"space-y-4",children:r.length>0?r.map((o,i)=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:o.city}),e.jsx("span",{className:"text-sm text-gray-600",children:o.properties})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${o.percentage}%`}})})]})},i)):e.jsx("div",{className:"text-center text-gray-500 py-4",children:s==="ar"?"لا توجد بيانات متاحة":"No data available"})})})]}),e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(da,{className:"w-5 h-5"}),s==="ar"?"نشاط الموقع الأخير":"Recent Site Activity"]}),e.jsx(q,{children:s==="ar"?"آخر الأنشطة على الموقع":"Latest activities on the website"})]}),e.jsx(R,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm",children:s==="ar"?`تم إنشاء ${a.totalProperties} عقار`:`${a.totalProperties} properties created`}),e.jsx("span",{className:"text-xs text-gray-500",children:s==="ar"?"الإجمالي":"Total"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm",children:s==="ar"?`${a.registeredUsers} مستخدم مسجل`:`${a.registeredUsers} registered users`}),e.jsx("span",{className:"text-xs text-gray-500",children:s==="ar"?"الإجمالي":"Total"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm",children:s==="ar"?`${a.rentedProperties} عقار مؤجر`:`${a.rentedProperties} rented properties`}),e.jsx("span",{className:"text-xs text-gray-500",children:s==="ar"?"نشط":"Active"})]})]})})]})]})]})};var Fn="DismissableLayer",Is="dismissableLayer.update",Dn="dismissableLayer.pointerDownOutside",Pn="dismissableLayer.focusOutside",ra,Pa=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ra=x.forwardRef((s,a)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:t,onPointerDownOutside:n,onFocusOutside:c,onInteractOutside:o,onDismiss:i,...l}=s,m=x.useContext(Pa),[h,d]=x.useState(null),g=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,u]=x.useState({}),v=Se(a,b=>d(b)),p=Array.from(m.layers),[_]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),f=p.indexOf(_),N=h?p.indexOf(h):-1,y=m.layersWithOutsidePointerEventsDisabled.size>0,w=N>=f,M=Ln(b=>{const I=b.target,A=[...m.branches].some(ne=>ne.contains(I));!w||A||(n==null||n(b),o==null||o(b),b.defaultPrevented||i==null||i())},g),k=Un(b=>{const I=b.target;[...m.branches].some(ne=>ne.contains(I))||(c==null||c(b),o==null||o(b),b.defaultPrevented||i==null||i())},g);return Or(b=>{N===m.layers.size-1&&(t==null||t(b),!b.defaultPrevented&&i&&(b.preventDefault(),i()))},g),x.useEffect(()=>{if(h)return r&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(ra=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(h)),m.layers.add(h),ta(),()=>{r&&m.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=ra)}},[h,g,r,m]),x.useEffect(()=>()=>{h&&(m.layers.delete(h),m.layersWithOutsidePointerEventsDisabled.delete(h),ta())},[h,m]),x.useEffect(()=>{const b=()=>u({});return document.addEventListener(Is,b),()=>document.removeEventListener(Is,b)},[]),e.jsx(ve.div,{...l,ref:v,style:{pointerEvents:y?w?"auto":"none":void 0,...s.style},onFocusCapture:pe(s.onFocusCapture,k.onFocusCapture),onBlurCapture:pe(s.onBlurCapture,k.onBlurCapture),onPointerDownCapture:pe(s.onPointerDownCapture,M.onPointerDownCapture)})});Ra.displayName=Fn;var Rn="DismissableLayerBranch",Mn=x.forwardRef((s,a)=>{const r=x.useContext(Pa),t=x.useRef(null),n=Se(a,t);return x.useEffect(()=>{const c=t.current;if(c)return r.branches.add(c),()=>{r.branches.delete(c)}},[r.branches]),e.jsx(ve.div,{...s,ref:n})});Mn.displayName=Rn;function Ln(s,a=globalThis==null?void 0:globalThis.document){const r=ma(s),t=x.useRef(!1),n=x.useRef(()=>{});return x.useEffect(()=>{const c=i=>{if(i.target&&!t.current){let l=function(){Ma(Dn,r,m,{discrete:!0})};const m={originalEvent:i};i.pointerType==="touch"?(a.removeEventListener("click",n.current),n.current=l,a.addEventListener("click",n.current,{once:!0})):l()}else a.removeEventListener("click",n.current);t.current=!1},o=window.setTimeout(()=>{a.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(o),a.removeEventListener("pointerdown",c),a.removeEventListener("click",n.current)}},[a,r]),{onPointerDownCapture:()=>t.current=!0}}function Un(s,a=globalThis==null?void 0:globalThis.document){const r=ma(s),t=x.useRef(!1);return x.useEffect(()=>{const n=c=>{c.target&&!t.current&&Ma(Pn,r,{originalEvent:c},{discrete:!1})};return a.addEventListener("focusin",n),()=>a.removeEventListener("focusin",n)},[a,r]),{onFocusCapture:()=>t.current=!0,onBlurCapture:()=>t.current=!1}}function ta(){const s=new CustomEvent(Is);document.dispatchEvent(s)}function Ma(s,a,r,{discrete:t}){const n=r.originalEvent.target,c=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:r});a&&n.addEventListener(s,a,{once:!0}),t?zr(n,c):n.dispatchEvent(c)}var $n="Portal",La=x.forwardRef((s,a)=>{var i;const{container:r,...t}=s,[n,c]=x.useState(!1);Vr(()=>c(!0),[]);const o=r||n&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return o?qr.createPortal(e.jsx(ve.div,{...t,ref:a}),o):null});La.displayName=$n;var Ps=0;function In(){x.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??na()),document.body.insertAdjacentElement("beforeend",s[1]??na()),Ps++,()=>{Ps===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(a=>a.remove()),Ps--}},[])}function na(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",s}var Ua=Gr(),Rs=function(){},As=x.forwardRef(function(s,a){var r=x.useRef(null),t=x.useState({onScrollCapture:Rs,onWheelCapture:Rs,onTouchMoveCapture:Rs}),n=t[0],c=t[1],o=s.forwardProps,i=s.children,l=s.className,m=s.removeScrollBar,h=s.enabled,d=s.shards,g=s.sideCar,u=s.noIsolation,v=s.inert,p=s.allowPinchZoom,_=s.as,f=_===void 0?"div":_,N=s.gapMode,y=Wr(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=g,M=Hr([r,a]),k=We(We({},y),n);return x.createElement(x.Fragment,null,h&&x.createElement(w,{sideCar:Ua,removeScrollBar:m,shards:d,noIsolation:u,inert:v,setCallbacks:c,allowPinchZoom:!!p,lockRef:r,gapMode:N}),o?x.cloneElement(x.Children.only(i),We(We({},k),{ref:M})):x.createElement(f,We({},k,{className:l,ref:M}),i))});As.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};As.classNames={fullWidth:Yr,zeroRight:Kr};var Bs=!1;if(typeof window<"u")try{var ms=Object.defineProperty({},"passive",{get:function(){return Bs=!0,!0}});window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{Bs=!1}var qe=Bs?{passive:!1}:!1,Bn=function(s){return s.tagName==="TEXTAREA"},$a=function(s,a){var r=window.getComputedStyle(s);return r[a]!=="hidden"&&!(r.overflowY===r.overflowX&&!Bn(s)&&r[a]==="visible")},On=function(s){return $a(s,"overflowY")},zn=function(s){return $a(s,"overflowX")},ia=function(s,a){var r=a.ownerDocument,t=a;do{typeof ShadowRoot<"u"&&t instanceof ShadowRoot&&(t=t.host);var n=Ia(s,t);if(n){var c=Ba(s,t),o=c[1],i=c[2];if(o>i)return!0}t=t.parentNode}while(t&&t!==r.body);return!1},Vn=function(s){var a=s.scrollTop,r=s.scrollHeight,t=s.clientHeight;return[a,r,t]},qn=function(s){var a=s.scrollLeft,r=s.scrollWidth,t=s.clientWidth;return[a,r,t]},Ia=function(s,a){return s==="v"?On(a):zn(a)},Ba=function(s,a){return s==="v"?Vn(a):qn(a)},Gn=function(s,a){return s==="h"&&a==="rtl"?-1:1},Wn=function(s,a,r,t,n){var c=Gn(s,window.getComputedStyle(a).direction),o=c*t,i=r.target,l=a.contains(i),m=!1,h=o>0,d=0,g=0;do{var u=Ba(s,i),v=u[0],p=u[1],_=u[2],f=p-_-c*v;(v||f)&&Ia(s,i)&&(d+=f,g+=v),i instanceof ShadowRoot?i=i.host:i=i.parentNode}while(!l&&i!==document.body||l&&(a.contains(i)||a===i));return(h&&(Math.abs(d)<1||!n)||!h&&(Math.abs(g)<1||!n))&&(m=!0),m},hs=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},la=function(s){return[s.deltaX,s.deltaY]},ca=function(s){return s&&"current"in s?s.current:s},Hn=function(s,a){return s[0]===a[0]&&s[1]===a[1]},Yn=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},Kn=0,Ge=[];function Xn(s){var a=x.useRef([]),r=x.useRef([0,0]),t=x.useRef(),n=x.useState(Kn++)[0],c=x.useState(Xr)[0],o=x.useRef(s);x.useEffect(function(){o.current=s},[s]),x.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(n));var p=Jr([s.lockRef.current],(s.shards||[]).map(ca),!0).filter(Boolean);return p.forEach(function(_){return _.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),p.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(n))})}}},[s.inert,s.lockRef.current,s.shards]);var i=x.useCallback(function(p,_){if("touches"in p&&p.touches.length===2)return!o.current.allowPinchZoom;var f=hs(p),N=r.current,y="deltaX"in p?p.deltaX:N[0]-f[0],w="deltaY"in p?p.deltaY:N[1]-f[1],M,k=p.target,b=Math.abs(y)>Math.abs(w)?"h":"v";if("touches"in p&&b==="h"&&k.type==="range")return!1;var I=ia(b,k);if(!I)return!0;if(I?M=b:(M=b==="v"?"h":"v",I=ia(b,k)),!I)return!1;if(!t.current&&"changedTouches"in p&&(y||w)&&(t.current=M),!M)return!0;var A=t.current||M;return Wn(A,_,p,A==="h"?y:w,!0)},[]),l=x.useCallback(function(p){var _=p;if(!(!Ge.length||Ge[Ge.length-1]!==c)){var f="deltaY"in _?la(_):hs(_),N=a.current.filter(function(M){return M.name===_.type&&(M.target===_.target||_.target===M.shadowParent)&&Hn(M.delta,f)})[0];if(N&&N.should){_.cancelable&&_.preventDefault();return}if(!N){var y=(o.current.shards||[]).map(ca).filter(Boolean).filter(function(M){return M.contains(_.target)}),w=y.length>0?i(_,y[0]):!o.current.noIsolation;w&&_.cancelable&&_.preventDefault()}}},[]),m=x.useCallback(function(p,_,f,N){var y={name:p,delta:_,target:f,should:N,shadowParent:Jn(f)};a.current.push(y),setTimeout(function(){a.current=a.current.filter(function(w){return w!==y})},1)},[]),h=x.useCallback(function(p){r.current=hs(p),t.current=void 0},[]),d=x.useCallback(function(p){m(p.type,la(p),p.target,i(p,s.lockRef.current))},[]),g=x.useCallback(function(p){m(p.type,hs(p),p.target,i(p,s.lockRef.current))},[]);x.useEffect(function(){return Ge.push(c),s.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:g}),document.addEventListener("wheel",l,qe),document.addEventListener("touchmove",l,qe),document.addEventListener("touchstart",h,qe),function(){Ge=Ge.filter(function(p){return p!==c}),document.removeEventListener("wheel",l,qe),document.removeEventListener("touchmove",l,qe),document.removeEventListener("touchstart",h,qe)}},[]);var u=s.removeScrollBar,v=s.inert;return x.createElement(x.Fragment,null,v?x.createElement(c,{styles:Yn(n)}):null,u?x.createElement(Zr,{gapMode:s.gapMode}):null)}function Jn(s){for(var a=null;s!==null;)s instanceof ShadowRoot&&(a=s.host,s=s.host),s=s.parentNode;return a}const Zn=Qr(Ua,Xn);var Oa=x.forwardRef(function(s,a){return x.createElement(As,We({},s,{ref:a,sideCar:Zn}))});Oa.classNames=As.classNames;var Ws="Dialog",[za,Va]=_s(Ws),[Qn,fe]=za(Ws),qa=s=>{const{__scopeDialog:a,children:r,open:t,defaultOpen:n,onOpenChange:c,modal:o=!0}=s,i=x.useRef(null),l=x.useRef(null),[m=!1,h]=ha({prop:t,defaultProp:n,onChange:c});return e.jsx(Qn,{scope:a,triggerRef:i,contentRef:l,contentId:Fs(),titleId:Fs(),descriptionId:Fs(),open:m,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(d=>!d),[h]),modal:o,children:r})};qa.displayName=Ws;var Ga="DialogTrigger",Wa=x.forwardRef((s,a)=>{const{__scopeDialog:r,...t}=s,n=fe(Ga,r),c=Se(a,n.triggerRef);return e.jsx(ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Ks(n.open),...t,ref:c,onClick:pe(s.onClick,n.onOpenToggle)})});Wa.displayName=Ga;var Hs="DialogPortal",[ei,Ha]=za(Hs,{forceMount:void 0}),Ya=s=>{const{__scopeDialog:a,forceMount:r,children:t,container:n}=s,c=fe(Hs,a);return e.jsx(ei,{scope:a,forceMount:r,children:x.Children.map(t,o=>e.jsx(bs,{present:r||c.open,children:e.jsx(La,{asChild:!0,container:n,children:o})}))})};Ya.displayName=Hs;var ys="DialogOverlay",Ka=x.forwardRef((s,a)=>{const r=Ha(ys,s.__scopeDialog),{forceMount:t=r.forceMount,...n}=s,c=fe(ys,s.__scopeDialog);return c.modal?e.jsx(bs,{present:t||c.open,children:e.jsx(si,{...n,ref:a})}):null});Ka.displayName=ys;var si=x.forwardRef((s,a)=>{const{__scopeDialog:r,...t}=s,n=fe(ys,r);return e.jsx(Oa,{as:et,allowPinchZoom:!0,shards:[n.contentRef],children:e.jsx(ve.div,{"data-state":Ks(n.open),...t,ref:a,style:{pointerEvents:"auto",...t.style}})})}),Ve="DialogContent",Xa=x.forwardRef((s,a)=>{const r=Ha(Ve,s.__scopeDialog),{forceMount:t=r.forceMount,...n}=s,c=fe(Ve,s.__scopeDialog);return e.jsx(bs,{present:t||c.open,children:c.modal?e.jsx(ai,{...n,ref:a}):e.jsx(ri,{...n,ref:a})})});Xa.displayName=Ve;var ai=x.forwardRef((s,a)=>{const r=fe(Ve,s.__scopeDialog),t=x.useRef(null),n=Se(a,r.contentRef,t);return x.useEffect(()=>{const c=t.current;if(c)return st(c)},[]),e.jsx(Ja,{...s,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(s.onCloseAutoFocus,c=>{var o;c.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pe(s.onPointerDownOutside,c=>{const o=c.detail.originalEvent,i=o.button===0&&o.ctrlKey===!0;(o.button===2||i)&&c.preventDefault()}),onFocusOutside:pe(s.onFocusOutside,c=>c.preventDefault())})}),ri=x.forwardRef((s,a)=>{const r=fe(Ve,s.__scopeDialog),t=x.useRef(!1),n=x.useRef(!1);return e.jsx(Ja,{...s,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{var o,i;(o=s.onCloseAutoFocus)==null||o.call(s,c),c.defaultPrevented||(t.current||(i=r.triggerRef.current)==null||i.focus(),c.preventDefault()),t.current=!1,n.current=!1},onInteractOutside:c=>{var l,m;(l=s.onInteractOutside)==null||l.call(s,c),c.defaultPrevented||(t.current=!0,c.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const o=c.target;((m=r.triggerRef.current)==null?void 0:m.contains(o))&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&n.current&&c.preventDefault()}})}),Ja=x.forwardRef((s,a)=>{const{__scopeDialog:r,trapFocus:t,onOpenAutoFocus:n,onCloseAutoFocus:c,...o}=s,i=fe(Ve,r),l=x.useRef(null),m=Se(a,l);return In(),e.jsxs(e.Fragment,{children:[e.jsx(at,{asChild:!0,loop:!0,trapped:t,onMountAutoFocus:n,onUnmountAutoFocus:c,children:e.jsx(Ra,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":Ks(i.open),...o,ref:m,onDismiss:()=>i.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(ni,{titleId:i.titleId}),e.jsx(li,{contentRef:l,descriptionId:i.descriptionId})]})]})}),Ys="DialogTitle",Za=x.forwardRef((s,a)=>{const{__scopeDialog:r,...t}=s,n=fe(Ys,r);return e.jsx(ve.h2,{id:n.titleId,...t,ref:a})});Za.displayName=Ys;var Qa="DialogDescription",er=x.forwardRef((s,a)=>{const{__scopeDialog:r,...t}=s,n=fe(Qa,r);return e.jsx(ve.p,{id:n.descriptionId,...t,ref:a})});er.displayName=Qa;var sr="DialogClose",ar=x.forwardRef((s,a)=>{const{__scopeDialog:r,...t}=s,n=fe(sr,r);return e.jsx(ve.button,{type:"button",...t,ref:a,onClick:pe(s.onClick,()=>n.onOpenChange(!1))})});ar.displayName=sr;function Ks(s){return s?"open":"closed"}var rr="DialogTitleWarning",[ti,tr]=rt(rr,{contentName:Ve,titleName:Ys,docsSlug:"dialog"}),ni=({titleId:s})=>{const a=tr(rr),r=`\`${a.contentName}\` requires a \`${a.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${a.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${a.docsSlug}`;return x.useEffect(()=>{s&&(document.getElementById(s)||console.error(r))},[r,s]),null},ii="DialogDescriptionWarning",li=({contentRef:s,descriptionId:a})=>{const t=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tr(ii).contentName}}.`;return x.useEffect(()=>{var c;const n=(c=s.current)==null?void 0:c.getAttribute("aria-describedby");a&&n&&(document.getElementById(a)||console.warn(t))},[t,s,a]),null},ci=qa,oi=Wa,di=Ya,mi=Ka,hi=Xa,ui=Za,xi=er,nr=ar,ir="AlertDialog",[pi,Gc]=_s(ir,[Va]),De=Va(),lr=s=>{const{__scopeAlertDialog:a,...r}=s,t=De(a);return e.jsx(ci,{...t,...r,modal:!0})};lr.displayName=ir;var gi="AlertDialogTrigger",cr=x.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...t}=s,n=De(r);return e.jsx(oi,{...n,...t,ref:a})});cr.displayName=gi;var ji="AlertDialogPortal",or=s=>{const{__scopeAlertDialog:a,...r}=s,t=De(a);return e.jsx(di,{...t,...r})};or.displayName=ji;var vi="AlertDialogOverlay",dr=x.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...t}=s,n=De(r);return e.jsx(mi,{...n,...t,ref:a})});dr.displayName=vi;var He="AlertDialogContent",[fi,yi]=pi(He),mr=x.forwardRef((s,a)=>{const{__scopeAlertDialog:r,children:t,...n}=s,c=De(r),o=x.useRef(null),i=Se(a,o),l=x.useRef(null);return e.jsx(ti,{contentName:He,titleName:hr,docsSlug:"alert-dialog",children:e.jsx(fi,{scope:r,cancelRef:l,children:e.jsxs(hi,{role:"alertdialog",...c,...n,ref:i,onOpenAutoFocus:pe(n.onOpenAutoFocus,m=>{var h;m.preventDefault(),(h=l.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:m=>m.preventDefault(),onInteractOutside:m=>m.preventDefault(),children:[e.jsx(tt,{children:t}),e.jsx(_i,{contentRef:o})]})})})});mr.displayName=He;var hr="AlertDialogTitle",ur=x.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...t}=s,n=De(r);return e.jsx(ui,{...n,...t,ref:a})});ur.displayName=hr;var xr="AlertDialogDescription",pr=x.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...t}=s,n=De(r);return e.jsx(xi,{...n,...t,ref:a})});pr.displayName=xr;var Ni="AlertDialogAction",gr=x.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...t}=s,n=De(r);return e.jsx(nr,{...n,...t,ref:a})});gr.displayName=Ni;var jr="AlertDialogCancel",vr=x.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...t}=s,{cancelRef:n}=yi(jr,r),c=De(r),o=Se(a,n);return e.jsx(nr,{...c,...t,ref:o})});vr.displayName=jr;var _i=({contentRef:s})=>{const a=`\`${He}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${He}\` by passing a \`${xr}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${He}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var t;document.getElementById((t=s.current)==null?void 0:t.getAttribute("aria-describedby"))||console.warn(a)},[a,s]),null},bi=lr,wi=cr,Ci=or,fr=dr,yr=mr,Nr=gr,_r=vr,br=ur,wr=pr;const Ts=bi,Xs=wi,Si=Ci,Cr=x.forwardRef(({className:s,...a},r)=>e.jsx(fr,{className:be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:r}));Cr.displayName=fr.displayName;const ts=x.forwardRef(({className:s,...a},r)=>e.jsxs(Si,{children:[e.jsx(Cr,{}),e.jsx(yr,{ref:r,className:be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]}));ts.displayName=yr.displayName;const ns=({className:s,...a})=>e.jsx("div",{className:be("flex flex-col space-y-2 text-center sm:text-left",s),...a});ns.displayName="AlertDialogHeader";const is=({className:s,...a})=>e.jsx("div",{className:be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});is.displayName="AlertDialogFooter";const ls=x.forwardRef(({className:s,...a},r)=>e.jsx(br,{ref:r,className:be("text-lg font-semibold",s),...a}));ls.displayName=br.displayName;const cs=x.forwardRef(({className:s,...a},r)=>e.jsx(wr,{ref:r,className:be("text-sm text-muted-foreground",s),...a}));cs.displayName=wr.displayName;const os=x.forwardRef(({className:s,...a},r)=>e.jsx(Nr,{ref:r,className:be(ua(),s),...a}));os.displayName=Nr.displayName;const ds=x.forwardRef(({className:s,...a},r)=>e.jsx(_r,{ref:r,className:be(ua({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));ds.displayName=_r.displayName;const oa=({reportTypes:s,category:a,loading:r,onEdit:t,onRefresh:n})=>{const{currentLanguage:c}=F(),{toast:o}=se(),{updatePropertyReportType:i,updateUserReportType:l,deletePropertyReportType:m,deleteUserReportType:h}=Vs(),[d,g]=x.useState(null),u=async f=>{(await(a==="property"?i:l)(f.id,{is_active:!f.is_active})).success?(o({title:c==="ar"?"تم التحديث":"Updated",description:c==="ar"?"تم تحديث حالة النوع بنجاح":"Report type status updated successfully"}),n()):o({title:c==="ar"?"خطأ":"Error",description:c==="ar"?"حدث خطأ أثناء التحديث":"An error occurred while updating",variant:"destructive"})},v=async f=>{g(f),(await(a==="property"?m:h)(f)).success?(o({title:c==="ar"?"تم الحذف":"Deleted",description:c==="ar"?"تم حذف النوع بنجاح":"Report type deleted successfully"}),n()):o({title:c==="ar"?"خطأ":"Error",description:c==="ar"?"حدث خطأ أثناء الحذف":"An error occurred while deleting",variant:"destructive"}),g(null)},p=f=>c==="ar"?f.name_ar:c==="tr"?f.name_tr:f.name_en,_=f=>c==="ar"?f.description_ar:c==="tr"?f.description_tr:f.description_en;return r?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-brand-accent border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:c==="ar"?"جارٍ التحميل...":"Loading..."})]}):e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:c==="ar"?"لا توجد أنواع بلاغات":"No report types found"})}):e.jsxs(ke,{children:[e.jsx(Ee,{children:e.jsxs(ee,{children:[e.jsx(L,{children:c==="ar"?"الترتيب":c==="tr"?"Sıra":"Order"}),e.jsx(L,{children:c==="ar"?"الاسم":c==="tr"?"İsim":"Name"}),e.jsx(L,{children:c==="ar"?"الوصف":c==="tr"?"Açıklama":"Description"}),e.jsx(L,{children:c==="ar"?"الحالة":c==="tr"?"Durum":"Status"}),e.jsx(L,{children:c==="ar"?"الإجراءات":c==="tr"?"İşlemler":"Actions"})]})}),e.jsx(Ae,{children:s.map(f=>e.jsxs(ee,{children:[e.jsx(D,{children:f.display_order}),e.jsx(D,{className:"font-medium",children:p(f)}),e.jsx(D,{className:"max-w-xs truncate",children:_(f)||"-"}),e.jsx(D,{children:e.jsx(G,{variant:f.is_active?"default":"secondary",className:"flex items-center gap-1 w-fit",children:f.is_active?e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-3 h-3"}),c==="ar"?"نشط":c==="tr"?"Aktif":"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"w-3 h-3"}),c==="ar"?"غير نشط":c==="tr"?"Pasif":"Inactive"]})})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:"sm",variant:"outline",onClick:()=>t(f),children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>u(f),children:f.is_active?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(ge,{className:"w-4 h-4"})}),e.jsxs(Ts,{children:[e.jsx(Xs,{asChild:!0,children:e.jsx(S,{size:"sm",variant:"destructive",disabled:d===f.id,children:e.jsx(me,{className:"w-4 h-4"})})}),e.jsxs(ts,{children:[e.jsxs(ns,{children:[e.jsx(ls,{children:c==="ar"?"تأكيد الحذف":"Confirm Delete"}),e.jsx(cs,{children:c==="ar"?"هل أنت متأكد من حذف هذا النوع؟ لا يمكن التراجع عن هذا الإجراء.":"Are you sure you want to delete this type? This action cannot be undone."})]}),e.jsxs(is,{children:[e.jsx(ds,{children:c==="ar"?"إلغاء":"Cancel"}),e.jsx(os,{onClick:()=>v(f.id),className:"bg-red-600 hover:bg-red-700",children:c==="ar"?"حذف":"Delete"})]})]})]})]})})]},f.id))})]})})},ki=({reportType:s,category:a,onClose:r})=>{const{currentLanguage:t}=F(),{toast:n}=se(),{createPropertyReportType:c,createUserReportType:o,updatePropertyReportType:i,updateUserReportType:l,loading:m}=Vs(),[h,d]=x.useState({name_ar:"",name_en:"",name_tr:"",description_ar:"",description_en:"",description_tr:"",is_active:!0,display_order:0});x.useEffect(()=>{s&&d({name_ar:s.name_ar||"",name_en:s.name_en||"",name_tr:s.name_tr||"",description_ar:s.description_ar||"",description_en:s.description_en||"",description_tr:s.description_tr||"",is_active:s.is_active,display_order:s.display_order})},[s]);const g=async u=>{if(u.preventDefault(),!h.name_ar||!h.name_en||!h.name_tr){n({title:t==="ar"?"خطأ":"Error",description:t==="ar"?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields",variant:"destructive"});return}let v;s?v=await(a==="property"?i:l)(s.id,h):v=await(a==="property"?c:o)(h),v.success?(n({title:t==="ar"?"تم الحفظ":"Saved",description:t==="ar"?s?"تم تحديث النوع بنجاح":"تم إنشاء النوع بنجاح":s?"Report type updated successfully":"Report type created successfully"}),r()):n({title:t==="ar"?"خطأ":"Error",description:t==="ar"?"حدث خطأ أثناء الحفظ":"An error occurred while saving",variant:"destructive"})};return e.jsxs(P,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:r,children:e.jsx(wt,{className:"w-4 h-4"})}),e.jsx(O,{children:s?t==="ar"?"تعديل نوع البلاغ":"Edit Report Type":t==="ar"?"إضافة نوع بلاغ جديد":"Add New Report Type"})]})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs(Te,{defaultValue:"ar",className:"w-full",children:[e.jsxs(Fe,{className:"grid w-full grid-cols-3",children:[e.jsx(ae,{value:"ar",children:"العربية"}),e.jsx(ae,{value:"en",children:"English"}),e.jsx(ae,{value:"tr",children:"Türkçe"})]}),e.jsxs(re,{value:"ar",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"name_ar",children:"الاسم بالعربية *"}),e.jsx(C,{id:"name_ar",value:h.name_ar,onChange:u=>d(v=>({...v,name_ar:u.target.value})),placeholder:"أدخل اسم النوع بالعربية",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"description_ar",children:"الوصف بالعربية"}),e.jsx(V,{id:"description_ar",value:h.description_ar,onChange:u=>d(v=>({...v,description_ar:u.target.value})),placeholder:"أدخل وصف النوع بالعربية",rows:3})]})]}),e.jsxs(re,{value:"en",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"name_en",children:"Name in English *"}),e.jsx(C,{id:"name_en",value:h.name_en,onChange:u=>d(v=>({...v,name_en:u.target.value})),placeholder:"Enter type name in English",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"description_en",children:"Description in English"}),e.jsx(V,{id:"description_en",value:h.description_en,onChange:u=>d(v=>({...v,description_en:u.target.value})),placeholder:"Enter type description in English",rows:3})]})]}),e.jsxs(re,{value:"tr",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"name_tr",children:"Türkçe Adı *"}),e.jsx(C,{id:"name_tr",value:h.name_tr,onChange:u=>d(v=>({...v,name_tr:u.target.value})),placeholder:"Türkçe tür adını girin",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"description_tr",children:"Türkçe Açıklama"}),e.jsx(V,{id:"description_tr",value:h.description_tr,onChange:u=>d(v=>({...v,description_tr:u.target.value})),placeholder:"Türkçe tür açıklamasını girin",rows:3})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"display_order",children:t==="ar"?"ترتيب العرض":"Display Order"}),e.jsx(C,{id:"display_order",type:"number",value:h.display_order,onChange:u=>d(v=>({...v,display_order:parseInt(u.target.value)||0})),placeholder:"0",min:"0"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"is_active",checked:h.is_active,onCheckedChange:u=>d(v=>({...v,is_active:u}))}),e.jsx(j,{htmlFor:"is_active",children:t==="ar"?"نشط":"Active"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(S,{type:"submit",disabled:m,className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),m?t==="ar"?"جارٍ الحفظ...":"Saving...":t==="ar"?"حفظ":"Save"]}),e.jsx(S,{type:"button",variant:"outline",onClick:r,disabled:m,children:t==="ar"?"إلغاء":"Cancel"})]})]})})]})},Ei=()=>{const{currentLanguage:s}=F(),{propertyReportTypes:a,userReportTypes:r,loading:t,fetchAllPropertyReportTypes:n,fetchAllUserReportTypes:c}=Vs();xa();const[o,i]=x.useState(!1),[l,m]=x.useState(null),[h,d]=x.useState("property"),g=_=>{d(_),m(null),i(!0)},u=(_,f)=>{d(f),m(_),i(!0)},v=()=>{i(!1),m(null),n(),c()},p=()=>{n(),c()};return e.jsx("div",{className:"space-y-6",dir:s==="ar"?"rtl":"ltr",children:e.jsxs(P,{children:[e.jsxs($,{children:[e.jsx(O,{children:s==="ar"?"إدارة أنواع البلاغات":s==="tr"?"Şikayet Türü Yönetimi":"Report Types Management"}),e.jsx(q,{children:s==="ar"?"إضافة وتعديل وحذف أنواع البلاغات للعقارات والمستخدمين":s==="tr"?"Emlak ve kullanıcılar için şikayet türlerini ekleyin, düzenleyin ve silin":"Add, edit and delete report types for properties and users"})]}),e.jsx(R,{children:o?e.jsx(ki,{reportType:l,category:h,onClose:v}):e.jsxs(Te,{defaultValue:"property",className:"w-full",children:[e.jsxs(Fe,{className:"grid w-full grid-cols-2",children:[e.jsxs(ae,{value:"property",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4"}),s==="ar"?"بلاغات العقارات":s==="tr"?"Emlak Şikayetleri":"Property Reports"]}),e.jsxs(ae,{value:"user",className:"flex items-center gap-2",children:[e.jsx(pa,{className:"w-4 h-4"}),s==="ar"?"بلاغات المستخدمين":s==="tr"?"Kullanıcı Şikayetleri":"User Reports"]})]}),e.jsxs(re,{value:"property",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s==="ar"?"أنواع بلاغات العقارات":s==="tr"?"Emlak Şikayet Türleri":"Property Report Types"}),e.jsxs(S,{onClick:()=>g("property"),className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),s==="ar"?"إضافة نوع جديد":s==="tr"?"Yeni Tür Ekle":"Add New Type"]})]}),e.jsx(oa,{reportTypes:a,category:"property",loading:t,onEdit:_=>u(_,"property"),onRefresh:p})]}),e.jsxs(re,{value:"user",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s==="ar"?"أنواع بلاغات المستخدمين":s==="tr"?"Kullanıcı Şikayet Türleri":"User Report Types"}),e.jsxs(S,{onClick:()=>g("user"),className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),s==="ar"?"إضافة نوع جديد":s==="tr"?"Yeni Tür Ekle":"Add New Type"]})]}),e.jsx(oa,{reportTypes:r,category:"user",loading:t,onEdit:_=>u(_,"user"),onRefresh:p})]})]})})]})})},Ai=({formData:s,setFormData:a,handlePropertyTypeChange:r})=>{const{t,currentLanguage:n}=F(),{cities:c,districts:o,loading:i}=Xe(),{profile:l}=ga(),m=s.city?gs(s.city,o):[],h=(u,v)=>{a(p=>({...p,[u]:v}))},d=u=>{a(v=>({...v,is_student_housing:u,student_housing_gender:"unspecified"}))},g=(l==null?void 0:l.is_admin)===!0||(l==null?void 0:l.user_type)==="partner_and_site_owner"&&(l==null?void 0:l.is_admin)!==!1;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(P,{children:[e.jsx($,{children:e.jsx(O,{className:"text-lg",children:t("basicPropertyInformation")})}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(wa,{value:s.property_type,onChange:r,required:!0}),e.jsx(yt,{value:s.property_layout_id,onChange:u=>h("property_layout_id",u),propertyTypeId:s.property_type})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"city",children:t("cityRequired")}),e.jsxs(X,{value:s.city,onValueChange:u=>h("city",u),required:!0,children:[e.jsx(J,{id:"city",children:e.jsx(Z,{placeholder:t("selectCity")})}),e.jsx(Q,{children:c.map(u=>e.jsx(E,{value:u.id,children:Ze(u,n)},u.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"district",children:t("district")}),e.jsxs(X,{value:s.district,onValueChange:u=>h("district",u),disabled:!s.city,children:[e.jsx(J,{id:"district",children:e.jsx(Z,{placeholder:s.city?t("selectDistrict"):t("selectCityFirst")})}),e.jsx(Q,{children:m.map(u=>e.jsx(E,{value:u.id,children:_a(u,n)},u.id))})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"bedrooms",children:t("bedrooms")}),e.jsx(C,{id:"bedrooms",type:"number",min:"0",value:s.bedrooms,onChange:u=>h("bedrooms",u.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"bathrooms",children:t("bathrooms")}),e.jsx(C,{id:"bathrooms",type:"number",min:"0",value:s.bathrooms,onChange:u=>h("bathrooms",u.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"area",children:t("areaSqM")}),e.jsx(C,{id:"area",type:"number",min:"0",value:s.area,onChange:u=>h("area",u.target.value),placeholder:"0"})]})]})]})]}),e.jsxs(P,{children:[e.jsx($,{children:e.jsx(O,{className:"text-lg",children:t("pricingInformation")})}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"listing_type",children:t("listingTypeRequired")}),e.jsxs(X,{value:s.listing_type,onValueChange:u=>h("listing_type",u),required:!0,children:[e.jsx(J,{id:"listing_type",children:e.jsx(Z,{})}),e.jsxs(Q,{children:[e.jsx(E,{value:"rent",children:t("forRent")}),e.jsx(E,{value:"sale",children:t("forSale")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"status",children:t("status")}),e.jsxs(X,{value:s.status,onValueChange:u=>h("status",u),children:[e.jsx(J,{id:"status",children:e.jsx(Z,{})}),e.jsxs(Q,{children:[e.jsx(E,{value:"available",children:t("available")}),e.jsx(E,{value:"pending",children:t("hidden")}),e.jsx(E,{value:"rented",children:t("rented")}),e.jsx(E,{value:"sold",children:t("sold")})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"price",children:t("priceRequired")}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(C,{id:"price",type:"number",min:"0",step:"0.01",value:s.price,onChange:u=>h("price",u.target.value),placeholder:"0.00",className:"col-span-2",required:!0}),e.jsx(Ds,{value:s.currency,onValueChange:u=>h("currency",u)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"deposit",children:t("deposit")}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(C,{id:"deposit",type:"number",min:"0",step:"0.01",value:s.deposit,onChange:u=>h("deposit",u.target.value),placeholder:"0.00",className:"col-span-2"}),e.jsx(Ds,{value:s.deposit_currency,onValueChange:u=>h("deposit_currency",u)})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"commission",children:t("commission")}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(C,{id:"commission",type:"number",min:"0",step:"0.01",value:s.commission,onChange:u=>h("commission",u.target.value),placeholder:"0.00",className:"col-span-2"}),e.jsx(Ds,{value:s.commission_currency,onValueChange:u=>h("commission_currency",u)})]})]})})]})]}),e.jsxs(P,{children:[e.jsx($,{children:e.jsx(O,{className:"text-lg",children:t("studentHousingOptions")})}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Ce,{id:"is_student_housing",checked:s.is_student_housing,onCheckedChange:d}),e.jsx(j,{htmlFor:"is_student_housing",className:"cursor-pointer",children:t("studentHousing")}),s.is_student_housing&&e.jsx(G,{variant:"secondary",className:"ml-2",children:t("studentHousing")})]}),s.is_student_housing&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"student_housing_gender",children:t("studentHousingType")}),e.jsxs(X,{value:s.student_housing_gender,onValueChange:u=>h("student_housing_gender",u),children:[e.jsx(J,{id:"student_housing_gender",children:e.jsx(Z,{})}),e.jsxs(Q,{children:[e.jsx(E,{value:"male",children:t("maleOnly")}),e.jsx(E,{value:"female",children:t("femaleOnly")}),e.jsx(E,{value:"mixed",children:t("mixed")}),e.jsx(E,{value:"unspecified",children:t("unspecified")})]})]})]})]})]}),g&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Sa,{id:"is_featured",checked:s.is_featured,onCheckedChange:u=>a(v=>({...v,is_featured:!!u}))}),e.jsx(j,{htmlFor:"is_featured",children:t("featuredProperty")})]})]})},Ti=({formData:s,setFormData:a})=>{const{t:r}=F();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-right",children:r("arabic")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"title_ar",children:r("titleInArabicRequired")}),e.jsx(C,{id:"title_ar",value:s.title_ar,onChange:t=>a(n=>({...n,title_ar:t.target.value})),placeholder:"أدخل عنوان العقار بالعربية",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"description_ar",children:r("descriptionInArabic")}),e.jsx(V,{id:"description_ar",value:s.description_ar,onChange:t=>a(n=>({...n,description_ar:t.target.value})),placeholder:"أدخل وصف العقار بالعربية...",rows:3,dir:"rtl"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:r("english")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"title_en",children:r("titleInEnglishRequired")}),e.jsx(C,{id:"title_en",value:s.title_en,onChange:t=>a(n=>({...n,title_en:t.target.value})),placeholder:"Enter property title in English"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"description_en",children:r("descriptionInEnglish")}),e.jsx(V,{id:"description_en",value:s.description_en,onChange:t=>a(n=>({...n,description_en:t.target.value})),placeholder:"Enter property description in English...",rows:3})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:r("turkish")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"title_tr",children:r("titleInTurkishRequired")}),e.jsx(C,{id:"title_tr",value:s.title_tr,onChange:t=>a(n=>({...n,title_tr:t.target.value})),placeholder:"Türkçe mülk başlığını girin"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"description_tr",children:r("descriptionInTurkish")}),e.jsx(V,{id:"description_tr",value:s.description_tr,onChange:t=>a(n=>({...n,description_tr:t.target.value})),placeholder:"Türkçe mülk açıklamasını girin...",rows:3})]})]})]})]})},Fi=({onFilesChange:s,existingFiles:a=[]})=>{const{currentLanguage:r}=F(),{toast:t}=se(),[n,c]=x.useState([]),[o,i]=x.useState(!1),[l,m]=x.useState(a),h=v=>{const f=Array.from(v.target.files||[]).filter(N=>{const y=N.type.startsWith("image/"),w=N.type.startsWith("video/"),M=N.size<=50*1024*1024;return!y&&!w?(t({title:r==="ar"?"خطأ":"Error",description:r==="ar"?"يرجى اختيار صور أو فيديوهات فقط":"Please select images or videos only",variant:"destructive"}),!1):M?!0:(t({title:r==="ar"?"خطأ":"Error",description:r==="ar"?"حجم الملف يجب أن يكون أقل من 50 ميجابايت":"File size must be less than 50MB",variant:"destructive"}),!1)}).map(N=>({file:N,preview:URL.createObjectURL(N),type:N.type.startsWith("image/")?"image":"video"}));c(N=>[...N,...f])},d=v=>{c(p=>{const _=[...p];return URL.revokeObjectURL(_[v].preview),_.splice(v,1),_})},g=v=>{m(p=>{const _=p.filter(f=>f!==v);return s(_),_})},u=async()=>{if(n.length===0)return;i(!0);const v=[];try{for(const _ of n){const f=_.file.name.split(".").pop(),y=`properties/${`${Date.now()}-${Math.random().toString(36).substring(2)}.${f}`}`,{error:w}=await T.storage.from("property-media").upload(y,_.file);if(w)throw w;const{data:{publicUrl:M}}=T.storage.from("property-media").getPublicUrl(y);v.push(M)}const p=[...l,...v];m(p),s(p),n.forEach(_=>URL.revokeObjectURL(_.preview)),c([]),t({title:r==="ar"?"نجح":"Success",description:r==="ar"?"تم رفع الملفات بنجاح":"Files uploaded successfully"})}catch(p){console.error("Error uploading files:",p),t({title:r==="ar"?"خطأ":"Error",description:r==="ar"?"فشل في رفع الملفات":"Failed to upload files",variant:"destructive"})}finally{i(!1)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:r==="ar"?"الصور والفيديوهات":"Images and Videos"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:h,className:"hidden",id:"media-upload"}),e.jsxs("label",{htmlFor:"media-upload",className:"cursor-pointer",children:[e.jsx(Ye,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:r==="ar"?"اضغط لاختيار الصور والفيديوهات أو اسحبها هنا":"Click to select images and videos or drag them here"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r==="ar"?"الحد الأقصى 50 ميجابايت لكل ملف":"Max 50MB per file"})]})]})]}),n.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium",children:r==="ar"?"الملفات المختارة":"Selected Files"}),e.jsx(S,{onClick:u,disabled:o,size:"sm",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),r==="ar"?"جارٍ الرفع...":"Uploading..."]}):r==="ar"?"رفع الملفات":"Upload Files"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map((v,p)=>e.jsxs("div",{className:"relative group",children:[v.type==="image"?e.jsx("img",{src:v.preview,alt:"Preview",className:"w-full h-24 object-cover rounded border"}):e.jsx("div",{className:"w-full h-24 bg-gray-100 rounded border flex items-center justify-center",children:e.jsx(aa,{className:"w-8 h-8 text-gray-400"})}),e.jsx(S,{size:"sm",variant:"destructive",className:"absolute top-1 right-1 w-6 h-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>d(p),children:e.jsx(Be,{className:"w-3 h-3"})})]},p))})]}),l.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:r==="ar"?"الملفات المرفوعة":"Uploaded Files"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:l.map((v,p)=>e.jsxs("div",{className:"relative group",children:[v.match(/\.(jpg|jpeg|png|gif|webp)$/i)?e.jsx("img",{src:v,alt:"Uploaded",className:"w-full h-24 object-cover rounded border"}):e.jsx("div",{className:"w-full h-24 bg-gray-100 rounded border flex items-center justify-center",children:e.jsx(aa,{className:"w-8 h-8 text-gray-400"})}),e.jsx(S,{size:"sm",variant:"destructive",className:"absolute top-1 right-1 w-6 h-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>g(v),children:e.jsx(Be,{className:"w-3 h-3"})})]},p))})]})]})},Di=({onImageChange:s,currentImage:a})=>{const{currentLanguage:r}=F(),{toast:t}=se(),[n,c]=x.useState(!1),[o,i]=x.useState(a||""),l=async d=>{c(!0);try{const g=d.name.split(".").pop(),v=`covers/${`cover-${Date.now()}.${g}`}`,{error:p}=await T.storage.from("property-images").upload(v,d);if(p)throw p;const{data:_}=T.storage.from("property-images").getPublicUrl(v),f=_.publicUrl;i(f),s(f),t({title:r==="ar"?"نجح":"Success",description:r==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully"})}catch(g){console.error("Error uploading file:",g),t({title:r==="ar"?"خطأ":"Error",description:g.message||(r==="ar"?"فشل في رفع الصورة":"Failed to upload image"),variant:"destructive"})}finally{c(!1)}},m=d=>{var u;const g=(u=d.target.files)==null?void 0:u[0];if(g){if(!g.type.startsWith("image/")){t({title:r==="ar"?"خطأ":"Error",description:r==="ar"?"يجب أن يكون الملف صورة":"File must be an image",variant:"destructive"});return}if(g.size>5*1024*1024){t({title:r==="ar"?"خطأ":"Error",description:r==="ar"?"حجم الصورة يجب أن يكون أقل من 5 ميجابايت":"Image size must be less than 5MB",variant:"destructive"});return}l(g)}},h=()=>{i(""),s("")};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{className:"text-base font-semibold",children:r==="ar"?"صورة الغلاف (مطلوبة) *":"Cover Image (Required) *"}),e.jsx("p",{className:"text-sm text-gray-600",children:r==="ar"?"هذه الصورة ستظهر على الصفحة الرئيسية":"This image will appear on the homepage"}),o?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:o,alt:"Cover preview",className:"w-full h-48 object-cover rounded-lg border"}),e.jsx(S,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:h,children:e.jsx(Be,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[e.jsx(ze,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:r==="ar"?"اختر صورة الغلاف":"Choose cover image"}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{type:"file",accept:"image/*",onChange:m,disabled:n,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx(S,{type:"button",disabled:n,className:"pointer-events-none",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),r==="ar"?"جارٍ الرفع...":"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),r==="ar"?"رفع صورة":"Upload Image"]})})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:r==="ar"?"الحد الأقصى للحجم: 5 ميجابايت. الصيغ المدعومة: JPG, PNG, GIF":"Max size: 5MB. Supported formats: JPG, PNG, GIF"})]})},Pi=({formData:s,setFormData:a})=>(F(),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Di,{onImageChange:r=>a(t=>({...t,cover_image:r})),currentImage:s.cover_image}),e.jsx(Fi,{onFilesChange:r=>a(t=>({...t,images:r})),existingFiles:s.images})]})),Ri=({onCancel:s,onSubmit:a,isSubmitting:r,isValid:t})=>{const{currentLanguage:n}=F();return e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(S,{variant:"outline",onClick:s,disabled:r,children:n==="ar"?"إلغاء":"Cancel"}),e.jsx(S,{onClick:a,disabled:r||!t,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),n==="ar"?"جارٍ الحفظ...":"Saving..."]}):n==="ar"?"حفظ العقار":"Save Property"})]})},Mi=()=>{const{districts:s}=Xe(),[a,r]=x.useState([]),[t,n]=x.useState({title_ar:"",title_en:"",title_tr:"",description_ar:"",description_en:"",description_tr:"",price:"",currency:"EUR",deposit:"0",deposit_currency:"EUR",commission:"0",commission_currency:"EUR",city:"",district:"",property_type:"",property_layout_id:"",listing_type:"rent",bedrooms:"",bathrooms:"",area:"",status:"available",images:[],cover_image:"",is_featured:!1,is_student_housing:!1,student_housing_gender:"unspecified"});return x.useEffect(()=>{if(t.city&&t.city!==""){const l=gs(t.city,s);r(l),t.district&&!l.find(m=>m.id===t.district)&&n(m=>({...m,district:""}))}else r([]),n(l=>({...l,district:""}))},[t.city,s]),{formData:t,setFormData:n,availableDistricts:a,handlePropertyTypeChange:l=>{n(m=>({...m,property_type:l,property_layout_id:""}))},resetForm:()=>{n({title_ar:"",title_en:"",title_tr:"",description_ar:"",description_en:"",description_tr:"",price:"",currency:"EUR",deposit:"0",deposit_currency:"EUR",commission:"0",commission_currency:"EUR",city:"",district:"",property_type:"",property_layout_id:"",listing_type:"rent",bedrooms:"",bathrooms:"",area:"",status:"available",images:[],cover_image:"",is_featured:!1,is_student_housing:!1,student_housing_gender:"unspecified"})},isFormValid:()=>!(!t.title_ar.trim()&&!t.title_en.trim()&&!t.title_tr.trim()||!t.price||parseFloat(t.price)<=0||!t.city||!t.property_type||!t.listing_type||!t.cover_image)}},Li=({onSubmit:s,onCancel:a,isSubmitting:r})=>{const{t}=F(),{formData:n,setFormData:c,handlePropertyTypeChange:o,resetForm:i,isFormValid:l}=Mi(),m=async()=>{if(!l())return;await s(n)&&(i(),a())};return e.jsxs(P,{children:[e.jsxs($,{children:[e.jsx(O,{children:t("addNewProperty")}),e.jsx(q,{children:t("fill_form_add_new_property")})]}),e.jsxs(R,{children:[e.jsxs(Te,{defaultValue:"basic",className:"space-y-4",children:[e.jsxs(Fe,{className:"grid w-full grid-cols-3",children:[e.jsx(ae,{value:"basic",children:t("basicInfo")}),e.jsx(ae,{value:"multilang",children:t("multipleLanguages")}),e.jsx(ae,{value:"media",children:t("mediaAdmin")})]}),e.jsx(re,{value:"basic",children:e.jsx(Ai,{formData:n,setFormData:c,handlePropertyTypeChange:o})}),e.jsx(re,{value:"multilang",children:e.jsx(Ti,{formData:n,setFormData:c})}),e.jsx(re,{value:"media",children:e.jsx(Pi,{formData:n,setFormData:c})})]}),e.jsx(Ri,{onCancel:a,onSubmit:m,isSubmitting:r,isValid:l()})]})]})},Ui=({property:s,onSave:a,onCancel:r})=>{var f,N,y,w,M;const{currentLanguage:t}=F(),{toast:n}=se(),{cities:c,districts:o}=Xe(),[i,l]=x.useState(!1),[m,h]=x.useState(o),[d,g]=x.useState({title_ar:s.title_ar||"",title_en:s.title_en||"",title_tr:s.title_tr||"",description_ar:s.description_ar||"",description_en:s.description_en||"",description_tr:s.description_tr||"",price:s.price.toString(),currency:s.currency||"EUR",listing_type:s.listing_type||"rent",deposit:((f=s.deposit)==null?void 0:f.toString())||"0",deposit_currency:s.deposit_currency||s.currency||"EUR",commission:((N=s.commission)==null?void 0:N.toString())||"0",commission_currency:s.commission_currency||s.currency||"EUR",city:s.city,district:s.district||"",property_type:s.property_type_id||"",property_layout_id:s.property_layout_id||"",bedrooms:((y=s.bedrooms)==null?void 0:y.toString())||"",bathrooms:((w=s.bathrooms)==null?void 0:w.toString())||"",area:((M=s.area)==null?void 0:M.toString())||"",status:s.status||"available",images:Array.isArray(s.images)?s.images:[],cover_image:s.cover_image||"",is_featured:s.is_featured||!1});x.useEffect(()=>{if(d.city){const k=gs(d.city,o);h(k)}},[d.city,o]);const u=k=>{g(I=>({...I,city:k,district:""}));const b=gs(k,o);h(b)},v=async k=>{k.preventDefault(),l(!0);try{if(!d.title_ar.trim()&&!d.title_en.trim()&&!d.title_tr.trim()){n({title:t==="ar"?"خطأ":"Error",description:t==="ar"?"يجب إدخال العنوان في لغة واحدة على الأقل":"Title is required in at least one language",variant:"destructive"});return}if(!d.price||parseFloat(d.price)<=0){n({title:t==="ar"?"خطأ":"Error",description:t==="ar"?"السعر مطلوب ويجب أن يكون أكبر من صفر":"Price is required and must be greater than zero",variant:"destructive"});return}if(!d.city||!d.property_type){n({title:t==="ar"?"خطأ":"Error",description:t==="ar"?"المدينة ونوع العقار مطلوبان":"City and property type are required",variant:"destructive"});return}const b={title:d.title_ar.trim()||d.title_en.trim()||d.title_tr.trim(),title_ar:d.title_ar.trim()||null,title_en:d.title_en.trim()||null,title_tr:d.title_tr.trim()||null,description:d.description_ar.trim()||d.description_en.trim()||d.description_tr.trim()||null,description_ar:d.description_ar.trim()||null,description_en:d.description_en.trim()||null,description_tr:d.description_tr.trim()||null,price:parseFloat(d.price),currency:d.currency,listing_type:d.listing_type,deposit:parseFloat(d.deposit)||0,deposit_currency:d.deposit_currency,commission:parseFloat(d.commission)||0,commission_currency:d.commission_currency,city:d.city,district:d.district.trim()||null,property_type_id:d.property_type,property_layout_id:d.property_layout_id||null,bedrooms:d.bedrooms?parseInt(d.bedrooms):null,bathrooms:d.bathrooms?parseInt(d.bathrooms):null,area:d.area?parseFloat(d.area):null,status:d.status,images:d.images,cover_image:d.cover_image,is_featured:d.is_featured};await a(b),n({title:t==="ar"?"نجح":"Success",description:t==="ar"?"تم تحديث العقار بنجاح":"Property updated successfully"})}catch{n({title:t==="ar"?"خطأ":"Error",description:t==="ar"?"فشل في تحديث العقار":"Failed to update property",variant:"destructive"})}finally{l(!1)}},p=c.filter(k=>k.id&&typeof k.id=="string"&&k.id.trim()!==""),_=m.filter(k=>k.id&&typeof k.id=="string"&&k.id.trim()!=="");return e.jsxs(P,{className:"w-full max-w-6xl mx-auto",children:[e.jsxs($,{className:"flex flex-row items-center justify-between",children:[e.jsx(O,{children:t==="ar"?"تعديل العقار":"Edit Property"}),e.jsx(S,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(Be,{className:"w-4 h-4"})})]}),e.jsxs(R,{children:[e.jsxs(Te,{defaultValue:"basic",className:"space-y-4",children:[e.jsxs(Fe,{className:"grid w-full grid-cols-3",children:[e.jsx(ae,{value:"basic",children:t==="ar"?"البيانات الأساسية":"Basic Info"}),e.jsx(ae,{value:"multilang",children:t==="ar"?"اللغات المتعددة":"Multiple Languages"}),e.jsx(ae,{value:"media",children:t==="ar"?"الصور والوسائط":"Images & Media"})]}),e.jsx(re,{value:"basic",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"listing_type",children:t==="ar"?"نوع الإعلان *":"Listing Type *"}),e.jsxs(X,{value:d.listing_type,onValueChange:k=>g(b=>({...b,listing_type:k})),children:[e.jsx(J,{children:e.jsx(Z,{placeholder:t==="ar"?"اختر النوع":"Select Type"})}),e.jsxs(Q,{children:[e.jsx(E,{value:"rent",children:t==="ar"?"للإيجار":"For Rent"}),e.jsx(E,{value:"sale",children:t==="ar"?"للبيع":"For Sale"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"price",children:d.listing_type==="rent"?t==="ar"?"السعر الشهري *":"Monthly Price *":t==="ar"?"سعر البيع *":"Sale Price *"}),e.jsx(C,{id:"price",type:"number",value:d.price,onChange:k=>g(b=>({...b,price:k.target.value})),placeholder:d.listing_type==="rent"?"1200":"250000"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"currency",children:t==="ar"?"العملة *":"Currency *"}),e.jsxs(X,{value:d.currency,onValueChange:k=>g(b=>({...b,currency:k})),children:[e.jsx(J,{children:e.jsx(Z,{})}),e.jsxs(Q,{children:[e.jsx(E,{value:"EUR",children:"EUR (€)"}),e.jsx(E,{value:"GBP",children:"GBP (£)"}),e.jsx(E,{value:"USD",children:"USD ($)"}),e.jsx(E,{value:"TRY",children:"TRY (₺)"})]})]})]}),d.listing_type==="rent"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"deposit",children:t==="ar"?"الوديعة":"Deposit"}),e.jsx(C,{id:"deposit",type:"number",value:d.deposit,onChange:k=>g(b=>({...b,deposit:k.target.value})),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"deposit_currency",children:t==="ar"?"عملة الوديعة":"Deposit Currency"}),e.jsxs(X,{value:d.deposit_currency,onValueChange:k=>g(b=>({...b,deposit_currency:k})),children:[e.jsx(J,{children:e.jsx(Z,{})}),e.jsxs(Q,{children:[e.jsx(E,{value:"EUR",children:"EUR (€)"}),e.jsx(E,{value:"GBP",children:"GBP (£)"}),e.jsx(E,{value:"USD",children:"USD ($)"}),e.jsx(E,{value:"TRY",children:"TRY (₺)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"commission",children:t==="ar"?"العمولة":"Commission"}),e.jsx(C,{id:"commission",type:"number",value:d.commission,onChange:k=>g(b=>({...b,commission:k.target.value})),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"commission_currency",children:t==="ar"?"عملة العمولة":"Commission Currency"}),e.jsxs(X,{value:d.commission_currency,onValueChange:k=>g(b=>({...b,commission_currency:k})),children:[e.jsx(J,{children:e.jsx(Z,{})}),e.jsxs(Q,{children:[e.jsx(E,{value:"EUR",children:"EUR (€)"}),e.jsx(E,{value:"GBP",children:"GBP (£)"}),e.jsx(E,{value:"USD",children:"USD ($)"}),e.jsx(E,{value:"TRY",children:"TRY (₺)"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"city",children:t==="ar"?"المدينة *":"City *"}),e.jsxs(X,{value:d.city,onValueChange:u,children:[e.jsx(J,{children:e.jsx(Z,{placeholder:t==="ar"?"اختر المدينة":"Select City"})}),e.jsx(Q,{children:p.map(k=>e.jsx(E,{value:k.id,children:Ze(k,t)},k.id))})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"district",children:t==="ar"?"المنطقة":"District"}),e.jsxs(X,{value:d.district||"no-district",onValueChange:k=>g(b=>({...b,district:k==="no-district"?"":k})),disabled:!d.city,children:[e.jsx(J,{children:e.jsx(Z,{placeholder:t==="ar"?"اختر المنطقة":"Select District"})}),e.jsxs(Q,{children:[e.jsx(E,{value:"no-district",children:t==="ar"?"بدون منطقة محددة":"No specific district"}),_.map(k=>e.jsx(E,{value:k.id,children:_a(k,t)},k.id))]})]})]}),e.jsx(wa,{value:d.property_type,onChange:k=>g(b=>({...b,property_type:k})),required:!0}),e.jsx(At,{value:d.property_layout_id,onChange:k=>g(b=>({...b,property_layout_id:k})),label:t==="ar"?"تقسيم العقار":"Property Layout",placeholder:t==="ar"?"اختر التقسيم":"Select Layout"}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"bedrooms",children:t==="ar"?"عدد الغرف":"Bedrooms"}),e.jsx(C,{id:"bedrooms",type:"number",value:d.bedrooms,onChange:k=>g(b=>({...b,bedrooms:k.target.value})),placeholder:"3"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"bathrooms",children:t==="ar"?"عدد الحمامات":"Bathrooms"}),e.jsx(C,{id:"bathrooms",type:"number",value:d.bathrooms,onChange:k=>g(b=>({...b,bathrooms:k.target.value})),placeholder:"2"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"area",children:t==="ar"?"المساحة (متر مربع)":"Area (sqm)"}),e.jsx(C,{id:"area",type:"number",value:d.area,onChange:k=>g(b=>({...b,area:k.target.value})),placeholder:"120"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"status",children:t==="ar"?"الحالة":"Status"}),e.jsxs(X,{value:d.status,onValueChange:k=>g(b=>({...b,status:k})),children:[e.jsx(J,{children:e.jsx(Z,{})}),e.jsxs(Q,{children:[e.jsx(E,{value:"available",children:t==="ar"?"متاح":"Available"}),e.jsx(E,{value:"pending",children:t==="ar"?"مخفي":"Hidden"}),e.jsx(E,{value:"rented",children:t==="ar"?"مؤجر":"Rented"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Sa,{id:"is_featured",checked:d.is_featured,onCheckedChange:k=>g(b=>({...b,is_featured:k}))}),e.jsx(j,{htmlFor:"is_featured",children:t==="ar"?"عقار مميز":"Featured Property"})]})]})}),e.jsx(re,{value:"multilang",className:"space-y-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-right",children:"العربية"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"title_ar",children:"العنوان بالعربية *"}),e.jsx(C,{id:"title_ar",value:d.title_ar,onChange:k=>g(b=>({...b,title_ar:k.target.value})),placeholder:"أدخل عنوان العقار بالعربية",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"description_ar",children:"الوصف بالعربية"}),e.jsx(V,{id:"description_ar",value:d.description_ar,onChange:k=>g(b=>({...b,description_ar:k.target.value})),placeholder:"أدخل وصف العقار بالعربية...",rows:3,dir:"rtl"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"English"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"title_en",children:"Title in English"}),e.jsx(C,{id:"title_en",value:d.title_en,onChange:k=>g(b=>({...b,title_en:k.target.value})),placeholder:"Enter property title in English"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"description_en",children:"Description in English"}),e.jsx(V,{id:"description_en",value:d.description_en,onChange:k=>g(b=>({...b,description_en:k.target.value})),placeholder:"Enter property description in English...",rows:3})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Türkçe"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"title_tr",children:"Türkçe Başlık"}),e.jsx(C,{id:"title_tr",value:d.title_tr,onChange:k=>g(b=>({...b,title_tr:k.target.value})),placeholder:"Türkçe mülk başlığını girin"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"description_tr",children:"Türkçe Açıklama"}),e.jsx(V,{id:"description_tr",value:d.description_tr,onChange:k=>g(b=>({...b,description_tr:k.target.value})),placeholder:"Türkçe mülk açıklamasını girin...",rows:3})]})]})]})]})}),e.jsx(re,{value:"media",className:"space-y-4",children:e.jsx(Nt,{onCoverImageChange:k=>g(b=>({...b,cover_image:k})),onImagesChange:k=>g(b=>({...b,images:k})),coverImage:d.cover_image,images:d.images})})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx(S,{type:"button",variant:"outline",onClick:r,children:t==="ar"?"إلغاء":"Cancel"}),e.jsx(S,{onClick:v,disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),t==="ar"?"جارٍ الحفظ...":"Saving..."]}):t==="ar"?"حفظ التغييرات":"Save Changes"})]})]})]})},$i=({properties:s,loading:a,onToggleStatus:r,onDelete:t,onToggleFeatured:n,onRefresh:c,onOpenProperty:o})=>{const{currentLanguage:i}=F(),{toast:l}=se(),{cities:m,districts:h,loading:d}=Xe(),[g,u]=x.useState(null),v=b=>{switch(b){case"EUR":return"€";case"GBP":return"£";case"USD":return"$";default:return"€"}},p=b=>Array.isArray(b)?b.length:0;function _(b){const I=m.find(A=>A.id===b);return I?i==="ar"?I.name_ar:i==="tr"?I.name_tr:I.name_en:b}const f=async b=>{if(g)try{const{error:I}=await T.from("properties").update(b).eq("id",g.id);if(I)throw I;u(null),c&&c()}catch(I){l({title:i==="ar"?"خطأ":"Error",description:(I==null?void 0:I.message)||(i==="ar"?"فشل في تحديث العقار":"Failed to update property"),variant:"destructive"})}},N=async(b,I)=>{try{const A=I==="sold"||I==="rented"?"available":"sold",{error:ne}=await T.from("properties").update({status:A}).eq("id",b);if(ne)throw ne;l({title:i==="ar"?"تم التحديث":"Updated",description:A==="sold"?i==="ar"?"تم تحديد العقار كمباع/مؤجر":"Property marked as sold/rented":i==="ar"?"تم تحديد العقار كمتاح":"Property marked as available"}),c&&c()}catch(A){l({title:i==="ar"?"خطأ":"Error",description:(A==null?void 0:A.message)||(i==="ar"?"فشل في تحديث الحالة":"Failed to update status"),variant:"destructive"})}},y=()=>i==="ar"?"مميز":i==="tr"?"Öne Çıkan":"Featured";if(g)return e.jsx(Ui,{property:g,onSave:f,onCancel:()=>u(null)});const w=s.filter(b=>b.is_featured),M=s.filter(b=>!b.is_featured),k=({properties:b,title:I})=>e.jsxs("div",{className:"mb-8",children:[I&&e.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:I}),e.jsxs(ke,{children:[e.jsx(Ee,{children:e.jsxs(ee,{children:[e.jsx(L,{children:i==="ar"?"العنوان":"Title"}),e.jsx(L,{children:i==="ar"?"المدينة":"City"}),e.jsx(L,{children:i==="ar"?"السعر":"Price"}),e.jsx(L,{children:i==="ar"?"النوع":"Type"}),e.jsx(L,{children:i==="ar"?"الحالة":"Status"}),e.jsx(L,{children:i==="ar"?"الصور":"Images"}),e.jsx(L,{children:i==="ar"?"المشاهدات":"Views"}),e.jsx(L,{children:i==="ar"?"الإجراءات":"Actions"})]})}),e.jsx(Ae,{children:b.map(A=>{const{viewsCount:ne,loading:ie}=Tt(A.id),W=A.status==="sold"||A.status==="rented";return e.jsxs(ee,{className:W?"bg-green-50":"",children:[e.jsx(D,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[i==="ar"&&A.title_ar?A.title_ar:i==="tr"&&A.title_tr?A.title_tr:A.title_en||A.title,W&&e.jsx(vs,{className:"w-4 h-4 text-green-600 fill-current"})]})}),e.jsx(D,{children:d?e.jsx("span",{className:"text-gray-400",children:"..."}):_(A.city)}),e.jsxs(D,{className:"font-semibold text-green-600",children:[v(A.currency||"EUR"),A.price]}),e.jsx(D,{children:A.property_type}),e.jsx(D,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.status==="available"?"bg-green-100 text-green-800":A.status==="pending"?"bg-yellow-100 text-yellow-800":A.status==="sold"?"bg-red-100 text-red-800":A.status==="rented"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:A.status==="available"?i==="ar"?"متاح":"Available":A.status==="pending"?i==="ar"?"مخفي":"Hidden":A.status==="sold"?i==="ar"?"مباع":"Sold":(A.status==="rented",i==="ar"?"مؤجر":"Rented")})}),e.jsx(D,{children:e.jsxs("span",{className:"text-sm text-gray-600",children:[p(A.images)," ",i==="ar"?"ملف":"files"]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(ge,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:ie?"...":ne??0})]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(S,{size:"sm",variant:"outline",onClick:()=>o(A.id),title:i==="ar"?"فتح العقار":"Open Property",children:e.jsx(es,{className:"w-4 h-4"})}),e.jsx(S,{size:"sm",variant:A.is_featured?"default":"outline",onClick:()=>n(A.id,A.is_featured||!1),title:A.is_featured?i==="ar"?"إزالة من المميزة":"Remove from featured":i==="ar"?"إضافة إلى المميزة":"Add to featured",className:A.is_featured?"bg-yellow-500 hover:bg-yellow-600":"",children:e.jsx(fs,{className:`w-4 h-4 ${A.is_featured?"fill-current":""}`})}),e.jsx(S,{size:"sm",variant:W?"default":"outline",onClick:()=>N(A.id,A.status||"available"),title:W?i==="ar"?"إعادة تعيين إلى متاح":"Mark as available":i==="ar"?"تحديد كمباع/مؤجر":"Mark as sold/rented",className:W?"bg-green-600 hover:bg-green-700":"",children:e.jsx(vs,{className:`w-4 h-4 ${W?"fill-current":""}`})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>r(A.id,A.status||"available"),title:A.status==="available"?i==="ar"?"إخفاء العقار":"Hide Property":i==="ar"?"إظهار العقار":"Show Property",children:A.status==="available"?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(ge,{className:"w-4 h-4"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>u(A),children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx(S,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>t(A.id),children:e.jsx(me,{className:"w-4 h-4"})})]})})]},A.id)})})]})]});return e.jsxs(P,{children:[e.jsxs($,{children:[e.jsx(O,{children:i==="ar"?"قائمة العقارات":"Properties List"}),e.jsx(q,{children:i==="ar"?"جميع العقارات المضافة في النظام":"All properties added to the system"})]}),e.jsx(R,{children:a?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):e.jsxs("div",{children:[w.length>0&&e.jsx(k,{properties:w,title:y()}),M.length>0&&e.jsx(k,{properties:M,title:w.length>0?i==="ar"?"العقارات العادية":"Regular Properties":void 0}),s.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:i==="ar"?"لا توجد عقارات":"No properties found"})})]})})]})},Ii=({property:s,onToggleStatus:a,onToggleHide:r,onToggleSold:t,onDelete:n,onToggleFeatured:c,onOpenProperty:o,onEdit:i})=>{const{currentLanguage:l}=F(),m=()=>l==="ar"&&s.title_ar?s.title_ar:l==="en"&&s.title_en?s.title_en:l==="tr"&&s.title_tr?s.title_tr:s.title||s.title_ar||s.title_en||s.title_tr||"No Title",h=()=>s.cover_image?s.cover_image:s.images&&Array.isArray(s.images)&&s.images.length>0?s.images[0]:null,d=()=>{const N=s.owner_name;if(!N)return"U";const y=N.trim().split(" ");return y.length>=2?(y[0][0]+y[1][0]).toUpperCase():y[0][0].toUpperCase()},g=()=>{s.created_by&&window.open(`/user/${s.created_by}`,"_blank")},u=()=>s.owner_name||(l==="ar"?"مالك غير محدد":l==="tr"?"Belirtilmemiş Sahip":"Unknown Owner"),v=()=>{const N=s.status;let y="default",w=N;switch(N){case"available":y="default",w=l==="ar"?"متاح":l==="tr"?"Müsait":"Available";break;case"pending":y="secondary",w=l==="ar"?"معلق":l==="tr"?"Beklemede":"Pending";break;case"sold":y="destructive",w=l==="ar"?"مباع":l==="tr"?"Satıldı":"Sold";break;case"rented":y="outline",w=l==="ar"?"مؤجر":l==="tr"?"Kiralandı":"Rented";break;case"hidden":y="destructive",w=l==="ar"?"مخفي":l==="tr"?"Gizli":"Hidden";break;default:w=N||"Unknown"}return e.jsx(G,{variant:y,children:w})},p=()=>{const N=s.listing_type;if(!N)return null;let y=N;switch(N){case"for_sale":y=l==="ar"?"للبيع":l==="tr"?"Satılık":"For Sale";break;case"for_rent":y=l==="ar"?"للإيجار":l==="tr"?"Kiralık":"For Rent";break}return e.jsx(G,{variant:"outline",children:y})},_=()=>{if(!s.price)return"N/A";const N=s.currency||"EUR";return`${s.price.toLocaleString()} ${N}`},f=N=>N?new Date(N).toLocaleDateString(l==="ar"?"ar-EG":l==="tr"?"tr-TR":"en-US"):"N/A";return e.jsxs(P,{className:"h-full hover:shadow-lg transition-all duration-300 overflow-hidden",children:[e.jsxs("div",{className:"relative h-48 bg-gray-100 overflow-hidden",children:[h()?e.jsx("img",{src:h(),alt:m(),className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200",children:e.jsx(ze,{className:"w-16 h-16 text-gray-400"})}),e.jsxs("div",{className:"absolute top-3 left-3 flex flex-wrap gap-2",children:[v(),p()]}),s.is_featured&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs(G,{variant:"default",className:"bg-yellow-500 hover:bg-yellow-600",children:[e.jsx(fs,{className:"w-3 h-3 mr-1 fill-current"}),l==="ar"?"مميز":l==="tr"?"Öne Çıkan":"Featured"]})}),s.hidden_by_admin&&e.jsx("div",{className:"absolute bottom-3 left-3",children:e.jsx(G,{variant:"destructive",children:l==="ar"?"مخفي من الأدمن":l==="tr"?"Admin Tarafından Gizli":"Hidden by Admin"})})]}),e.jsxs($,{className:"pb-3",children:[e.jsx("h3",{className:"font-semibold text-lg line-clamp-2 mb-3",children:m()}),e.jsxs("div",{className:`flex items-center gap-3 p-3 bg-gray-50 rounded-lg transition-colors group ${s.created_by?"hover:bg-gray-100 cursor-pointer":""}`,onClick:s.created_by?g:void 0,children:[e.jsxs(ws,{className:"w-10 h-10 border-2 border-white shadow-sm group-hover:shadow-md transition-shadow",children:[e.jsx(Cs,{src:s.owner_avatar_url||void 0,alt:u()}),e.jsx(Ss,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white font-semibold",children:d()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`font-medium text-sm truncate transition-colors ${s.created_by?"text-gray-900 group-hover:text-blue-600":"text-gray-500"}`,children:u()}),e.jsx("p",{className:"text-xs text-gray-500",children:l==="ar"?"مالك العقار":l==="tr"?"Mülk Sahibi":"Property Owner"})]}),s.created_by&&e.jsx(es,{className:"w-4 h-4 text-gray-400 group-hover:text-blue-600 transition-colors"})]})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(as,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[s.city||"N/A"," ",s.district&&`- ${s.district}`]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ft,{className:"w-4 h-4 mr-2 text-green-600"}),e.jsx("span",{className:"font-bold text-lg text-green-600",children:_()})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:s.views_count||0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:"w-4 h-4 mr-2 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.property_type||"N/A"})]}),s.bedrooms&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Dt,{className:"w-4 h-4 mr-2 text-muted-foreground flex-shrink-0"}),e.jsxs("span",{children:[s.bedrooms," ",l==="ar"?"غرف":l==="tr"?"oda":"beds"]})]}),s.bathrooms&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pt,{className:"w-4 h-4 mr-2 text-muted-foreground flex-shrink-0"}),e.jsxs("span",{children:[s.bathrooms," ",l==="ar"?"حمام":l==="tr"?"banyo":"baths"]})]}),s.area&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Rt,{className:"w-4 h-4 mr-2 text-muted-foreground flex-shrink-0"}),e.jsxs("span",{children:[s.area," m²"]})]})]}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground pt-2 border-t",children:[e.jsx(Mt,{className:"w-3 h-3 mr-2 flex-shrink-0"}),e.jsxs("span",{children:[l==="ar"?"تاريخ الإضافة:":l==="tr"?"Eklenme Tarihi:":"Created:"," ",f(s.created_at)]})]}),e.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[e.jsxs(S,{size:"sm",variant:"outline",onClick:()=>o(s.id),className:"w-full justify-center gap-2 hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700",children:[e.jsx(es,{className:"w-4 h-4"}),l==="ar"?"فتح العقار":l==="tr"?"Mülkü Aç":"Open Property"]}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(S,{size:"sm",variant:s.is_featured?"default":"outline",onClick:()=>c(s.id,s.is_featured||!1),className:s.is_featured?"bg-yellow-500 hover:bg-yellow-600 text-white border-yellow-500":"hover:bg-yellow-50 hover:border-yellow-300 hover:text-yellow-700",title:s.is_featured?l==="ar"?"إزالة من المميزة":"Remove from featured":l==="ar"?"إضافة إلى المميزة":"Add to featured",children:e.jsx(fs,{className:`w-4 h-4 ${s.is_featured?"fill-current":""}`})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>{t?t(s.id,s.status||"available"):a(s.id,s.status||"available")},className:s.status==="sold"||s.status==="rented"?"bg-green-500 hover:bg-green-600 text-white border-green-500":"hover:bg-green-50 hover:border-green-300 hover:text-green-700",title:s.status==="sold"||s.status==="rented"?l==="ar"?"إعادة تعيين إلى متاح":"Mark as available":l==="ar"?"تحديد كمباع/مؤجر":"Mark as sold/rented",children:e.jsx(vs,{className:`w-4 h-4 ${s.status==="sold"||s.status==="rented"?"fill-current":""}`})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>{r?r(s.id,s.status||"available"):a(s.id,s.status||"available")},className:s.status==="hidden"||s.status==="pending"?"bg-gray-500 hover:bg-gray-600 text-white border-gray-500":"hover:bg-gray-50 hover:border-gray-300",title:s.status==="hidden"||s.status==="pending"?l==="ar"?"إظهار العقار":"Show Property":l==="ar"?"إخفاء العقار":"Hide Property",children:s.status==="hidden"||s.status==="pending"?e.jsx(ge,{className:"w-4 h-4"}):e.jsx(Le,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(S,{size:"sm",variant:"outline",onClick:()=>i&&i(s),className:"hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700",title:l==="ar"?"تعديل العقار":"Edit Property",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>n(s.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 hover:border-red-300",title:l==="ar"?"حذف العقار":"Delete Property",children:e.jsx(me,{className:"w-4 h-4"})})]})]})]})]})},Bi=()=>{const{currentLanguage:s}=F(),[a,r]=x.useState(""),[t,n]=x.useState(!1),[c,o]=x.useState("table"),[i,l]=x.useState("all"),[m,h]=x.useState("all"),[d,g]=x.useState("all"),[u,v]=x.useState("all"),[p,_]=x.useState("all"),[f,N]=x.useState("created_at"),[y,w]=x.useState("desc"),{properties:M,loading:k,isAdmin:b,addingProperty:I,user:A,addProperty:ne,deleteProperty:ie,togglePropertyStatus:W,toggleFeaturedStatus:H,toggleHideStatus:he,toggleSoldStatus:U,fetchProperties:le}=_t(),{cities:ue,districts:xe}=Xe(),ye=x.useMemo(()=>{let B=[...M];if(a&&(B=B.filter(z=>{var Y,de,oe,te,Qs,ea;return((Y=z.title)==null?void 0:Y.toLowerCase().includes(a.toLowerCase()))||((de=z.title_ar)==null?void 0:de.toLowerCase().includes(a.toLowerCase()))||((oe=z.title_en)==null?void 0:oe.toLowerCase().includes(a.toLowerCase()))||((te=z.title_tr)==null?void 0:te.toLowerCase().includes(a.toLowerCase()))||((Qs=z.city)==null?void 0:Qs.toLowerCase().includes(a.toLowerCase()))||((ea=z.district)==null?void 0:ea.toLowerCase().includes(a.toLowerCase()))})),i!=="all"){const z=ue.find(Y=>Y.id===i);if(z){const Y=[z.name_ar,z.name_en,z.name_tr];B=B.filter(de=>Y.some(oe=>{var te;return oe.toLowerCase()===((te=de.city)==null?void 0:te.toLowerCase())}))}}if(m!=="all"){const z=xe.find(Y=>Y.id===m);if(z){const Y=[z.name_ar,z.name_en,z.name_tr];B=B.filter(de=>Y.some(oe=>{var te;return oe.toLowerCase()===((te=de.district)==null?void 0:te.toLowerCase())}))}}return d!=="all"&&(B=B.filter(z=>z.property_type===d)),u!=="all"&&(B=B.filter(z=>z.status===u)),p!=="all"&&(B=B.filter(z=>z.listing_type===p)),B.sort((z,Y)=>{let de,oe;switch(f){case"title":de=z.title||z.title_ar||z.title_en||"",oe=Y.title||Y.title_ar||Y.title_en||"";break;case"price":de=z.price||0,oe=Y.price||0;break;case"views_count":de=z.views_count||0,oe=Y.views_count||0;break;case"created_at":default:de=new Date(z.created_at||"").getTime(),oe=new Date(Y.created_at||"").getTime();break}return y==="asc"?de>oe?1:-1:de<oe?1:-1}),B},[M,a,i,m,d,u,p,f,y,ue,xe]),Ue=async()=>{console.log("Refreshing properties..."),await le()},Pe=B=>{window.open(`/property/${B}`,"_blank")},$e=()=>{const z=[["Title","City","District","Type","Status","Listing Type","Price","Views","Created Date"].join(","),...ye.map(te=>[te.title||te.title_ar||te.title_en||"No Title",te.city||"",te.district||"",te.property_type||"",te.status||"",te.listing_type||"",te.price||0,te.views_count||0,new Date(te.created_at||"").toLocaleDateString()].join(","))].join(`
`),Y=new Blob([z],{type:"text/csv"}),de=window.URL.createObjectURL(Y),oe=document.createElement("a");oe.href=de,oe.download="properties-export.csv",oe.click(),window.URL.revokeObjectURL(de)},Ie=x.useMemo(()=>i==="all"?xe:xe.filter(B=>B.city_id===i),[xe,i]),Ne=B=>{l(B),h("all")};return A?b?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s==="ar"?"إدارة العقارات":"Property Management"}),e.jsx("p",{className:"text-muted-foreground",children:s==="ar"?"مراجعة وإدارة جميع العقارات المسجلة في الموقع":"Review and manage all registered properties on the platform"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(S,{onClick:Ue,variant:"outline",className:"flex items-center gap-2",disabled:k,children:[e.jsx(Ke,{className:`w-4 h-4 ${k?"animate-spin":""}`}),s==="ar"?"تحديث":"Refresh"]}),e.jsxs(S,{onClick:()=>n(!0),className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),s==="ar"?"إضافة عقار جديد":"Add New Property"]})]})]}),e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-500"}),e.jsxs(O,{children:[s==="ar"?"قائمة العقارات":"Properties List",e.jsxs("span",{className:"text-sm font-normal text-gray-500 mr-2",children:["(",ye.length," ",s==="ar"?"عقار":"properties",")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{variant:c==="cards"?"default":"outline",size:"sm",onClick:()=>o("cards"),children:e.jsx(va,{className:"w-4 h-4"})}),e.jsx(S,{variant:c==="table"?"default":"outline",size:"sm",onClick:()=>o("table"),children:e.jsx(fa,{className:"w-4 h-4"})}),e.jsxs(S,{onClick:$e,variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Ta,{className:"w-4 h-4"}),s==="ar"?"تصدير":"Export"]})]})]}),e.jsx(q,{children:s==="ar"?"إدارة جميع العقارات المضافة إلى النظام":"Manage all properties added to the system"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(C,{placeholder:s==="ar"?"البحث بالعنوان أو المدينة أو المنطقة...":"Search by title, city, district, or owner name...",value:a,onChange:B=>r(B.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs(X,{value:i,onValueChange:Ne,children:[e.jsxs(J,{children:[e.jsx(Fa,{className:"w-4 h-4 mr-2"}),e.jsx(Z,{placeholder:s==="ar"?"المدينة":"City"})]}),e.jsxs(Q,{children:[e.jsx(E,{value:"all",children:s==="ar"?"جميع المدن":"All Cities"}),ue.map(B=>e.jsx(E,{value:B.id,children:s==="ar"?B.name_ar:s==="tr"?B.name_tr:B.name_en},B.id))]})]}),e.jsxs(X,{value:m,onValueChange:h,children:[e.jsx(J,{children:e.jsx(Z,{placeholder:s==="ar"?"المنطقة":"District"})}),e.jsxs(Q,{children:[e.jsx(E,{value:"all",children:s==="ar"?"جميع المناطق":"All Districts"}),Ie.map(B=>e.jsx(E,{value:B.id,children:s==="ar"?B.name_ar:s==="tr"?B.name_tr:B.name_en},B.id))]})]}),e.jsxs(X,{value:d,onValueChange:g,children:[e.jsx(J,{children:e.jsx(Z,{placeholder:s==="ar"?"نوع العقار":"Property Type"})}),e.jsxs(Q,{children:[e.jsx(E,{value:"all",children:s==="ar"?"جميع الأنواع":"All Types"}),e.jsx(E,{value:"apartment",children:s==="ar"?"شقة":s==="tr"?"Daire":"Apartment"}),e.jsx(E,{value:"villa",children:s==="ar"?"فيلا":"Villa"}),e.jsx(E,{value:"studio",children:s==="ar"?"استوديو":s==="tr"?"Stüdyo":"Studio"}),e.jsx(E,{value:"house",children:s==="ar"?"منزل":s==="tr"?"Ev":"House"}),e.jsx(E,{value:"office",children:s==="ar"?"مكتب":s==="tr"?"Ofis":"Office"}),e.jsx(E,{value:"shop",children:s==="ar"?"محل تجاري":s==="tr"?"Dükkan":"Shop"})]})]}),e.jsxs(X,{value:u,onValueChange:v,children:[e.jsx(J,{children:e.jsx(Z,{placeholder:s==="ar"?"الحالة":"Status"})}),e.jsxs(Q,{children:[e.jsx(E,{value:"all",children:s==="ar"?"جميع الحالات":"All Status"}),e.jsx(E,{value:"available",children:s==="ar"?"متاح":s==="tr"?"Müsait":"Available"}),e.jsx(E,{value:"pending",children:s==="ar"?"معلق":s==="tr"?"Beklemede":"Pending"}),e.jsx(E,{value:"sold",children:s==="ar"?"مباع":s==="tr"?"Satıldı":"Sold"}),e.jsx(E,{value:"rented",children:s==="ar"?"مؤجر":s==="tr"?"Kiralandı":"Rented"}),e.jsx(E,{value:"hidden",children:s==="ar"?"مخفي":s==="tr"?"Gizli":"Hidden"})]})]}),e.jsxs(X,{value:p,onValueChange:_,children:[e.jsx(J,{children:e.jsx(Z,{placeholder:s==="ar"?"نوع الإعلان":"Listing Type"})}),e.jsxs(Q,{children:[e.jsx(E,{value:"all",children:s==="ar"?"جميع الأنواع":"All Types"}),e.jsx(E,{value:"for_sale",children:s==="ar"?"للبيع":s==="tr"?"Satılık":"For Sale"}),e.jsx(E,{value:"for_rent",children:s==="ar"?"للإيجار":s==="tr"?"Kiralık":"For Rent"})]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(X,{value:f,onValueChange:N,children:[e.jsx(J,{className:"w-[200px]",children:e.jsx(Z,{placeholder:s==="ar"?"ترتيب حسب":"Sort by"})}),e.jsxs(Q,{children:[e.jsx(E,{value:"created_at",children:s==="ar"?"تاريخ الإضافة":"Created Date"}),e.jsx(E,{value:"title",children:s==="ar"?"العنوان":"Title"}),e.jsx(E,{value:"price",children:s==="ar"?"السعر":"Price"}),e.jsx(E,{value:"views_count",children:s==="ar"?"المشاهدات":"Views"})]})]}),e.jsxs(X,{value:y,onValueChange:B=>w(B),children:[e.jsx(J,{className:"w-[150px]",children:e.jsx(Z,{})}),e.jsxs(Q,{children:[e.jsx(E,{value:"desc",children:s==="ar"?"تنازلي":"Descending"}),e.jsx(E,{value:"asc",children:s==="ar"?"تصاعدي":"Ascending"})]})]})]})]})]}),e.jsx(R,{children:k?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Ke,{className:"w-6 h-6 animate-spin mr-2"}),e.jsx("span",{children:s==="ar"?"جاري التحميل...":"Loading..."})]}):ye.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Me,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:s==="ar"?"لا توجد عقارات":"No properties found"}),e.jsx("p",{className:"text-sm text-gray-500",children:s==="ar"?"جرب تغيير الفلاتر أو إضافة عقار جديد":"Try changing filters or add a new property"})]}):e.jsx(e.Fragment,{children:c==="cards"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ye.map(B=>e.jsx(Ii,{property:B,onToggleStatus:(z,Y)=>W(z,Y),onToggleHide:(z,Y)=>he(z,Y),onToggleSold:(z,Y)=>U(z,Y),onDelete:z=>ie(z),onToggleFeatured:(z,Y)=>H(z,Y),onOpenProperty:Pe,onEdit:z=>{console.log("Edit property:",z.id)}},B.id))}):e.jsx($i,{properties:ye,loading:k,onToggleStatus:(B,z)=>W(B,z),onDelete:B=>ie(B),onToggleFeatured:(B,z)=>H(B,z),onRefresh:le,onOpenProperty:Pe})})})]}),t&&e.jsx(Li,{onSubmit:ne,onCancel:()=>n(!1),isSubmitting:I})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:s==="ar"?"لا تملك صلاحيات الإدارة":"You do not have admin privileges"}),e.jsx("p",{className:"text-sm text-gray-500",children:s==="ar"?`المستخدم: ${A.email}`:`User: ${A.email}`})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:s==="ar"?"يجب تسجيل الدخول للوصول إلى الإدارة":"Please login to access admin panel"})})},Oi=()=>{const[s,a]=x.useState([]),[r,t]=x.useState(!0),{toast:n}=se(),c=async()=>{try{t(!0);const{data:m,error:h}=await T.from("profiles").select("id, full_name, username, user_type").in("user_type",["agent","property_owner","real_estate_office","partner_and_site_owner"]).order("full_name",{ascending:!0});if(h)throw h;if(!m||m.length===0){a([]);return}const d=m.map(_=>_.id),{data:g,error:u}=await T.from("user_property_limits").select("*").in("user_id",d).order("updated_at",{ascending:!1});if(u)throw u;const v=new Map;g&&g.forEach(_=>{v.set(_.user_id,_)});const p=m.map(_=>{const f=v.get(_.id);return{id:(f==null?void 0:f.id)||`temp-${_.id}`,user_id:_.id,property_limit:(f==null?void 0:f.property_limit)||10,notes:(f==null?void 0:f.notes)||null,created_at:(f==null?void 0:f.created_at)||new Date().toISOString(),updated_at:(f==null?void 0:f.updated_at)||new Date().toISOString(),created_by:(f==null?void 0:f.created_by)||null,profiles:_}});a(p)}catch(m){console.error("Error fetching property limits:",m),n({title:"خطأ",description:"فشل في تحميل حدود العقارات",variant:"destructive"})}finally{t(!1)}},o=async(m,h,d)=>{try{const{data:g,error:u}=await T.from("user_property_limits").update({property_limit:h,notes:d||null,updated_at:new Date().toISOString()}).eq("user_id",m).select();if(u||!g||g.length===0){const{error:v}=await T.from("user_property_limits").insert({user_id:m,property_limit:h,notes:d||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(v)if(v.code==="23505"){const{error:p}=await T.from("user_property_limits").update({property_limit:h,notes:d||null,updated_at:new Date().toISOString()}).eq("user_id",m);if(p)throw p}else throw v}return n({title:"نجح",description:"تم تحديث حد العقارات بنجاح"}),await c(),!0}catch(g){return console.error("Error updating property limit:",g),n({title:"خطأ",description:"فشل في تحديث حد العقارات",variant:"destructive"}),!1}},i=async m=>{try{const{data:h,error:d}=await T.rpc("get_user_property_count",{user_id_param:m});if(d)throw d;return h||0}catch(h){return console.error("Error getting user property count:",h),0}},l=async m=>{try{const{data:h,error:d}=await T.rpc("can_user_add_property",{user_id_param:m});if(d)throw d;return h||!1}catch(h){return console.error("Error checking if user can add property:",h),!1}};return x.useEffect(()=>{c()},[]),{limits:s,loading:r,fetchLimits:c,updateUserLimit:o,getUserCurrentCount:i,canUserAddProperty:l}},zi=()=>{var H,he;const{currentLanguage:s}=F(),a=nt(),{limits:r,loading:t,updateUserLimit:n,getUserCurrentCount:c}=Oi(),[o,i]=x.useState(null),[l,m]=x.useState(""),[h,d]=x.useState(""),[g,u]=x.useState({}),[v,p]=x.useState(!1),[_,f]=x.useState(""),[N,y]=x.useState(10),[w,M]=x.useState(!1);x.useEffect(()=>{const U=async()=>{const le={};for(const ue of r){const xe=await c(ue.user_id);le[ue.user_id]=xe}u(le)};r.length>0&&U()},[r]);const k=U=>{i(U),m(U.property_limit.toString()),d(U.notes||"")},b=async()=>{if(!o||!l)return;p(!0);const U=await n(o.user_id,parseInt(l),h);p(!1),U&&(i(null),m(""),d(""))},I=()=>{i(null),m(""),d("")},A=U=>{a(`/user/${U}`)},ne=async()=>{if(!(N<1)){M(!0);try{console.log("Default limit updated to:",N),alert(s==="ar"?`تم تحديث الحد الافتراضي إلى ${N} عقار`:`Default limit updated to ${N} properties`)}catch(U){console.error("Error updating default limit:",U),alert(s==="ar"?"فشل في تحديث الحد الافتراضي":"Failed to update default limit")}finally{M(!1)}}},ie=async()=>{if(!(N<1||!window.confirm(s==="ar"?`هل أنت متأكد من تطبيق الحد ${N} على جميع المستخدمين؟ سيتم استبدال جميع الحدود الحالية.`:`Are you sure you want to apply limit ${N} to all users? This will replace all current limits.`))){M(!0);try{for(const le of r)le.user_id&&await n(le.user_id,N,s==="ar"?`تم تطبيق الحد الافتراضي: ${N}`:`Applied default limit: ${N}`);alert(s==="ar"?`تم تطبيق الحد ${N} على جميع المستخدمين بنجاح`:`Successfully applied limit ${N} to all users`)}catch(le){console.error("Error applying default limit to all users:",le),alert(s==="ar"?"فشل في تطبيق الحد على جميع المستخدمين":"Failed to apply limit to all users")}finally{M(!1)}}},W=r.filter(U=>{var Ue,Pe,$e,Ie,Ne,B;if(!_)return!0;const le=_.toLowerCase(),ue=((Pe=(Ue=U.profiles)==null?void 0:Ue.full_name)==null?void 0:Pe.toLowerCase())||"",xe=((Ie=($e=U.profiles)==null?void 0:$e.username)==null?void 0:Ie.toLowerCase())||"",ye=((B=(Ne=U.profiles)==null?void 0:Ne.user_type)==null?void 0:B.toLowerCase())||"";return ue.includes(le)||xe.includes(le)||ye.includes(le)});return t?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s==="ar"?"إدارة حدود العقارات":"Property Limits Management"}),e.jsx("p",{className:"text-gray-600",children:s==="ar"?"تحكم في عدد العقارات المسموح لكل مستخدم بإضافتها":"Control the number of properties each user can add"})]}),e.jsxs(P,{className:"bg-blue-50 border-blue-200",children:[e.jsxs($,{className:"pb-3",children:[e.jsxs(O,{className:"text-lg flex items-center gap-2",children:[e.jsx(ba,{className:"w-5 h-5 text-blue-600"}),s==="ar"?"الحد الافتراضي للعقارات":"Default Property Limit"]}),e.jsx(q,{children:s==="ar"?"تحديد الحد الافتراضي للعقارات للمستخدمين الجدد":"Set the default property limit for new users"})]}),e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{htmlFor:"defaultLimit",className:"text-sm font-medium",children:s==="ar"?"الحد الافتراضي:":"Default Limit:"}),e.jsx(C,{id:"defaultLimit",type:"number",min:"1",max:"1000",value:N,onChange:U=>y(parseInt(U.target.value)||1),className:"w-24 text-center"}),e.jsx("span",{className:"text-sm text-gray-600",children:s==="ar"?"عقار":"properties"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{onClick:ne,disabled:w||N<1,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:w?e.jsxs(e.Fragment,{children:[e.jsx(Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),s==="ar"?"جاري الحفظ...":"Saving..."]}):s==="ar"?"حفظ":"Save"}),e.jsx(S,{onClick:ie,disabled:w||N<1,size:"sm",variant:"outline",className:"border-blue-600 text-blue-600 hover:bg-blue-50",children:s==="ar"?"تطبيق على الجميع":"Apply to All"})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-blue-200",children:[e.jsx("p",{className:"text-xs text-gray-500",children:s==="ar"?"سيتم تطبيق هذا الحد على جميع المستخدمين الجدد الذين لم يتم تحديد حد مخصص لهم":"This limit will be applied to all new users who do not have a custom limit set"}),e.jsx(G,{variant:"secondary",className:"text-xs",children:(()=>{const U=W.filter(le=>le.property_limit===N).length;return s==="ar"?`${U} مستخدم يستخدم هذا الحد`:`${U} users using this limit`})()})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(C,{type:"text",placeholder:s==="ar"?"البحث بالاسم أو اسم المستخدم أو النوع...":"Search by name, username, or type...",value:_,onChange:U=>f(U.target.value),className:"pl-10 pr-4"})]}),e.jsx(G,{variant:"outline",className:"text-sm",children:s==="ar"?`${W.length} مستخدم`:`${W.length} users`})]}),W.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s==="ar"?"لا توجد نتائج":"No results found"}),e.jsx("p",{className:"text-gray-500",children:s==="ar"?_?`لا توجد مستخدمين يطابقون "${_}"`:"لا توجد حدود عقارات محددة":_?`No users match "${_}"`:"No property limits set"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:W.map(U=>{var xe,ye,Ue,Pe,$e,Ie;const le=g[U.user_id]||0,ue=le/U.property_limit*100;return e.jsxs(P,{className:"hover:shadow-md transition-shadow",children:[e.jsxs($,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"text-lg cursor-pointer hover:text-blue-600 transition-colors",onClick:()=>{var Ne;return A(((Ne=U.profiles)==null?void 0:Ne.username)||"")},children:((xe=U.profiles)==null?void 0:xe.full_name)||"مستخدم غير معروف"}),e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>{var Ne;return A(((Ne=U.profiles)==null?void 0:Ne.username)||"")},className:"p-1 h-auto",children:e.jsx(es,{className:"w-3 h-3 text-gray-400"})})]}),e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>k(U),children:e.jsx(we,{className:"w-4 h-4"})})]}),e.jsxs(q,{className:"space-y-1",children:[e.jsxs("div",{children:["@",((ye=U.profiles)==null?void 0:ye.username)||"unknown"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(G,{variant:"secondary",className:"text-xs",children:[((Ue=U.profiles)==null?void 0:Ue.user_type)==="agent"&&(s==="ar"?"وسيط":s==="tr"?"Emlak Uzmanı":"Agent"),((Pe=U.profiles)==null?void 0:Pe.user_type)==="property_owner"&&(s==="ar"?"مالك عقار":s==="tr"?"Mülk Sahibi":"Property Owner"),(($e=U.profiles)==null?void 0:$e.user_type)==="real_estate_office"&&(s==="ar"?"مكتب عقاري":s==="tr"?"Emlak Ofisi":"Real Estate Office"),((Ie=U.profiles)==null?void 0:Ie.user_type)==="partner_and_site_owner"&&(s==="ar"?"شريك ومالك موقع":s==="tr"?"Ortak ve Site Sahibi":"Partner & Site Owner")]})})]})]}),e.jsxs(R,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:s==="ar"?"الحد الأقصى:":"Limit:"}),e.jsxs(G,{variant:"outline",children:[U.property_limit," ",s==="ar"?"عقار":"properties"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:s==="ar"?"المستخدم حالياً:":"Currently used:"}),e.jsxs("span",{className:"font-medium",children:[le," / ",U.property_limit]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${ue>=90?"bg-red-500":ue>=70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(ue,100)}%`}})}),U.notes&&e.jsx("div",{className:"text-xs text-gray-500 bg-gray-50 p-2 rounded",children:U.notes})]})]},U.id)})}),e.jsx(Lt,{open:!!o,onOpenChange:I,children:e.jsxs(Ut,{className:"sm:max-w-md",children:[e.jsxs($t,{children:[e.jsx(It,{children:s==="ar"?"تعديل حد العقارات":"Edit Property Limit"}),e.jsx(Bt,{children:s==="ar"?`تعديل حد العقارات للمستخدم: ${(H=o==null?void 0:o.profiles)==null?void 0:H.full_name}`:`Edit property limit for user: ${(he=o==null?void 0:o.profiles)==null?void 0:he.full_name}`})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"limit",children:s==="ar"?"الحد الأقصى للعقارات":"Property Limit"}),e.jsx(C,{id:"limit",type:"number",min:"1",value:l,onChange:U=>m(U.target.value),placeholder:s==="ar"?"أدخل الحد الأقصى":"Enter limit"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"notes",children:s==="ar"?"ملاحظات (اختيارية)":"Notes (Optional)"}),e.jsx(V,{id:"notes",value:h,onChange:U=>d(U.target.value),placeholder:s==="ar"?"أي ملاحظات إضافية...":"Any additional notes...",rows:3})]})]}),e.jsxs(Ot,{className:"gap-2",children:[e.jsx(S,{variant:"outline",onClick:I,children:s==="ar"?"إلغاء":"Cancel"}),e.jsx(S,{onClick:b,disabled:!l||v,children:v?s==="ar"?"جاري الحفظ...":"Saving...":s==="ar"?"حفظ":"Save"})]})]})})]})},Vi=({propertyTypes:s,loading:a,onEdit:r,onRefresh:t})=>{const{currentLanguage:n}=F(),{toast:c}=se(),[o,i]=x.useState(null),l=async m=>{i(m);try{const{error:h}=await T.from("property_types").update({is_active:!1}).eq("id",m);if(h)throw h;c({title:n==="ar"?"تم الحذف بنجاح":"Deleted Successfully",description:n==="ar"?"تم حذف نوع العقار بنجاح":"Property type deleted successfully"}),t()}catch(h){console.error("Error deleting property type:",h),c({title:n==="ar"?"خطأ":"Error",description:n==="ar"?"فشل في حذف نوع العقار":"Failed to delete property type",variant:"destructive"})}finally{i(null)}};return a?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((m,h)=>e.jsx("div",{className:"animate-shimmer bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 bg-[length:200%_100%] h-16 rounded"},h))}):s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qs,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:n==="ar"?"لا توجد أنواع عقارات":"No Property Types"}),e.jsx("p",{className:"text-gray-500",children:n==="ar"?"ابدأ بإضافة نوع عقار جديد":"Start by adding a new property type"})]}):e.jsx("div",{className:"space-y-4",children:e.jsxs(ke,{children:[e.jsx(Ee,{children:e.jsxs(ee,{children:[e.jsx(L,{children:n==="ar"?"الاسم بالعربية":"Arabic Name"}),e.jsx(L,{children:n==="ar"?"الاسم بالإنجليزية":"English Name"}),e.jsx(L,{children:n==="ar"?"الاسم بالتركية":"Turkish Name"}),e.jsx(L,{children:n==="ar"?"الحالة":"Status"}),e.jsx(L,{children:n==="ar"?"الإجراءات":"Actions"})]})}),e.jsx(Ae,{children:s.map(m=>e.jsxs(ee,{children:[e.jsx(D,{className:"font-medium",children:m.name_ar}),e.jsx(D,{children:m.name_en}),e.jsx(D,{children:m.name_tr}),e.jsx(D,{children:e.jsx(G,{variant:m.is_active?"default":"secondary",children:m.is_active?n==="ar"?"نشط":"Active":n==="ar"?"غير نشط":"Inactive"})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(S,{variant:"outline",size:"sm",onClick:()=>r(m),className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"}),n==="ar"?"تعديل":"Edit"]}),e.jsxs(Ts,{children:[e.jsx(Xs,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"sm",disabled:o===m.id,className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[e.jsx(me,{className:"w-4 h-4"}),n==="ar"?"حذف":"Delete"]})}),e.jsxs(ts,{children:[e.jsxs(ns,{children:[e.jsx(ls,{children:n==="ar"?"تأكيد الحذف":"Confirm Delete"}),e.jsx(cs,{children:n==="ar"?`هل أنت متأكد من حذف نوع العقار "${js(m,n)}"؟ هذا الإجراء لا يمكن التراجع عنه.`:`Are you sure you want to delete the property type "${js(m,n)}"? This action cannot be undone.`})]}),e.jsxs(is,{children:[e.jsx(ds,{children:n==="ar"?"إلغاء":"Cancel"}),e.jsx(os,{onClick:()=>l(m.id),className:"bg-red-600 hover:bg-red-700",children:n==="ar"?"حذف":"Delete"})]})]})]})]})})]},m.id))})]})})},qi=({propertyType:s,onClose:a})=>{const{currentLanguage:r}=F(),{toast:t}=se(),{user:n}=Ns(),[c,o]=x.useState(!1),[i,l]=x.useState({name_ar:"",name_en:"",name_tr:"",is_active:!0});x.useEffect(()=>{s&&l({name_ar:s.name_ar||"",name_en:s.name_en||"",name_tr:s.name_tr||"",is_active:s.is_active??!0})},[s]);const m=(d,g)=>{l(u=>({...u,[d]:g}))},h=async d=>{if(d.preventDefault(),!i.name_ar||!i.name_en||!i.name_tr){t({title:r==="ar"?"خطأ":"Error",description:r==="ar"?"يرجى ملء جميع الحقول المطلوبة":"Please fill all required fields",variant:"destructive"});return}o(!0);try{if(s){const{error:g}=await T.from("property_types").update({name_ar:i.name_ar,name_en:i.name_en,name_tr:i.name_tr,is_active:i.is_active,updated_at:new Date().toISOString()}).eq("id",s.id);if(g)throw g;t({title:r==="ar"?"تم التحديث بنجاح":"Updated Successfully",description:r==="ar"?"تم تحديث نوع العقار بنجاح":"Property type updated successfully"})}else{const{error:g}=await T.from("property_types").insert({name_ar:i.name_ar,name_en:i.name_en,name_tr:i.name_tr,is_active:i.is_active,created_by:(n==null?void 0:n.id)||"00000000-0000-0000-0000-000000000000"});if(g)throw g;t({title:r==="ar"?"تم الإنشاء بنجاح":"Created Successfully",description:r==="ar"?"تم إنشاء نوع العقار بنجاح":"Property type created successfully"})}a()}catch(g){console.error("Error saving property type:",g),t({title:r==="ar"?"خطأ":"Error",description:r==="ar"?"فشل في حفظ نوع العقار":"Failed to save property type",variant:"destructive"})}finally{o(!1)}};return e.jsxs(P,{children:[e.jsxs($,{children:[e.jsx(O,{children:s?r==="ar"?"تعديل نوع العقار":"Edit Property Type":r==="ar"?"إضافة نوع عقار جديد":"Add New Property Type"}),e.jsx(q,{children:r==="ar"?"أدخل أسماء نوع العقار بالثلاث لغات":"Enter the property type names in all three languages"})]}),e.jsx(R,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"name_ar",children:r==="ar"?"الاسم بالعربية *":"Arabic Name *"}),e.jsx(C,{id:"name_ar",value:i.name_ar,onChange:d=>m("name_ar",d.target.value),placeholder:r==="ar"?"مثال: شقة":"Example: شقة",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"name_en",children:r==="ar"?"الاسم بالإنجليزية *":"English Name *"}),e.jsx(C,{id:"name_en",value:i.name_en,onChange:d=>m("name_en",d.target.value),placeholder:"Example: Apartment",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"name_tr",children:r==="ar"?"الاسم بالتركية *":"Turkish Name *"}),e.jsx(C,{id:"name_tr",value:i.name_tr,onChange:d=>m("name_tr",d.target.value),placeholder:"Örnek: Daire",required:!0})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"is_active",checked:i.is_active,onCheckedChange:d=>m("is_active",d)}),e.jsx(j,{htmlFor:"is_active",children:r==="ar"?"نشط":"Active"})]}),e.jsxs("div",{className:"flex gap-4 justify-end",children:[e.jsx(S,{type:"button",variant:"outline",onClick:a,disabled:c,children:r==="ar"?"إلغاء":"Cancel"}),e.jsx(S,{type:"submit",disabled:c,children:c?r==="ar"?"جاري الحفظ...":"Saving...":s?r==="ar"?"تحديث":"Update":r==="ar"?"إضافة":"Add"})]})]})})]})},Gi=({propertyLayouts:s,loading:a,onEdit:r,onRefresh:t})=>{const{currentLanguage:n}=F(),{toast:c}=se(),{propertyTypes:o}=zs();console.log("PropertyLayoutsList received:",{layoutsCount:s.length,propertyTypesCount:o.length,loading:a});const i=m=>{if(!m)return n==="ar"?"غير محدد":"Not specified";const h=o.find(d=>d.id===m);return console.log("Finding property type for ID:",m,"Found:",h),h?js(h,n):n==="ar"?"نوع غير معروف":"Unknown type"},l=async m=>{if(confirm(n==="ar"?"هل أنت متأكد من حذف هذا التقسيم؟":"Are you sure you want to delete this layout?"))try{const{error:h}=await T.from("property_layouts").update({is_active:!1}).eq("id",m);if(h)throw h;c({title:n==="ar"?"تم الحذف بنجاح":"Deleted successfully",description:n==="ar"?"تم حذف التقسيم بنجاح":"Layout deleted successfully"}),t()}catch(h){console.error("Error deleting layout:",h),c({title:n==="ar"?"خطأ":"Error",description:n==="ar"?"فشل في حذف التقسيم":"Failed to delete layout",variant:"destructive"})}};return a?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(K,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:n==="ar"?"جاري التحميل...":"Loading..."})]}):s.length===0?e.jsx(P,{children:e.jsxs(R,{className:"text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:n==="ar"?"لا توجد تقسيمات عقارات":"No property layouts found"}),e.jsx("p",{className:"text-sm text-gray-500",children:n==="ar"?'انقر على "إضافة تقسيم جديد" لإضافة أول تقسيم':'Click "Add New Layout" to add your first layout'})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:n==="ar"?`عدد التقسيمات: ${s.length}`:`Total layouts: ${s.length}`}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((m,h)=>(console.log(`Rendering layout ${h+1}:`,m),e.jsxs(P,{className:"hover:shadow-md transition-shadow",children:[e.jsxs($,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{className:"text-lg",children:zt(m,n)}),e.jsx(G,{variant:"secondary",children:n==="ar"?"نشط":"Active"})]}),e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:i(m.property_type_id||"")})]}),e.jsxs(R,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:n==="ar"?"العربية:":"Arabic:"})," ",m.name_ar]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:n==="ar"?"الإنجليزية:":"English:"})," ",m.name_en]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:n==="ar"?"التركية:":"Turkish:"})," ",m.name_tr]}),m.property_type_id&&e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("strong",{children:n==="ar"?"معرف النوع:":"Type ID:"})," ",m.property_type_id]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs(S,{size:"sm",variant:"outline",onClick:()=>r(m),className:"flex-1",children:[e.jsx(we,{className:"w-4 h-4 mr-1"}),n==="ar"?"تعديل":"Edit"]}),e.jsxs(S,{size:"sm",variant:"destructive",onClick:()=>l(m.id),className:"flex-1",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),n==="ar"?"حذف":"Delete"]})]})]})]},m.id)))})]})},Wi=({propertyLayout:s,onClose:a})=>{const{currentLanguage:r}=F(),{toast:t}=se(),{propertyTypes:n}=zs(),[c,o]=x.useState(!1),[i,l]=x.useState({name_ar:"",name_en:"",name_tr:"",property_type_id:""});x.useEffect(()=>{s&&l({name_ar:s.name_ar||"",name_en:s.name_en||"",name_tr:s.name_tr||"",property_type_id:s.property_type_id||""})},[s]);const m=async d=>{d.preventDefault(),o(!0);try{const{data:{user:g}}=await T.auth.getUser();if(!g)throw new Error("User not authenticated");if(!i.property_type_id){t({title:r==="ar"?"خطأ":"Error",description:r==="ar"?"يجب اختيار نوع العقار":"Property type is required",variant:"destructive"});return}if(s){const{error:u}=await T.from("property_layouts").update({...i,updated_at:new Date().toISOString()}).eq("id",s.id);if(u)throw u;t({title:r==="ar"?"تم التحديث بنجاح":"Updated successfully",description:r==="ar"?"تم تحديث التقسيم بنجاح":"Layout updated successfully"})}else{const{error:u}=await T.from("property_layouts").insert([{...i,created_by:g.id,is_active:!0}]);if(u)throw u;t({title:r==="ar"?"تم الإنشاء بنجاح":"Created successfully",description:r==="ar"?"تم إنشاء التقسيم بنجاح":"Layout created successfully"})}a()}catch(g){console.error("Error saving layout:",g),t({title:r==="ar"?"خطأ":"Error",description:r==="ar"?"فشل في حفظ التقسيم":"Failed to save layout",variant:"destructive"})}finally{o(!1)}},h=(d,g)=>{l(u=>({...u,[d]:g}))};return e.jsxs(P,{children:[e.jsx($,{children:e.jsx(O,{children:s?r==="ar"?"تعديل التقسيم":"Edit Layout":r==="ar"?"إضافة تقسيم جديد":"Add New Layout"})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"property_type_id",children:r==="ar"?"نوع العقار *":"Property Type *"}),e.jsxs(X,{value:i.property_type_id,onValueChange:d=>h("property_type_id",d),children:[e.jsx(J,{children:e.jsx(Z,{placeholder:r==="ar"?"اختر نوع العقار":"Select property type"})}),e.jsx(Q,{children:n.map(d=>e.jsx(E,{value:d.id,children:js(d,r)},d.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"name_ar",children:r==="ar"?"الاسم بالعربية *":"Arabic Name *"}),e.jsx(C,{id:"name_ar",value:i.name_ar,onChange:d=>h("name_ar",d.target.value),placeholder:r==="ar"?"أدخل الاسم بالعربية":"Enter name in Arabic",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"name_en",children:r==="ar"?"الاسم بالإنجليزية *":"English Name *"}),e.jsx(C,{id:"name_en",value:i.name_en,onChange:d=>h("name_en",d.target.value),placeholder:"Enter name in English",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"name_tr",children:r==="ar"?"الاسم بالتركية *":"Turkish Name *"}),e.jsx(C,{id:"name_tr",value:i.name_tr,onChange:d=>h("name_tr",d.target.value),placeholder:"Türkçe isim girin",required:!0})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(S,{type:"submit",disabled:c,children:c?r==="ar"?"جاري الحفظ...":"Saving...":r==="ar"?"حفظ":"Save"}),e.jsx(S,{type:"button",variant:"outline",onClick:a,children:r==="ar"?"إلغاء":"Cancel"})]})]})})]})},Hi=()=>{const{currentLanguage:s}=F(),{propertyTypes:a,loading:r}=zs(),[t,n]=x.useState(0),{propertyLayouts:c,loading:o,fetchPropertyLayouts:i}=Vt(t),l=xa(),[m,h]=x.useState(!1),[d,g]=x.useState(null),[u,v]=x.useState(!1),[p,_]=x.useState(null),f=()=>{g(null),h(!0)},N=A=>{g(A),h(!0)},y=()=>{h(!1),g(null),l.invalidateQueries({queryKey:["propertyTypes"]})},w=()=>{l.invalidateQueries({queryKey:["propertyTypes"]})},M=()=>{_(null),v(!0)},k=A=>{_(A),v(!0)},b=()=>{v(!1),_(null),n(A=>A+1)},I=()=>{n(A=>A+1),i()};return e.jsx("div",{className:"space-y-6",dir:s==="ar"?"rtl":"ltr",children:e.jsxs(P,{children:[e.jsxs($,{children:[e.jsx(O,{children:s==="ar"?"إدارة أنواع العقارات وتقسيماتها":s==="tr"?"Emlak Türleri ve Düzenleri Yönetimi":"Property Types & Layouts Management"}),e.jsx(q,{children:s==="ar"?"إضافة وتعديل وحذف أنواع العقارات وتقسيماتها":s==="tr"?"Emlak türlerini ve düzenlerini ekleyin, düzenleyin ve silin":"Add, edit and delete property types and layouts"})]}),e.jsx(R,{children:e.jsxs(Te,{defaultValue:"types",className:"space-y-4",children:[e.jsxs(Fe,{className:"grid w-full grid-cols-2",children:[e.jsx(ae,{value:"types",children:s==="ar"?"أنواع العقارات":s==="tr"?"Emlak Türleri":"Property Types"}),e.jsx(ae,{value:"layouts",children:s==="ar"?"تقسيمات العقارات":s==="tr"?"Emlak Düzenleri":"Property Layouts"})]}),e.jsxs(re,{value:"types",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:s==="ar"?"أنواع العقارات":"Property Types"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s==="ar"?"إدارة أنواع العقارات المختلفة":"Manage different property types"})]}),e.jsxs(S,{onClick:f,className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),s==="ar"?"إضافة نوع جديد":s==="tr"?"Yeni Tür Ekle":"Add New Type"]})]}),m?e.jsx(qi,{propertyType:d,onClose:y}):e.jsx(Vi,{propertyTypes:a,loading:r,onEdit:N,onRefresh:w})]}),e.jsxs(re,{value:"layouts",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:s==="ar"?"تقسيمات العقارات":"Property Layouts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s==="ar"?"إدارة تقسيمات العقارات لكل نوع":"Manage property layouts for each type"})]}),e.jsxs(S,{onClick:M,className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),s==="ar"?"إضافة تقسيم جديد":s==="tr"?"Yeni Düzen Ekle":"Add New Layout"]})]}),u?e.jsx(Wi,{propertyLayout:p,onClose:b}):e.jsx(Gi,{propertyLayouts:c,loading:o,onEdit:k,onRefresh:I})]})]})})]})})},Yi=s=>{const{currentLanguage:a}=F(),{toast:r}=se(),[t,n]=x.useState(!1);return{grantTrial:async(i,l,m=!1)=>{n(!0);try{const h={is_trial_active:!0,trial_started_at:new Date().toISOString(),updated_at:new Date().toISOString()};m&&(h.trial_started_at="2000-01-01T00:00:00.000Z");const{error:d}=await T.from("profiles").update(h).eq("id",i);if(d){console.error("Error granting trial:",d),r({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"فشل في منح التجربة المجانية":"Failed to grant free trial",variant:"destructive"});return}r({title:a==="ar"?"تم بنجاح":"Success",description:a==="ar"?`تم منح ${m?"تجربة مجانية دائمة":"تجربة مجانية"} للمستخدم ${l}`:`${m?"Permanent free trial":"Free trial"} granted to user ${l}`}),s()}catch(h){console.error("Error granting trial:",h),r({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"حدث خطأ غير متوقع":"An unexpected error occurred",variant:"destructive"})}finally{n(!1)}},endTrial:async(i,l)=>{n(!0);try{const{error:m}=await T.from("profiles").update({is_trial_active:!1,updated_at:new Date().toISOString()}).eq("id",i);if(m){console.error("Error ending trial:",m),r({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"فشل في إنهاء التجربة المجانية":"Failed to end free trial",variant:"destructive"});return}r({title:a==="ar"?"تم بنجاح":"Success",description:a==="ar"?`تم إنهاء التجربة المجانية للمستخدم ${l}`:`Free trial ended for user ${l}`}),s()}catch(m){console.error("Error ending trial:",m),r({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"حدث خطأ غير متوقع":"An unexpected error occurred",variant:"destructive"})}finally{n(!1)}},isProcessing:t}},Ki=({userId:s,userName:a,userType:r,isTrialActive:t,trialStartedAt:n,onTrialUpdated:c})=>{const{currentLanguage:o}=F(),{grantTrial:i,endTrial:l,isProcessing:m}=Yi(c),[h,d]=x.useState(null);if(r==="client")return null;const g=n&&new Date(n)<new Date("2010-01-01"),u=async()=>{h&&(h==="grant"?await i(s,a,!1):h==="permanent"?await i(s,a,!0):h==="end"&&await l(s,a),d(null))};return e.jsxs("div",{className:"flex items-center gap-2",children:[t&&e.jsx(G,{variant:g?"default":"secondary",className:"text-xs",children:g?e.jsxs(e.Fragment,{children:[e.jsx(ss,{className:"w-3 h-3 mr-1"}),o==="ar"?"دائمة":"Permanent"]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),o==="ar"?"نشطة":"Active"]})}),t?e.jsxs(S,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>d("end"),disabled:m,children:[m?e.jsx(K,{className:"w-4 h-4 animate-spin mr-1"}):e.jsx(Aa,{className:"w-4 h-4 mr-1"}),o==="ar"?"إنهاء التجربة":"End Trial"]}):e.jsxs(it,{children:[e.jsx(lt,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"sm",className:"text-green-600 hover:text-green-700 hover:bg-green-50",disabled:m,children:[m?e.jsx(K,{className:"w-4 h-4 animate-spin mr-1"}):e.jsx(dn,{className:"w-4 h-4 mr-1"}),o==="ar"?"منح تجربة":"Grant Trial",e.jsx(kt,{className:"w-3 h-3 ml-1"})]})}),e.jsxs(ct,{children:[e.jsxs(sa,{onClick:()=>d("grant"),children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),o==="ar"?"تجربة مجانية عادية":"Normal Free Trial"]}),e.jsxs(sa,{onClick:()=>d("permanent"),children:[e.jsx(ss,{className:"w-4 h-4 mr-2"}),o==="ar"?"تجربة مجانية دائمة":"Permanent Free Trial"]})]})]}),e.jsx(Ts,{open:h!==null,onOpenChange:()=>d(null),children:e.jsxs(ts,{children:[e.jsxs(ns,{children:[e.jsxs(ls,{children:[h==="grant"&&(o==="ar"?"منح تجربة مجانية؟":"Grant Free Trial?"),h==="permanent"&&(o==="ar"?"منح تجربة مجانية دائمة؟":"Grant Permanent Free Trial?"),h==="end"&&(o==="ar"?"إنهاء التجربة المجانية؟":"End Free Trial?")]}),e.jsxs(cs,{children:[h==="grant"&&(o==="ar"?`هل أنت متأكد من أنك تريد منح تجربة مجانية عادية للمستخدم "${a}"؟`:`Are you sure you want to grant a normal free trial to user "${a}"?`),h==="permanent"&&(o==="ar"?`هل أنت متأكد من أنك تريد منح تجربة مجانية دائمة للمستخدم "${a}"؟ ستبقى نشطة حتى تقوم بإغلاقها يدوياً.`:`Are you sure you want to grant a permanent free trial to user "${a}"? It will remain active until you manually close it.`),h==="end"&&(o==="ar"?`هل أنت متأكد من أنك تريد إنهاء التجربة المجانية للمستخدم "${a}"؟`:`Are you sure you want to end the free trial for user "${a}"?`)]})]}),e.jsxs(is,{children:[e.jsx(ds,{children:o==="ar"?"إلغاء":"Cancel"}),e.jsx(os,{onClick:u,className:h==="end"?"bg-red-600 hover:bg-red-700":"",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 animate-spin mr-2"}),o==="ar"?"جارٍ العملية...":"Processing..."]}):e.jsxs(e.Fragment,{children:[h==="grant"&&(o==="ar"?"منح تجربة":"Grant Trial"),h==="permanent"&&(o==="ar"?"منح تجربة دائمة":"Grant Permanent"),h==="end"&&(o==="ar"?"إنهاء التجربة":"End Trial")]})})]})]})})]})},Sr=({user:s,onToggleApproval:a,onUpdateUserType:r,onDeleteUser:t,onTrialUpdated:n,onToggleVerification:c,onToggleSuspension:o})=>{const{currentLanguage:i}=F(),{unsuspendUser:l}=qt(),m=s.user_type==="agent"||s.user_type==="property_owner"||s.user_type==="real_estate_office"||s.user_type==="partner_and_site_owner",h=async()=>{(await l(s.id)).success&&n&&n()},d=s.is_suspended&&s.suspension_end_date;return e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs(X,{value:s.user_type,onValueChange:g=>r(s.id,g),children:[e.jsx(J,{className:"w-36",children:e.jsx(Z,{})}),e.jsxs(Q,{children:[e.jsx(E,{value:"client",children:i==="ar"?"عميل":"Client"}),e.jsx(E,{value:"agent",children:i==="ar"?"وسيط":i==="tr"?"Acente":"Agent"}),e.jsx(E,{value:"property_owner",children:i==="ar"?"مالك عقار":"Property Owner"}),e.jsx(E,{value:"real_estate_office",children:i==="ar"?"مكتب عقارات":"Real Estate Office"}),e.jsx(E,{value:"partner_and_site_owner",children:i==="ar"?"شريك ومالك الموقع":"Partner & Site Owner"}),e.jsx(E,{value:"support",children:i==="ar"?"دعم فني":i==="tr"?"Destek":"Support"})]})]}),e.jsx(S,{size:"sm",variant:s.is_verified?"outline":"default",onClick:()=>c(s.id,s.is_verified||!1),className:"text-xs bg-amber-500 hover:bg-amber-600",children:s.is_verified?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-3 h-3 mr-1"}),i==="ar"?"إلغاء التوثيق":"Unverify"]}):e.jsxs(e.Fragment,{children:[e.jsx(bt,{className:"w-3 h-3 mr-1"}),i==="ar"?"توثيق":"Verify"]})}),s.is_suspended?e.jsxs(S,{size:"sm",variant:"outline",onClick:h,className:"text-xs text-green-600 border-green-600 hover:bg-green-50",children:[e.jsx(_n,{className:"w-3 h-3 mr-1"}),i==="ar"?"إلغاء الحظر":i==="tr"?"Aktif Et":"Unsuspend",d&&e.jsxs("span",{className:"ml-1 text-xs text-gray-500",children:["(",i==="ar"?"مؤقت":"Temp",")"]})]}):e.jsx(Gt,{userId:s.id,userName:s.full_name||s.email,onSuspensionUpdated:n||(()=>{}),trigger:e.jsxs(S,{size:"sm",variant:"outline",className:"text-xs text-red-600 border-red-600 hover:bg-red-50",children:[e.jsx(rs,{className:"w-3 h-3 mr-1"}),i==="ar"?"حظر":i==="tr"?"Askıya Al":"Suspend"]})}),m&&e.jsxs(e.Fragment,{children:[e.jsx(S,{size:"sm",variant:s.is_approved?"outline":"default",onClick:()=>a(s.id,s.is_approved),className:"text-xs",children:s.is_approved?e.jsxs(e.Fragment,{children:[e.jsx(Ht,{className:"w-3 h-3 mr-1"}),i==="ar"?"إلغاء":"Reject"]}):e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"w-3 h-3 mr-1"}),i==="ar"?"موافقة":"Approve"]})}),e.jsx(Ki,{userId:s.id,userName:s.full_name||s.email,userType:s.user_type,isTrialActive:s.is_trial_active||!1,trialStartedAt:s.trial_started_at,onTrialUpdated:n||(()=>{})})]}),e.jsx(S,{size:"sm",variant:"destructive",onClick:()=>t(s.id,s.email),className:"text-xs",children:e.jsx(me,{className:"w-3 h-3"})})]})},Xi=({users:s,onToggleApproval:a,onUpdateUserType:r,onDeleteUser:t,onTrialUpdated:n,onToggleVerification:c,onToggleSuspension:o})=>{const{currentLanguage:i}=F(),l=h=>new Date(h).toLocaleDateString(i==="ar"?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric"}),m=h=>h.full_name?h.full_name.trim().split(" ")[0].substring(0,2).toUpperCase():h.email?h.email.substring(0,2).toUpperCase():"U";return s.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:i==="ar"?"لا توجد مستخدمين":"No users found"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ke,{children:[e.jsx(Ee,{children:e.jsxs(ee,{children:[e.jsx(L,{children:i==="ar"?"الاسم":"Name"}),e.jsx(L,{className:"min-w-[250px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-blue-600"}),i==="ar"?"البريد الإلكتروني":"Email Address"]})}),e.jsx(L,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4 text-green-600"}),i==="ar"?"رقم الهاتف":"Phone Number"]})}),e.jsx(L,{children:i==="ar"?"النوع":"Type"}),e.jsx(L,{children:i==="ar"?"الحالة":"Status"}),e.jsx(L,{children:i==="ar"?"التجربة المجانية":"Free Trial"}),e.jsx(L,{children:i==="ar"?"تاريخ التسجيل":"Registration Date"}),e.jsx(L,{children:i==="ar"?"الإجراءات":"Actions"})]})}),e.jsx(Ae,{children:s.map(h=>{const d=h.trial_started_at&&new Date(h.trial_started_at)<new Date("2010-01-01");return e.jsxs(ee,{className:h.is_suspended?"bg-red-50":"",children:[e.jsx(D,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ws,{className:"w-10 h-10",children:[e.jsx(Cs,{src:h.avatar_url,alt:h.full_name||"User"}),e.jsx(Ss,{className:"text-sm font-bold bg-gradient-to-br from-brand-gradient-from to-brand-gradient-to text-white",children:m(h)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{children:h.full_name||(i==="ar"?"غير محدد":"Not specified")}),h.is_verified&&e.jsx(Ca,{size:"sm"})]})]})}),e.jsx(D,{className:"min-w-[250px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),h.email&&!h.email.includes("@temp-email.com")?e.jsx("a",{href:`mailto:${h.email}`,className:"text-sm font-medium text-blue-700 hover:text-blue-900 hover:underline transition-colors break-all",title:i==="ar"?"إرسال إيميل":"Send Email",children:h.email}):e.jsxs("div",{className:"text-sm break-all",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:h.username||h.full_name||"مستخدم"}),e.jsx("div",{className:"text-xs text-orange-600",children:i==="ar"?"إيميل مؤقت":"Temp Email"})]})]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4 text-green-600"}),h.phone?e.jsx("a",{href:`tel:${h.phone}`,className:"text-sm text-green-600 hover:text-green-800 hover:underline transition-colors",title:i==="ar"?"اتصال":"Call",children:h.phone}):e.jsx("span",{className:"text-sm text-gray-500",children:i==="ar"?"غير محدد":"Not specified"})]})}),e.jsx(D,{children:e.jsxs(G,{variant:"outline",children:[h.user_type==="client"&&(i==="ar"?"عميل":"Client"),h.user_type==="agent"&&(i==="ar"?"وسيط":i==="tr"?"Acente":"Agent"),h.user_type==="property_owner"&&(i==="ar"?"مالك عقار":"Property Owner"),h.user_type==="real_estate_office"&&(i==="ar"?"مكتب عقارات":"Real Estate Office"),h.user_type==="partner_and_site_owner"&&(i==="ar"?"شريك ومالك الموقع":"Partner & Site Owner")]})}),e.jsx(D,{children:h.is_suspended?e.jsxs(G,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(rs,{className:"w-3 h-3"}),i==="ar"?"موقوف":i==="tr"?"Askıya Alındı":"Suspended"]}):e.jsx(G,{variant:h.is_approved?"default":"secondary",children:h.is_approved?i==="ar"?"موافق عليه":"Approved":i==="ar"?"في انتظار الموافقة":"Pending"})}),e.jsx(D,{children:h.user_type!=="client"&&e.jsx(e.Fragment,{children:h.is_trial_active?e.jsx(G,{variant:d?"default":"secondary",children:d?e.jsxs(e.Fragment,{children:[e.jsx(ss,{className:"w-3 h-3 mr-1"}),i==="ar"?"دائمة":"Permanent"]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),i==="ar"?"نشطة":"Active"]})}):e.jsx(G,{variant:"outline",children:i==="ar"?"غير نشطة":"Inactive"})})}),e.jsx(D,{className:"text-sm text-gray-500",children:l(h.created_at)}),e.jsx(D,{children:e.jsx(Sr,{user:h,onToggleApproval:a,onToggleVerification:c,onUpdateUserType:r,onDeleteUser:t,onTrialUpdated:n,onToggleSuspension:o})})]},h.id)})})]})})},Ji=({user:s,onToggleApproval:a,onToggleVerification:r,onUpdateUserType:t,onDeleteUser:n,onTrialUpdated:c,onToggleSuspension:o,onOpenProfile:i})=>{const{currentLanguage:l}=F(),[m,h]=x.useState(!1),d=p=>new Date(p).toLocaleDateString(l==="ar"?"ar-EG":"en-US",{year:"numeric",month:"short",day:"numeric",calendar:"gregory"}),g=p=>{switch(p){case"client":return l==="ar"?"عميل":"Client";case"agent":return l==="ar"?"وسيط":l==="tr"?"Acente":"Agent";case"property_owner":return l==="ar"?"مالك عقار":"Property Owner";case"real_estate_office":return l==="ar"?"مكتب عقارات":"Real Estate Office";case"partner_and_site_owner":return l==="ar"?"شريك ومالك الموقع":"Partner & Site Owner";case"support":return l==="ar"?"دعم فني":l==="tr"?"Destek":"Support";default:return p}},u=()=>s.full_name?s.full_name.trim().split(" ")[0].substring(0,2).toUpperCase():s.email?s.email.substring(0,2).toUpperCase():"U",v=s.trial_started_at&&new Date(s.trial_started_at)<new Date("2010-01-01");return e.jsxs(P,{className:`h-full transition-all duration-200 hover:shadow-lg ${s.is_suspended?"border-red-200 bg-red-50/30":"hover:border-primary/20"}`,children:[e.jsxs(R,{className:"p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsxs(ws,{className:"w-16 h-16",children:[e.jsx(Cs,{src:s.avatar_url,alt:s.full_name||"User"}),e.jsx(Ss,{className:"text-lg font-bold bg-gradient-to-br from-brand-gradient-from to-brand-gradient-to text-white",children:u()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",children:s.full_name||(l==="ar"?"غير محدد":"Not specified")}),s.is_verified&&e.jsx(Ca,{size:"sm"}),e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>i(s.username||s.id),className:"ml-auto p-1 h-auto hover:bg-blue-50",title:l==="ar"?"فتح الملف الشخصي":"Open Profile",children:e.jsx(es,{className:"w-4 h-4 text-blue-600"})})]}),e.jsx(G,{variant:"outline",className:"mb-2",children:g(s.user_type)})]})]}),e.jsxs("div",{className:"space-y-3 mb-4 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors border border-blue-200",children:[e.jsx(Oe,{className:"w-5 h-5 flex-shrink-0 text-blue-600"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs font-medium text-blue-700 mb-1",children:l==="ar"?"البريد الإلكتروني":"Email Address"}),s.email&&!s.email.includes("@temp-email.com")?e.jsx("a",{href:`mailto:${s.email}`,className:"text-sm font-semibold text-blue-700 hover:text-blue-900 hover:underline transition-colors block break-all",title:l==="ar"?"إرسال إيميل":"Send Email",children:s.email}):e.jsxs("div",{className:"text-sm block break-all",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:s.username||s.full_name||"مستخدم"}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:l==="ar"?"إيميل مؤقت - يحتاج تحديث":"Temporary Email - Needs Update"})]})]})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(Re,{className:"w-5 h-5 flex-shrink-0 text-green-600"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:l==="ar"?"رقم الهاتف":"Phone"}),e.jsx("a",{href:`tel:${s.phone}`,className:"text-sm font-medium text-green-600 hover:text-green-800 hover:underline transition-colors",title:l==="ar"?"اتصال":"Call",children:s.phone})]})]}),s.whatsapp_number&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.570-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:l==="ar"?"واتساب":"WhatsApp"}),e.jsx("a",{href:`https://wa.me/${s.whatsapp_number.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-green-600 hover:text-green-800 hover:underline transition-colors",title:l==="ar"?"فتح واتساب":"Open WhatsApp",children:s.whatsapp_number})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.is_suspended?e.jsxs(G,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(rs,{className:"w-3 h-3"}),l==="ar"?"موقوف":l==="tr"?"Askıya Alındı":"Suspended"]}):e.jsx(G,{variant:s.is_approved?"default":"secondary",children:s.is_approved?l==="ar"?"موافق عليه":"Approved":l==="ar"?"في انتظار الموافقة":"Pending"}),s.user_type!=="client"&&e.jsx(e.Fragment,{children:s.is_trial_active?e.jsx(G,{variant:v?"default":"secondary",children:v?e.jsxs(e.Fragment,{children:[e.jsx(ss,{className:"w-3 h-3 mr-1"}),l==="ar"?"دائمة":"Permanent"]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),l==="ar"?"نشطة":"Active"]})}):e.jsx(G,{variant:"outline",children:l==="ar"?"غير نشطة":"Inactive"})})]}),e.jsxs("div",{className:"flex gap-4 mb-4 p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Me,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"0"}),e.jsx("span",{className:"text-muted-foreground",children:l==="ar"?"عقارات":"Properties"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ea,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-medium",children:"0"}),e.jsx("span",{className:"text-muted-foreground",children:l==="ar"?"بلاغات":"Reports"})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs(S,{variant:"outline",size:"sm",onClick:()=>h(!0),className:"w-full flex items-center gap-2 text-sm hover:bg-blue-50 hover:border-blue-200 transition-colors",children:[e.jsx(ka,{className:"w-4 h-4 text-blue-600"}),l==="ar"?"مشاهدة النشاط":l==="tr"?"Etkinliği Görüntüle":"View Activity"]})}),e.jsxs("div",{className:"text-sm text-muted-foreground mb-4",children:[l==="ar"?"تاريخ التسجيل:":"Registered:"," ",d(s.created_at)]}),e.jsx("div",{className:"mt-auto",children:e.jsx(Sr,{user:s,onToggleApproval:a,onToggleVerification:r,onUpdateUserType:t,onDeleteUser:n,onTrialUpdated:c,onToggleSuspension:o})})]}),e.jsx(Wt,{open:m,onOpenChange:h,userId:s.id,userName:s.full_name||s.email})]})},Zi=()=>{const{currentLanguage:s}=F(),{users:a,pendingUsers:r,loading:t,fetchUsers:n,toggleApproval:c,toggleVerification:o,rejectUser:i,updateUserType:l,deleteUser:m,approveAllPending:h,toggleSuspension:d}=ya(),[g,u]=x.useState(""),[v,p]=x.useState("all"),[_,f]=x.useState("all"),[N,y]=x.useState("table"),w=x.useMemo(()=>a.filter(b=>{var ie,W;const I=!g||((ie=b.full_name)==null?void 0:ie.toLowerCase().includes(g.toLowerCase()))||b.email.toLowerCase().includes(g.toLowerCase())||b.phone.includes(g)||((W=b.whatsapp_number)==null?void 0:W.includes(g)),A=v==="all"||b.user_type===v,ne=_==="all"||_==="approved"&&b.is_approved||_==="pending"&&!b.is_approved||_==="verified"&&b.is_verified||_==="suspended"&&b.is_suspended||_==="trial_active"&&b.is_trial_active;return I&&A&&ne}),[a,g,v,_]),M=b=>{window.open(`/user/${b}`,"_blank")},k=()=>{const I=[["Name","Email","Phone","WhatsApp","Type","Status","Verified","Registration Date"].join(","),...w.map(W=>[W.full_name||"Not specified",W.email,W.phone||"",W.whatsapp_number||"",W.user_type,W.is_approved?"Approved":"Pending",W.is_verified?"Yes":"No",new Date(W.created_at).toLocaleDateString()].join(","))].join(`
`),A=new Blob([I],{type:"text/csv"}),ne=window.URL.createObjectURL(A),ie=document.createElement("a");ie.href=ne,ie.download="users-export.csv",ie.click(),window.URL.revokeObjectURL(ne)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s==="ar"?"إدارة المستخدمين":"User Management"}),e.jsx("p",{className:"text-muted-foreground",children:s==="ar"?"مراجعة وإدارة حسابات المستخدمين والطلبات المعلقة":"Review and manage user accounts and pending requests"})]}),e.jsx(S,{onClick:n,variant:"outline",children:s==="ar"?"تحديث":"Refresh"})]}),e.jsxs(Te,{defaultValue:"pending",className:"space-y-4",children:[e.jsxs(Fe,{children:[e.jsxs(ae,{value:"pending",className:"flex items-center gap-2",children:[s==="ar"?"الطلبات المعلقة":"Pending Requests",r.length>0&&e.jsx(G,{variant:"secondary",className:"ml-1",children:r.length})]}),e.jsxs(ae,{value:"all",className:"flex items-center gap-2",children:[s==="ar"?"جميع المستخدمين":"All Users",e.jsx(G,{variant:"outline",className:"ml-1",children:a.length})]})]}),e.jsx(re,{value:"pending",children:e.jsx(Na,{pendingUsers:r,onApprove:c,onReject:i,onApproveAll:h,loading:t})}),e.jsx(re,{value:"all",className:"space-y-4",children:e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-blue-500"}),e.jsxs(O,{children:[s==="ar"?"قائمة المستخدمين":"Users List",e.jsxs("span",{className:"text-sm font-normal text-gray-500 mr-2",children:["(",w.length," ",s==="ar"?"مستخدم":"users",")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{variant:N==="cards"?"default":"outline",size:"sm",onClick:()=>y("cards"),children:e.jsx(va,{className:"w-4 h-4"})}),e.jsx(S,{variant:N==="table"?"default":"outline",size:"sm",onClick:()=>y("table"),children:e.jsx(fa,{className:"w-4 h-4"})}),e.jsxs(S,{onClick:k,variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Ta,{className:"w-4 h-4"}),s==="ar"?"تصدير":"Export"]})]})]}),e.jsx(q,{children:s==="ar"?"إدارة جميع المستخدمين المسجلين في الموقع":"Manage all registered users on the platform"}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(C,{placeholder:s==="ar"?"البحث بالاسم أو البريد الإلكتروني أو الهاتف أو الواتساب...":"Search by name, email, phone, or WhatsApp...",value:g,onChange:b=>u(b.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(X,{value:v,onValueChange:p,children:[e.jsxs(J,{className:"w-[180px]",children:[e.jsx(Fa,{className:"w-4 h-4 mr-2"}),e.jsx(Z,{placeholder:s==="ar"?"نوع المستخدم":"User Type"})]}),e.jsxs(Q,{children:[e.jsx(E,{value:"all",children:s==="ar"?"جميع الأنواع":"All Types"}),e.jsx(E,{value:"client",children:s==="ar"?"عميل":"Client"}),e.jsx(E,{value:"agent",children:s==="ar"?"وسيط":"Agent"}),e.jsx(E,{value:"support",children:s==="ar"?"دعم فني":"Support"}),e.jsx(E,{value:"property_owner",children:s==="ar"?"مالك عقار":"Property Owner"}),e.jsx(E,{value:"real_estate_office",children:s==="ar"?"مكتب عقارات":"Real Estate Office"}),e.jsx(E,{value:"partner_and_site_owner",children:s==="ar"?"شريك ومالك الموقع":"Partner & Site Owner"})]})]}),e.jsxs(X,{value:_,onValueChange:f,children:[e.jsx(J,{className:"w-[150px]",children:e.jsx(Z,{placeholder:s==="ar"?"الحالة":"Status"})}),e.jsxs(Q,{children:[e.jsx(E,{value:"all",children:s==="ar"?"جميع الحالات":"All Status"}),e.jsx(E,{value:"approved",children:s==="ar"?"موافق عليه":"Approved"}),e.jsx(E,{value:"pending",children:s==="ar"?"في انتظار الموافقة":"Pending"}),e.jsx(E,{value:"verified",children:s==="ar"?"موثق":"Verified"}),e.jsx(E,{value:"suspended",children:s==="ar"?"موقوف":"Suspended"}),e.jsx(E,{value:"trial_active",children:s==="ar"?"تجربة مجانية نشطة":"Trial Active"})]})]})]})]})]}),e.jsx(R,{children:t?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:s==="ar"?"جارٍ تحميل المستخدمين...":"Loading users..."})]}):w.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Qe,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:g||v!=="all"||_!=="all"?s==="ar"?"لم يتم العثور على نتائج":"No results found":s==="ar"?"لا توجد مستخدمين":"No users found"})]}):N==="cards"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(b=>e.jsx(Ji,{user:b,onToggleApproval:c,onToggleVerification:o,onUpdateUserType:l,onDeleteUser:m,onTrialUpdated:n,onToggleSuspension:d,onOpenProfile:M},b.id))}):e.jsx(Xi,{users:w,onToggleApproval:c,onToggleVerification:o,onUpdateUserType:l,onDeleteUser:m,onTrialUpdated:n,onToggleSuspension:d})})]})})]})]})},Qi=({onAddCity:s})=>{const{currentLanguage:a}=F(),[r,t]=x.useState(!1),[n,c]=x.useState({name_ar:"",name_en:"",name_tr:""}),o=async()=>{if(!n.name_ar.trim()||!n.name_en.trim()||!n.name_tr.trim())return;await s(n)&&(c({name_ar:"",name_en:"",name_tr:""}),t(!1))};return e.jsxs(P,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(O,{children:a==="ar"?"المدن":"Cities"}),e.jsxs(S,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),a==="ar"?"إضافة مدينة":"Add City"]})]})}),e.jsx(R,{children:r&&e.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:a==="ar"?"إضافة مدينة جديدة":"Add New City"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"city_name_ar",children:a==="ar"?"الاسم بالعربية":"Arabic Name"}),e.jsx(C,{id:"city_name_ar",value:n.name_ar,onChange:i=>c(l=>({...l,name_ar:i.target.value})),placeholder:a==="ar"?"أدخل اسم المدينة بالعربية":"Enter city name in Arabic",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"city_name_en",children:a==="ar"?"الاسم بالإنجليزية":"English Name"}),e.jsx(C,{id:"city_name_en",value:n.name_en,onChange:i=>c(l=>({...l,name_en:i.target.value})),placeholder:a==="ar"?"أدخل اسم المدينة بالإنجليزية":"Enter city name in English"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"city_name_tr",children:a==="ar"?"الاسم بالتركية":"Turkish Name"}),e.jsx(C,{id:"city_name_tr",value:n.name_tr,onChange:i=>c(l=>({...l,name_tr:i.target.value})),placeholder:a==="ar"?"أدخل اسم المدينة بالتركية":"Enter city name in Turkish"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(S,{variant:"outline",onClick:()=>t(!1),children:a==="ar"?"إلغاء":"Cancel"}),e.jsx(S,{onClick:o,children:a==="ar"?"إضافة المدينة":"Add City"})]})]})})]})},el=({city:s,onSave:a,onCancel:r})=>{const{currentLanguage:t}=F(),{toast:n}=se(),[c,o]=x.useState(!1),[i,l]=x.useState({name_ar:s.name_ar,name_en:s.name_en,name_tr:s.name_tr,is_active:s.is_active}),m=async h=>{h.preventDefault(),o(!0);try{const{error:d}=await T.from("cities").update(i).eq("id",s.id);if(d)throw d;n({title:t==="ar"?"نجح":"Success",description:t==="ar"?"تم تحديث المدينة بنجاح":"City updated successfully"}),a()}catch(d){n({title:t==="ar"?"خطأ":"Error",description:(d==null?void 0:d.message)||(t==="ar"?"فشل في تحديث المدينة":"Failed to update city"),variant:"destructive"})}finally{o(!1)}};return e.jsxs(P,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs($,{className:"flex flex-row items-center justify-between",children:[e.jsx(O,{children:t==="ar"?"تعديل المدينة":"Edit City"}),e.jsx(S,{variant:"ghost",size:"sm",onClick:r,children:e.jsx(Be,{className:"w-4 h-4"})})]}),e.jsx(R,{children:e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{children:t==="ar"?"اسم المدينة بالعربية":"City Name (Arabic)"}),e.jsx(C,{value:i.name_ar,onChange:h=>l({...i,name_ar:h.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(j,{children:t==="ar"?"اسم المدينة بالإنجليزية":"City Name (English)"}),e.jsx(C,{value:i.name_en,onChange:h=>l({...i,name_en:h.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(j,{children:t==="ar"?"اسم المدينة بالتركية":"City Name (Turkish)"}),e.jsx(C,{value:i.name_tr,onChange:h=>l({...i,name_tr:h.target.value}),required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(S,{type:"button",variant:"outline",onClick:r,children:t==="ar"?"إلغاء":"Cancel"}),e.jsx(S,{type:"submit",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),t==="ar"?"جارٍ الحفظ...":"Saving..."]}):t==="ar"?"حفظ التغييرات":"Save Changes"})]})]})})]})},sl=({cities:s,districts:a,loading:r,onDeleteCity:t})=>{const{currentLanguage:n}=F(),[c,o]=x.useState(null),i=m=>a.filter(h=>h.city_id===m).length,l=()=>{o(null),window.location.reload()};return c?e.jsx(el,{city:c,onSave:l,onCancel:()=>o(null)}):e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(as,{className:"w-5 h-5"}),n==="ar"?"قائمة المدن":"Cities List"]}),e.jsx(q,{children:n==="ar"?"جميع المدن المضافة في النظام":"All cities added to the system"})]}),e.jsx(R,{children:r?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):e.jsxs(ke,{children:[e.jsx(Ee,{children:e.jsxs(ee,{children:[e.jsx(L,{children:n==="ar"?"اسم المدينة":"City Name"}),e.jsx(L,{children:n==="ar"?"عدد الأحياء":"Districts Count"}),e.jsx(L,{children:n==="ar"?"الحالة":"Status"}),e.jsx(L,{children:n==="ar"?"تاريخ الإضافة":"Added Date"}),e.jsx(L,{children:n==="ar"?"الإجراءات":"Actions"})]})}),e.jsxs(Ae,{children:[s.map(m=>e.jsxs(ee,{children:[e.jsx(D,{className:"font-medium",children:n==="ar"?m.name_ar:n==="tr"?m.name_tr:m.name_en}),e.jsx(D,{children:i(m.id)}),e.jsx(D,{children:e.jsx(G,{variant:m.is_active?"default":"secondary",children:m.is_active?n==="ar"?"نشط":"Active":n==="ar"?"غير نشط":"Inactive"})}),e.jsx(D,{children:new Date(m.created_at).toLocaleDateString(n==="ar"?"ar-SA":"en-US")}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:"sm",variant:"outline",onClick:()=>o(m),children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx(S,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>t(m.id),children:e.jsx(me,{className:"w-4 h-4"})})]})})]},m.id)),s.length===0&&e.jsx(ee,{children:e.jsx(D,{colSpan:5,className:"text-center py-8 text-gray-500",children:n==="ar"?"لا توجد مدن مضافة":"No cities added"})})]})]})})]})},al=({cities:s,onAddDistrict:a})=>{const{currentLanguage:r}=F(),[t,n]=x.useState(!1),[c,o]=x.useState({city_id:"",name_ar:"",name_en:"",name_tr:""}),i=async()=>{if(!c.city_id||!c.name_ar.trim()||!c.name_en.trim()||!c.name_tr.trim())return;await a(c)&&(o({city_id:"",name_ar:"",name_en:"",name_tr:""}),n(!1))},l=s.filter(m=>m.id&&m.id.trim()!==""&&Ze(m,r).trim()!=="");return e.jsxs(P,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(O,{children:r==="ar"?"الأحياء":"Districts"}),e.jsxs(S,{onClick:()=>n(!0),className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),r==="ar"?"إضافة حي":"Add District"]})]})}),e.jsx(R,{children:t&&e.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:r==="ar"?"إضافة حي جديد":"Add New District"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"district_city",children:r==="ar"?"المدينة":"City"}),e.jsxs("select",{id:"district_city",value:c.city_id,onChange:m=>o(h=>({...h,city_id:m.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:r==="ar"?"اختر المدينة":"Select City"}),l.map(m=>e.jsx("option",{value:m.id,children:Ze(m,r)},m.id))]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"district_name_ar",children:r==="ar"?"الاسم بالعربية":"Arabic Name"}),e.jsx(C,{id:"district_name_ar",value:c.name_ar,onChange:m=>o(h=>({...h,name_ar:m.target.value})),placeholder:r==="ar"?"أدخل اسم الحي بالعربية":"Enter district name in Arabic",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"district_name_en",children:r==="ar"?"الاسم بالإنجليزية":"English Name"}),e.jsx(C,{id:"district_name_en",value:c.name_en,onChange:m=>o(h=>({...h,name_en:m.target.value})),placeholder:r==="ar"?"أدخل اسم الحي بالإنجليزية":"Enter district name in English"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"district_name_tr",children:r==="ar"?"الاسم بالتركية":"Turkish Name"}),e.jsx(C,{id:"district_name_tr",value:c.name_tr,onChange:m=>o(h=>({...h,name_tr:m.target.value})),placeholder:r==="ar"?"أدخل اسم الحي بالتركية":"Enter district name in Turkish"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(S,{variant:"outline",onClick:()=>n(!1),children:r==="ar"?"إلغاء":"Cancel"}),e.jsx(S,{onClick:i,children:r==="ar"?"إضافة الحي":"Add District"})]})]})})]})},rl=({district:s,cities:a,onSave:r,onCancel:t})=>{const{currentLanguage:n}=F(),{toast:c}=se(),[o,i]=x.useState(!1),[l,m]=x.useState({city_id:s.city_id,name_ar:s.name_ar,name_en:s.name_en,name_tr:s.name_tr,is_active:s.is_active}),h=async d=>{d.preventDefault(),i(!0);try{const{error:g}=await T.from("districts").update(l).eq("id",s.id);if(g)throw g;c({title:n==="ar"?"نجح":"Success",description:n==="ar"?"تم تحديث الحي بنجاح":"District updated successfully"}),r()}catch(g){c({title:n==="ar"?"خطأ":"Error",description:(g==null?void 0:g.message)||(n==="ar"?"فشل في تحديث الحي":"Failed to update district"),variant:"destructive"})}finally{i(!1)}};return e.jsxs(P,{className:"w-full max-w-2xl mx-auto",children:[e.jsxs($,{className:"flex flex-row items-center justify-between",children:[e.jsx(O,{children:n==="ar"?"تعديل الحي":"Edit District"}),e.jsx(S,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(Be,{className:"w-4 h-4"})})]}),e.jsx(R,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{children:n==="ar"?"المدينة":"City"}),e.jsxs(X,{value:l.city_id,onValueChange:d=>m({...l,city_id:d}),children:[e.jsx(J,{children:e.jsx(Z,{})}),e.jsx(Q,{children:a.map(d=>e.jsx(E,{value:d.id,children:n==="ar"?d.name_ar:n==="tr"?d.name_tr:d.name_en},d.id))})]})]}),e.jsxs("div",{children:[e.jsx(j,{children:n==="ar"?"اسم الحي بالعربية":"District Name (Arabic)"}),e.jsx(C,{value:l.name_ar,onChange:d=>m({...l,name_ar:d.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(j,{children:n==="ar"?"اسم الحي بالإنجليزية":"District Name (English)"}),e.jsx(C,{value:l.name_en,onChange:d=>m({...l,name_en:d.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(j,{children:n==="ar"?"اسم الحي بالتركية":"District Name (Turkish)"}),e.jsx(C,{value:l.name_tr,onChange:d=>m({...l,name_tr:d.target.value}),required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(S,{type:"button",variant:"outline",onClick:t,children:n==="ar"?"إلغاء":"Cancel"}),e.jsx(S,{type:"submit",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),n==="ar"?"جارٍ الحفظ...":"Saving..."]}):n==="ar"?"حفظ التغييرات":"Save Changes"})]})]})})]})},tl=({districts:s,cities:a,loading:r,onDeleteDistrict:t})=>{const{currentLanguage:n}=F(),[c,o]=x.useState(null),i=m=>{const h=a.find(d=>d.id===m);return h?n==="ar"?h.name_ar:n==="tr"?h.name_tr:h.name_en:m},l=()=>{o(null),window.location.reload()};return c?e.jsx(rl,{district:c,cities:a,onSave:l,onCancel:()=>o(null)}):e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(qs,{className:"w-5 h-5"}),n==="ar"?"قائمة الأحياء":"Districts List"]}),e.jsx(q,{children:n==="ar"?"جميع الأحياء المضافة في النظام":"All districts added to the system"})]}),e.jsx(R,{children:r?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):e.jsxs(ke,{children:[e.jsx(Ee,{children:e.jsxs(ee,{children:[e.jsx(L,{children:n==="ar"?"اسم الحي":"District Name"}),e.jsx(L,{children:n==="ar"?"المدينة":"City"}),e.jsx(L,{children:n==="ar"?"الحالة":"Status"}),e.jsx(L,{children:n==="ar"?"تاريخ الإضافة":"Added Date"}),e.jsx(L,{children:n==="ar"?"الإجراءات":"Actions"})]})}),e.jsxs(Ae,{children:[s.map(m=>e.jsxs(ee,{children:[e.jsx(D,{className:"font-medium",children:n==="ar"?m.name_ar:n==="tr"?m.name_tr:m.name_en}),e.jsx(D,{children:i(m.city_id)}),e.jsx(D,{children:e.jsx(G,{variant:m.is_active?"default":"secondary",children:m.is_active?n==="ar"?"نشط":"Active":n==="ar"?"غير نشط":"Inactive"})}),e.jsx(D,{children:new Date(m.created_at).toLocaleDateString(n==="ar"?"ar-SA":"en-US")}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:"sm",variant:"outline",onClick:()=>o(m),children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx(S,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>t(m.id),children:e.jsx(me,{className:"w-4 h-4"})})]})})]},m.id)),s.length===0&&e.jsx(ee,{children:e.jsx(D,{colSpan:5,className:"text-center py-8 text-gray-500",children:n==="ar"?"لا توجد أحياء مضافة":"No districts added"})})]})]})})]})},nl=()=>{const{currentLanguage:s}=F(),{user:a}=Ns(),{cities:r,districts:t,loading:n,isAdmin:c,addCity:o,addDistrict:i,deleteCity:l,deleteDistrict:m,fetchCities:h,fetchDistricts:d}=Xe();console.log("CitiesManagement debug:",{userEmail:a==null?void 0:a.email,isAdmin:c,citiesCount:r.length,districtsCount:t.length,loading:n});const g=async()=>{await Promise.all([h(),d()])};return a?c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(as,{className:"w-6 h-6"}),s==="ar"?"إدارة المدن والأحياء":"Cities & Districts Management"]}),e.jsx("p",{className:"text-gray-600",children:s==="ar"?"إضافة وتعديل وحذف المدن والأحياء":"Add, edit, and delete cities and districts"}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:s==="ar"?`مسجل كمدير: ${a.email}`:`Logged in as admin: ${a.email}`})]}),e.jsxs(S,{onClick:g,disabled:n,variant:"outline",size:"sm",children:[e.jsx(Ke,{className:`w-4 h-4 mr-2 ${n?"animate-spin":""}`}),s==="ar"?"تحديث":"Refresh"]})]}),n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:s==="ar"?"تحميل البيانات...":"Loading data..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:s==="ar"?"إجمالي المدن":"Total Cities"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.length})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:s==="ar"?"إجمالي المناطق":"Total Districts"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.length})]})]}),e.jsx(Qi,{onAddCity:o}),e.jsx(sl,{cities:r,districts:t,loading:n,onDeleteCity:l}),e.jsx(al,{cities:r,onAddDistrict:i}),e.jsx(tl,{districts:t,cities:r,loading:n,onDeleteDistrict:m})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:s==="ar"?"لا تملك صلاحيات الإدارة":"You do not have admin privileges"}),e.jsx("p",{className:"text-sm text-gray-500",children:s==="ar"?`المستخدم الحالي: ${a.email}`:`Current user: ${a.email}`}),e.jsxs(S,{onClick:g,variant:"outline",className:"mt-4",disabled:n,children:[e.jsx(Ke,{className:`w-4 h-4 mr-2 ${n?"animate-spin":""}`}),s==="ar"?"إعادة تحديث":"Refresh"]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:s==="ar"?"يجب تسجيل الدخول للوصول إلى الإدارة":"Please login to access admin panel"})})},il=()=>{const{currentLanguage:s}=F(),[a,r]=x.useState([]),[t,n]=x.useState(!0),[c,o]=x.useState(!1),i=async()=>{try{n(!0);const{data:d,error:g}=await T.from("language_settings").select("*").order("language_code");if(g)throw g;r(d||[])}catch(d){console.error("Error fetching languages:",d),Je.error(s==="ar"?"خطأ في تحميل اللغات":"Error loading languages")}finally{n(!1)}};x.useEffect(()=>{i()},[]);const l=async(d,g)=>{try{o(!0);const{error:u}=await T.from("language_settings").update({is_enabled:g,updated_at:new Date().toISOString()}).eq("id",d);if(u)throw u;r(v=>v.map(p=>p.id===d?{...p,is_enabled:g}:p)),Je.success(s==="ar"?"تم تحديث إعدادات اللغة بنجاح":"Language settings updated successfully")}catch(u){console.error("Error updating language:",u),Je.error(s==="ar"?"خطأ في تحديث إعدادات اللغة":"Error updating language settings")}finally{o(!1)}},m=async d=>{try{o(!0);const{error:g}=await T.from("language_settings").update({is_default:!1,updated_at:new Date().toISOString()}).neq("id",d);if(g)throw g;const{error:u}=await T.from("language_settings").update({is_default:!0,is_enabled:!0,updated_at:new Date().toISOString()}).eq("id",d);if(u)throw u;r(v=>v.map(p=>({...p,is_default:p.id===d,is_enabled:p.id===d?!0:p.is_enabled}))),Je.success(s==="ar"?"تم تعيين اللغة الافتراضية بنجاح":"Default language set successfully")}catch(g){console.error("Error setting default language:",g),Je.error(s==="ar"?"خطأ في تعيين اللغة الافتراضية":"Error setting default language")}finally{o(!1)}},h=d=>{switch(s){case"ar":return d.language_name_ar;case"tr":return d.language_name_tr;default:return d.language_name_en}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s==="ar"?"إدارة اللغات":"Language Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s==="ar"?"إدارة اللغات المتاحة في الموقع وتحديد اللغة الافتراضية":"Manage available languages on the website and set default language"})]}),e.jsxs(S,{onClick:i,disabled:t,variant:"outline",size:"sm",children:[e.jsx(Ke,{className:`w-4 h-4 mr-2 ${t?"animate-spin":""}`}),s==="ar"?"تحديث":"Refresh"]})]}),e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(Da,{className:"w-5 h-5"}),s==="ar"?"إعدادات اللغات":"Language Settings"]}),e.jsx(q,{children:s==="ar"?"تفعيل أو إلغاء تفعيل اللغات المتاحة في الموقع":"Enable or disable available languages on the website"})]}),e.jsx(R,{children:t?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:s==="ar"?"جارٍ تحميل اللغات...":"Loading languages..."})]}):e.jsx("div",{className:"space-y-4",children:a.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg dark:border-gray-700",children:[e.jsx("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-lg",children:h(d)}),e.jsxs("span",{className:"text-sm text-gray-500 uppercase",children:["(",d.language_code,")"]}),d.is_default&&e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full dark:bg-blue-900 dark:text-blue-200",children:s==="ar"?"افتراضي":"Default"})]}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[s==="ar"?"الاسم بجميع اللغات:":"Names:",e.jsxs("span",{className:"ml-1",children:[d.language_name_ar," • ",d.language_name_en," • ",d.language_name_tr]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-4 rtl:space-x-reverse",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s==="ar"?"مفعل":"Enabled"}),e.jsx(Ce,{checked:d.is_enabled,onCheckedChange:g=>l(d.id,g),disabled:c||d.is_default})]}),!d.is_default&&d.is_enabled&&e.jsx(S,{onClick:()=>m(d.id),disabled:c,variant:"outline",size:"sm",children:s==="ar"?"جعل افتراضي":"Set Default"})]})]},d.id))})})]}),e.jsx(P,{className:"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:e.jsx(R,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center mt-0.5",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400 text-sm",children:"ℹ"})}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-medium mb-1",children:s==="ar"?"ملاحظات مهمة:":"Important Notes:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-700 dark:text-blue-300",children:[e.jsx("li",{children:s==="ar"?"لا يمكن إلغاء تفعيل اللغة الافتراضية":"The default language cannot be disabled"}),e.jsx("li",{children:s==="ar"?"عند تعيين لغة كافتراضية سيتم تفعيلها تلقائياً":"Setting a language as default will automatically enable it"}),e.jsx("li",{children:s==="ar"?"تأثير تغيير إعدادات اللغات يظهر فوراً في محدد اللغة":"Language setting changes are immediately reflected in the language selector"})]})]})]})})})]})},ll=({uploading:s,onFileUpload:a})=>{const{currentLanguage:r}=F();return e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:a,className:"hidden",id:"hero-bg-upload",disabled:s}),e.jsxs("label",{htmlFor:"hero-bg-upload",className:"cursor-pointer",children:[e.jsx(Ye,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:s?r==="ar"?"جارٍ الرفع...":"Uploading...":r==="ar"?"اضغط لرفع صورة خلفية جديدة":"Click to upload a new background image"}),e.jsx("p",{className:"text-xs text-gray-500",children:r==="ar"?"الحد الأقصى 10 ميجابايت":"Max 10MB"})]})]})},cl=({background:s,onSetActive:a,onDelete:r})=>{const{currentLanguage:t}=F();return e.jsxs("div",{className:`relative group rounded-lg overflow-hidden border-2 transition-all duration-300 ${s.is_active?"border-blue-500 shadow-lg scale-105":"border-gray-200 hover:border-gray-300 hover:scale-102"}`,children:[e.jsxs("div",{className:"aspect-video relative",children:[e.jsx("img",{src:s.image_url,alt:"Hero background",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),s.is_active&&e.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white px-2 py-1 rounded text-xs font-medium",children:t==="ar"?"نشط":"Active"})]}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{size:"sm",onClick:()=>a(s.id),className:"bg-white text-gray-800 hover:bg-gray-100",children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx(Le,{className:"w-4 h-4 mr-1"}),t==="ar"?"إلغاء التفعيل":"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),t==="ar"?"تفعيل":"Activate"]})}),e.jsxs(S,{size:"sm",variant:"destructive",onClick:()=>r(s.id,s.image_url),children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),t==="ar"?"حذف":"Delete"]})]})})]})},ol=({backgrounds:s,onSetActive:a,onDelete:r})=>{const{currentLanguage:t}=F();return s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ze,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:t==="ar"?"لا توجد صور خلفية. قم برفع الصورة الأولى":"No background images. Upload your first image"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(n=>e.jsx(cl,{background:n,onSetActive:a,onDelete:r},n.id))})},dl=s=>{const{currentLanguage:a}=F(),{toast:r}=se(),[t,n]=x.useState([]),[c,o]=x.useState(!1),[i,l]=x.useState(!0),m=x.useCallback(async()=>{try{const{data:u,error:v}=await T.from("hero_backgrounds").select("*").order("created_at",{ascending:!1});if(v)throw v;n(u||[])}catch(u){console.error("Error fetching backgrounds:",u)}},[]);return x.useEffect(()=>{l(!0),m().finally(()=>l(!1))},[m]),x.useEffect(()=>{if(s===!1&&!i&&t.length>0){const u=t.filter(v=>v.is_active);if(u.length>1){const v=u.slice(1).map(p=>p.id);v.length>0&&(async()=>{const{error:_}=await T.from("hero_backgrounds").update({is_active:!1}).in("id",v);_?(console.error("Failed to deactivate extra backgrounds:",_),r({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"فشل في تحديث الخلفيات.":"Failed to update backgrounds.",variant:"destructive"})):(r({title:a==="ar"?"تم التحديث":"Updated",description:a==="ar"?"تم تعطيل عرض الشرائح، والإبقاء على خلفية واحدة نشطة فقط.":"Slideshow disabled, only one background remains active."}),await m())})()}else if(u.length===0){const v=t[0];v&&(async()=>{const{error:_}=await T.from("hero_backgrounds").update({is_active:!0}).eq("id",v.id);_?(console.error("Failed to activate newest background:",_),r({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"فشل في تفعيل الخلفية الأحدث.":"Failed to activate newest background.",variant:"destructive"})):(r({title:a==="ar"?"تم التحديث":"Updated",description:a==="ar"?"لا توجد خلفية نشطة، تم تفعيل الأحدث تلقائياً.":"No active background; the newest one has been activated."}),await m())})()}}},[s,i,t,m,a,r]),{backgrounds:t,uploading:c,loading:i,handleFileUpload:async u=>{var p;const v=(p=u.target.files)==null?void 0:p[0];if(v){if(!v.type.startsWith("image/")){r({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"يرجى اختيار صورة فقط":"Please select an image only",variant:"destructive"});return}if(v.size>10*1024*1024){r({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"حجم الصورة يجب أن يكون أقل من 10 ميجابايت":"Image size must be less than 10MB",variant:"destructive"});return}o(!0);try{const _=v.name.split(".").pop(),N=`hero-backgrounds/${`hero-bg-${Date.now()}.${_}`}`,{error:y}=await T.storage.from("hero-backgrounds").upload(N,v);if(y)throw y;const{data:{publicUrl:w}}=T.storage.from("hero-backgrounds").getPublicUrl(N),{error:M}=await T.from("hero_backgrounds").insert({image_url:w,is_active:t.length===0||s});if(M)throw M;if(!s){await m();const k=await T.from("hero_backgrounds").select("*").order("created_at",{ascending:!1});if(k.data&&k.data.length>1){const b=k.data[0].id,I=k.data.slice(1).map(A=>A.id);if(I.length>0){const{error:A}=await T.from("hero_backgrounds").update({is_active:!1}).in("id",I);A&&console.error("Failed to deactivate previous ones after upload",A)}await T.from("hero_backgrounds").update({is_active:!0}).eq("id",b)}}await m(),r({title:a==="ar"?"نجح":"Success",description:a==="ar"?"تم رفع الصورة بنجاح":"Image uploaded successfully"})}catch(_){console.error("Error uploading image:",_),r({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"فشل في رفع الصورة":"Failed to upload image",variant:"destructive"})}finally{o(!1)}}},setActiveBackground:async u=>{const v=t.find(p=>p.id===u);if(v)try{if(v.is_active){const{error:p}=await T.from("hero_backgrounds").update({is_active:!1}).eq("id",u);if(p)throw p;r({title:a==="ar"?"تم":"Done",description:a==="ar"?"تم إلغاء تفعيل الخلفية.":"Background deactivated."})}else{if(!s){const{error:_}=await T.from("hero_backgrounds").update({is_active:!1}).eq("is_active",!0);if(_)throw _}const{error:p}=await T.from("hero_backgrounds").update({is_active:!0}).eq("id",u);if(p)throw p;if(r({title:a==="ar"?"نجح":"Success",description:a==="ar"?"تم تغيير الخلفية بنجاح":"Background changed successfully"}),!s){const _=t.filter(f=>f.id!==u&&f.is_active);if(_.length>0){const f=_.map(N=>N.id);await T.from("hero_backgrounds").update({is_active:!1}).in("id",f)}}}await m()}catch(p){console.error("Error setting active background:",p),r({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"فشل في تغيير الخلفية":"Failed to change background",variant:"destructive"})}},deleteBackground:async(u,v)=>{try{const p=v.split("/"),f=`hero-backgrounds/${p[p.length-1]}`;await T.storage.from("hero-backgrounds").remove([f]);const{error:N}=await T.from("hero_backgrounds").delete().eq("id",u);if(N)throw N;await m(),r({title:a==="ar"?"نجح":"Success",description:a==="ar"?"تم حذف الصورة بنجاح":"Image deleted successfully"})}catch(p){console.error("Error deleting background:",p),r({title:a==="ar"?"خطأ":"Error",description:a==="ar"?"فشل في حذف الصورة":"Failed to delete image",variant:"destructive"})}}}},ml=({settings:s,updateSetting:a})=>{const{currentLanguage:r}=F(),{backgrounds:t,uploading:n,loading:c,handleFileUpload:o,setActiveBackground:i,deleteBackground:l}=dl(s.heroSlideshowEnabled);return c?e.jsx("div",{className:"flex justify-center p-8",children:"Loading..."}):e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),r==="ar"?"خلفيات الصفحة الرئيسية":"Hero Section Backgrounds"]}),e.jsx(q,{children:r==="ar"?"إدارة الصور المستخدمة كخلفية للصفحة الرئيسية.":"Manage images for the hero section background."})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsx(ll,{uploading:n,onFileUpload:o}),e.jsx(ol,{backgrounds:t,onSetActive:i,onDelete:l})]})]})};var Js="Radio",[hl,kr]=_s(Js),[ul,xl]=hl(Js),Er=x.forwardRef((s,a)=>{const{__scopeRadio:r,name:t,checked:n=!1,required:c,disabled:o,value:i="on",onCheck:l,...m}=s,[h,d]=x.useState(null),g=Se(a,p=>d(p)),u=x.useRef(!1),v=h?!!h.closest("form"):!0;return e.jsxs(ul,{scope:r,checked:n,disabled:o,children:[e.jsx(ve.button,{type:"button",role:"radio","aria-checked":n,"data-state":Fr(n),"data-disabled":o?"":void 0,disabled:o,value:i,...m,ref:g,onClick:pe(s.onClick,p=>{n||l==null||l(),v&&(u.current=p.isPropagationStopped(),u.current||p.stopPropagation())})}),v&&e.jsx(pl,{control:h,bubbles:!u.current,name:t,value:i,checked:n,required:c,disabled:o,style:{transform:"translateX(-100%)"}})]})});Er.displayName=Js;var Ar="RadioIndicator",Tr=x.forwardRef((s,a)=>{const{__scopeRadio:r,forceMount:t,...n}=s,c=xl(Ar,r);return e.jsx(bs,{present:t||c.checked,children:e.jsx(ve.span,{"data-state":Fr(c.checked),"data-disabled":c.disabled?"":void 0,...n,ref:a})})});Tr.displayName=Ar;var pl=s=>{const{control:a,checked:r,bubbles:t=!0,...n}=s,c=x.useRef(null),o=Et(r),i=ot(a);return x.useEffect(()=>{const l=c.current,m=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(m,"checked").set;if(o!==r&&d){const g=new Event("click",{bubbles:t});d.call(l,r),l.dispatchEvent(g)}},[o,r,t]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:c,style:{...s.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Fr(s){return s?"checked":"unchecked"}var gl=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Zs="RadioGroup",[jl,Wc]=_s(Zs,[ja,kr]),Dr=ja(),Pr=kr(),[vl,fl]=jl(Zs),Rr=x.forwardRef((s,a)=>{const{__scopeRadioGroup:r,name:t,defaultValue:n,value:c,required:o=!1,disabled:i=!1,orientation:l,dir:m,loop:h=!0,onValueChange:d,...g}=s,u=Dr(r),v=dt(m),[p,_]=ha({prop:c,defaultProp:n,onChange:d});return e.jsx(vl,{scope:r,name:t,required:o,disabled:i,value:p,onValueChange:_,children:e.jsx(mt,{asChild:!0,...u,orientation:l,dir:v,loop:h,children:e.jsx(ve.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":i?"":void 0,dir:v,...g,ref:a})})})});Rr.displayName=Zs;var Mr="RadioGroupItem",Lr=x.forwardRef((s,a)=>{const{__scopeRadioGroup:r,disabled:t,...n}=s,c=fl(Mr,r),o=c.disabled||t,i=Dr(r),l=Pr(r),m=x.useRef(null),h=Se(a,m),d=c.value===n.value,g=x.useRef(!1);return x.useEffect(()=>{const u=p=>{gl.includes(p.key)&&(g.current=!0)},v=()=>g.current=!1;return document.addEventListener("keydown",u),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",u),document.removeEventListener("keyup",v)}},[]),e.jsx(ht,{asChild:!0,...i,focusable:!o,active:d,children:e.jsx(Er,{disabled:o,required:c.required,checked:d,...l,...n,name:c.name,ref:h,onCheck:()=>c.onValueChange(n.value),onKeyDown:pe(u=>{u.key==="Enter"&&u.preventDefault()}),onFocus:pe(n.onFocus,()=>{var u;g.current&&((u=m.current)==null||u.click())})})})});Lr.displayName=Mr;var yl="RadioGroupIndicator",Ur=x.forwardRef((s,a)=>{const{__scopeRadioGroup:r,...t}=s,n=Pr(r);return e.jsx(Tr,{...n,...t,ref:a})});Ur.displayName=yl;var $r=Rr,Ir=Lr,Nl=Ur;const Br=x.forwardRef(({className:s,...a},r)=>e.jsx($r,{className:be("grid gap-2",s),...a,ref:r}));Br.displayName=$r.displayName;const ps=x.forwardRef(({className:s,...a},r)=>e.jsx(Ir,{ref:r,className:be("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(Nl,{className:"flex items-center justify-center",children:e.jsx(ut,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ps.displayName=Ir.displayName;const us=[{code:"ar",label:"العربية"},{code:"en",label:"English"},{code:"tr",label:"Türkçe"}],Ms=[{code:"light",label:"فاتح",en:"Light"},{code:"dark",label:"داكن",en:"Dark"}],xs={ar:{light:"logo_ar_light_url",dark:"logo_ar_dark_url"},en:{light:"logo_en_light_url",dark:"logo_en_dark_url"},tr:{light:"logo_tr_light_url",dark:"logo_tr_dark_url"}},_l=()=>{const{currentLanguage:s}=F(),{logoSettings:a,loading:r,saving:t,updateLogoSettings:n,uploadLogoFile:c}=xt(),[o,i]=x.useState((a==null?void 0:a.logo_type)||"text"),[l,m]=x.useState({ar:(a==null?void 0:a.logo_text_ar)||"",en:(a==null?void 0:a.logo_text_en)||"",tr:(a==null?void 0:a.logo_text_tr)||""}),[h,d]=x.useState({}),[g,u]=x.useState({}),v=(f,N)=>y=>{var k;const w=(k=y.target.files)==null?void 0:k[0],M=`${f}_${N}`;if(w){d(I=>({...I,[M]:w}));const b=URL.createObjectURL(w);u(I=>({...I,[M]:b}))}},p=async()=>{try{let f={logo_type:o};if(o==="text")f={...f,logo_text_ar:l.ar,logo_text_en:l.en,logo_text_tr:l.tr,logo_ar_light_url:null,logo_ar_dark_url:null,logo_en_light_url:null,logo_en_dark_url:null,logo_tr_light_url:null,logo_tr_dark_url:null};else if(o==="image"||o==="svg"){for(const N of us)for(const y of Ms){const w=`${N.code}_${y.code}`;let M=(a==null?void 0:a[xs[N.code][y.code]])||null;h[w]&&(M=await c(h[w],N.code,y.code,o)),f[xs[N.code][y.code]]=M}f={...f,logo_text_ar:null,logo_text_en:null,logo_text_tr:null}}await n(f)}catch{}},_=()=>{if(o==="text"){const f=l[s]||l.en;return f?e.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent",children:f}):e.jsx("span",{className:"text-gray-400",children:"معاينة النص"})}else if(o==="image"||o==="svg")return e.jsx("div",{className:"w-full grid grid-cols-1 md:grid-cols-3 gap-4",children:us.map(f=>e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold mb-1 text-center",children:f.label}),e.jsx("div",{className:"flex gap-2",children:Ms.map(N=>{const y=`${f.code}_${N.code}`,w=g[y]||a&&a[xs[f.code][N.code]]||null;return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-xs mb-1",children:N.en}),w?e.jsx("img",{src:w,alt:`${f.code} ${N.code} logo`,className:"max-h-10 max-w-[90px] border rounded bg-white"}):e.jsx("div",{className:"w-20 h-10 bg-gray-200 rounded flex items-center justify-center text-xs text-gray-500",children:"—"})]},N.code)})})]},f.code))})};return r?e.jsx(P,{children:e.jsxs(R,{className:"flex items-center justify-center py-8",children:[e.jsx(K,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:s==="ar"?"جاري التحميل...":"Loading..."})]})}):e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),s==="ar"?"إدارة الشعار":"Logo Management"]}),e.jsx(q,{children:s==="ar"?"قم بتخصيص شعار الموقع - يمكنك استخدام نص أو صورة أو ملف SVG، ولكل لغة شعار مستقل ولوضع الليل والنهار":"Customize the site logo - use text, images, or SVG. Each language and light/dark mode can have a separate logo."})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs(j,{className:"text-base font-semibold mb-4 block",children:[e.jsx(ge,{className:"w-4 h-4 inline mr-2"}),s==="ar"?"معاينة الشعار":"Logo Preview"]}),e.jsx("div",{className:"p-4 border rounded-lg bg-gray-50 flex items-center justify-center min-h-[80px]",children:_()})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-base font-semibold mb-4 block",children:s==="ar"?"نوع الشعار":"Logo Type"}),e.jsxs(Br,{value:o,onValueChange:f=>i(f),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ps,{value:"text",id:"text"}),e.jsxs(j,{htmlFor:"text",className:"flex items-center gap-2",children:[e.jsx(wn,{className:"w-4 h-4"}),s==="ar"?"نص":"Text"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ps,{value:"image",id:"image"}),e.jsxs(j,{htmlFor:"image",className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4"}),s==="ar"?"صورة":"Image"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ps,{value:"svg",id:"svg"}),e.jsxs(j,{htmlFor:"svg",className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4"}),s==="ar"?"ملف SVG":"SVG File"]})]})]})]}),o==="text"&&e.jsxs("div",{children:[e.jsx(j,{className:"text-base font-semibold mb-4 block",children:s==="ar"?"نص الشعار بجميع اللغات":"Logo text for all languages"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:us.map(f=>e.jsxs("div",{children:[e.jsx(j,{htmlFor:`logo_text_${f.code}`,className:"text-sm",children:f.label}),e.jsx(C,{id:`logo_text_${f.code}`,value:l[f.code],onChange:N=>m(y=>({...y,[f.code]:N.target.value})),placeholder:f.label})]},f.code))})]}),(o==="image"||o==="svg")&&e.jsxs("div",{children:[e.jsx(j,{className:"text-base font-semibold mb-4 block",children:s==="ar"?"رفع الشعارات لكل لغة ولوضع الليل/النهار":"Upload logo for each language and light/dark mode"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:us.map(f=>e.jsxs("div",{className:"border rounded p-2",children:[e.jsx("div",{className:"font-medium mb-2 text-center",children:f.label}),Ms.map(N=>{const y=`file_${f.code}_${N.code}`,w=g[`${f.code}_${N.code}`]||a&&a[xs[f.code][N.code]]||null;return e.jsxs("div",{className:"mb-3 flex flex-col items-center",children:[e.jsx(j,{htmlFor:y,className:"block text-xs mb-1",children:N.en}),e.jsx(C,{id:y,type:"file",accept:o==="image"?"image/*":".svg,image/svg+xml",onChange:v(f.code,N.code),className:"mb-2 cursor-pointer file:text-sm file:bg-brand-accent file:text-white"}),w&&e.jsx("img",{src:w,alt:"",className:"max-h-8 w-auto border rounded bg-white"})]},N.code)})]},f.code))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{onClick:p,disabled:t,className:"flex items-center gap-2 bg-brand-accent hover:bg-brand-accent/90 text-brand-accent-foreground",children:t?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 animate-spin"}),s==="ar"?"جاري الحفظ...":"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-4 h-4"}),s==="ar"?"حفظ الشعار":"Save Logo"]})})})]})]})},bl=()=>{const{settings:s,updateSetting:a,saveSettings:r,saving:t,loading:n}=ks(),{currentLanguage:c}=F(),i={ar:{title:"إعدادات رسائل الحظر",description:"تخصيص الرسائل التي تظهر للمستخدمين الذين تم إيقاف حساباتهم.",suspensionTitle:"عنوان رسالة الحظر",suspensionMessage:"محتوى رسالة الحظر",inArabic:"بالعربية",inEnglish:"بالإنجليزية",inTurkish:"بالتركية",save:"حفظ التغييرات",saving:"جارٍ الحفظ...",loading:"جاري تحميل الإعدادات..."},en:{title:"Suspension Message Settings",description:"Customize the messages shown to users whose accounts have been suspended.",suspensionTitle:"Suspension Message Title",suspensionMessage:"Suspension Message Content",inArabic:"In Arabic",inEnglish:"In English",inTurkish:"In Turkish",save:"Save Changes",saving:"Saving...",loading:"Loading settings..."},tr:{title:"Askıya Alma Mesajı Ayarları",description:"Hesapları askıya alınmış kullanıcılara gösterilen mesajları özelleştirin.",suspensionTitle:"Askıya Alma Mesajı Başlığı",suspensionMessage:"Askıya Alma Mesajı İçeriği",inArabic:"Arapça",inEnglish:"İngilizce",inTurkish:"Türkçe",save:"Değişiklikleri Kaydet",saving:"Kaydediliyor...",loading:"Ayarlar yükleniyor..."}}[c];return n?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(K,{className:"w-6 h-6 animate-spin mr-2"}),e.jsx("span",{children:i.loading})]}):e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5"}),i.title]}),e.jsx(q,{children:i.description})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:i.suspensionTitle}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"suspensionTitleAr",children:i.inArabic}),e.jsx(C,{id:"suspensionTitleAr",value:s.suspensionTitleAr||"",onChange:l=>a("suspensionTitleAr",l.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"suspensionTitleEn",children:i.inEnglish}),e.jsx(C,{id:"suspensionTitleEn",value:s.suspensionTitleEn||"",onChange:l=>a("suspensionTitleEn",l.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"suspensionTitleTr",children:i.inTurkish}),e.jsx(C,{id:"suspensionTitleTr",value:s.suspensionTitleTr||"",onChange:l=>a("suspensionTitleTr",l.target.value)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:i.suspensionMessage}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"suspensionMessageAr",children:i.inArabic}),e.jsx(V,{id:"suspensionMessageAr",value:s.suspensionMessageAr||"",onChange:l=>a("suspensionMessageAr",l.target.value),className:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"suspensionMessageEn",children:i.inEnglish}),e.jsx(V,{id:"suspensionMessageEn",value:s.suspensionMessageEn||"",onChange:l=>a("suspensionMessageEn",l.target.value),className:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"suspensionMessageTr",children:i.inTurkish}),e.jsx(V,{id:"suspensionMessageTr",value:s.suspensionMessageTr||"",onChange:l=>a("suspensionMessageTr",l.target.value),className:"min-h-[120px]"})]})]})]}),e.jsx("div",{children:e.jsx(S,{onClick:r,disabled:t,children:t?i.saving:i.save})})]})]})},wl=({settings:s,updateSetting:a,currentLanguage:r,t})=>{const{toast:n}=se(),[c,o]=x.useState(!1),i=async l=>{var h;const m=(h=l.target.files)==null?void 0:h[0];if(m){o(!0);try{const g=`public-assets/${`favicon-${Date.now()}.${m.name.split(".").pop()}`}`;if(s.faviconUrl){const p=s.faviconUrl.substring(s.faviconUrl.lastIndexOf("public-assets/"));p&&await T.storage.from("public-assets").remove([p])}const{error:u}=await T.storage.from("public-assets").upload(g,m);if(u)throw u;const{data:{publicUrl:v}}=T.storage.from("public-assets").getPublicUrl(g);if(v)a("faviconUrl",v),n({title:r==="ar"?"نجح الرفع":"Upload Successful",description:r==="ar"?"تم تحديث أيقونة الموقع.":"Favicon has been updated."});else throw new Error("Could not get public URL for favicon.")}catch(d){console.error("Error uploading favicon:",d),n({title:r==="ar"?"خطأ في الرفع":"Upload Error",description:d.message,variant:"destructive"})}finally{o(!1),l.target.value=""}}};return e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"w-5 h-5"}),r==="ar"?"هوية الموقع":"Site Identity"]}),e.jsx(q,{children:r==="ar"?"إعدادات اسم الموقع ووصفه بجميع اللغات والحد الأقصى للعقارات.":"Site name, description (all languages), and max properties settings."})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(j,{className:"text-base font-semibold mb-4 block",children:r==="ar"?"اسم الموقع":"Site Name"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"siteNameAr",className:"text-sm",children:"العربية"}),e.jsx(C,{id:"siteNameAr",value:s.siteNameAr,onChange:l=>a("siteNameAr",l.target.value),placeholder:"اسم الموقع بالعربية"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"siteNameEn",className:"text-sm",children:"English"}),e.jsx(C,{id:"siteNameEn",value:s.siteNameEn,onChange:l=>a("siteNameEn",l.target.value),placeholder:"Site name in English"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"siteNameTr",className:"text-sm",children:"Türkçe"}),e.jsx(C,{id:"siteNameTr",value:s.siteNameTr,onChange:l=>a("siteNameTr",l.target.value),placeholder:"Türkçe site adı"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-base font-semibold mb-4 block",children:r==="ar"?"وصف الموقع":"Site Description"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"siteDescriptionAr",className:"text-sm",children:"العربية"}),e.jsx(V,{id:"siteDescriptionAr",value:s.siteDescriptionAr,onChange:l=>a("siteDescriptionAr",l.target.value),placeholder:"وصف الموقع بالعربية",rows:3})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"siteDescriptionEn",className:"text-sm",children:"English"}),e.jsx(V,{id:"siteDescriptionEn",value:s.siteDescriptionEn,onChange:l=>a("siteDescriptionEn",l.target.value),placeholder:"Site description in English",rows:3})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"siteDescriptionTr",className:"text-sm",children:"Türkçe"}),e.jsx(V,{id:"siteDescriptionTr",value:s.siteDescriptionTr,onChange:l=>a("siteDescriptionTr",l.target.value),placeholder:"Türkçe site açıklaması",rows:3})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"maxProperties",children:r==="ar"?"الحد الأقصى للعقارات":"Max Properties"}),e.jsx(C,{id:"maxProperties",type:"number",value:s.maxProperties,onChange:l=>a("maxProperties",l.target.value),className:"max-w-xs"})]}),e.jsxs("div",{children:[e.jsx(j,{className:"text-base font-semibold mb-4 block",children:r==="ar"?"أيقونة الموقع (Favicon)":"Favicon"}),e.jsxs("div",{className:"flex items-center gap-4",children:[s.faviconUrl&&e.jsx("img",{src:s.faviconUrl,alt:"Favicon preview",className:"w-10 h-10 rounded-md object-contain border p-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(C,{id:"favicon-upload",type:"file",accept:"image/png, image/jpeg, image/svg+xml, image/x-icon",onChange:i,disabled:c,className:"hidden"}),e.jsx(S,{asChild:!0,variant:"outline",disabled:c,children:e.jsx("label",{htmlFor:"favicon-upload",className:"cursor-pointer flex items-center",children:c?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"mr-2 h-4 w-4 animate-spin"}),r==="ar"?"جاري الرفع...":"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),r==="ar"?"رفع أيقونة جديدة":"Upload New Favicon"]})})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:r==="ar"?"مستحسن: 32x32 أو 64x64 بيكسل (PNG, ICO, SVG).":"Recommended: 32x32 or 64x64 pixels (PNG, ICO, SVG)."})]})]})]})]})]})},Cl=({settings:s,updateSetting:a,currentLanguage:r,t})=>e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(yn,{className:"w-5 h-5"}),r==="ar"?"إعدادات المظهر":"Appearance Settings"]}),e.jsx(q,{children:r==="ar"?"تخصيص ألوان الموقع الرئيسية والمتدرجة":"Customize main and gradient site colors"})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"brandAccentColor",className:"text-base font-semibold mb-2 block",children:r==="ar"?"لون التمييز (Solid)":"Brand Accent Color (Solid)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{id:"brandAccentColor",type:"color",value:s.brandAccentColor,onChange:n=>a("brandAccentColor",n.target.value),className:"p-1 h-10 w-14 block border border-gray-300 cursor-pointer rounded-md"}),e.jsx(C,{type:"text",value:s.brandAccentColor,onChange:n=>a("brandAccentColor",n.target.value),placeholder:"#ec489a",className:"max-w-xs"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r==="ar"?"اختر اللون الرئيسي المستخدم في الأزرار والعناصر المميزة.":"Select the main accent color used for buttons and highlighted elements."})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx(j,{className:"text-base font-semibold mb-2 block",children:r==="ar"?"ألوان التدرج (Gradient)":"Gradient Colors"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 mb-4",children:r==="ar"?"اختر الألوان المستخدمة في الأزرار ذات الخلفية المتدرجة.":"Select colors for buttons with gradient backgrounds."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"gradientFromColor",className:"font-medium mb-2 block",children:r==="ar"?"من لون":"From Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{id:"gradientFromColor",type:"color",value:s.gradientFromColor||"",onChange:n=>a("gradientFromColor",n.target.value),className:"p-1 h-10 w-14 block border border-gray-300 cursor-pointer rounded-md"}),e.jsx(C,{type:"text",value:s.gradientFromColor||"",onChange:n=>a("gradientFromColor",n.target.value),placeholder:"#ec489a",className:"max-w-xs"})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"gradientToColor",className:"font-medium mb-2 block",children:r==="ar"?"إلى لون":"To Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{id:"gradientToColor",type:"color",value:s.gradientToColor||"",onChange:n=>a("gradientToColor",n.target.value),className:"p-1 h-10 w-14 block border border-gray-300 cursor-pointer rounded-md"}),e.jsx(C,{type:"text",value:s.gradientToColor||"",onChange:n=>a("gradientToColor",n.target.value),placeholder:"#f43f5e",className:"max-w-xs"})]})]})]})]})]})]}),Sl=[{key:"ar",label:"العربية"},{key:"en",label:"English"},{key:"tr",label:"Türkçe"}],kl=({settings:s,updateSetting:a,currentLanguage:r,t})=>e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5"}),r==="ar"?"معلومات الاتصال العامة (للفوتر وصفحة التواصل)":"General Contact Information (for Footer & Contact Page)"]}),e.jsx(q,{children:r==="ar"?"العنوان ورقم الهاتف والبريد الإلكتروني وروابط التواصل التي تظهر في الموقع.":"Site address, phone number, general email and contact links shown on the site."})]}),e.jsxs(R,{className:"space-y-8",children:[["address","phoneNumber","siteEmailAddress"].map((n,c)=>{let o="",i="";n==="address"&&(o=r==="ar"?"العنوان":"Address",i=r==="ar"?"أدخل عنوان الموقع":"Enter site address"),n==="phoneNumber"&&(o=r==="ar"?"رقم الهاتف":"Phone Number",i=r==="ar"?"أدخل رقم الهاتف":"Enter phone number"),n==="siteEmailAddress"&&(o=r==="ar"?"البريد الإلكتروني للموقع":"Site Email Address",i=r==="ar"?"أدخل بريد الموقع":"Enter site email address");const l={ar:n==="address"?"addressAr":n==="phoneNumber"?"phoneNumberAr":"siteEmailAddressAr",en:n==="address"?"addressEn":n==="phoneNumber"?"phoneNumberEn":"siteEmailAddressEn",tr:n==="address"?"addressTr":n==="phoneNumber"?"phoneNumberTr":"siteEmailAddressTr"},m={address:"contactAddressEnabled",phone:"contactPhoneEnabled",email:"contactEmailEnabled"},h=s[m[n==="address"?"address":n==="phoneNumber"?"phone":"email"]]!==!1;return e.jsxs("div",{className:"border p-4 rounded-md shadow-sm relative bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{className:"font-semibold",children:o}),e.jsx(Ce,{checked:h,onCheckedChange:d=>a(m[n==="address"?"address":n==="phoneNumber"?"phone":"email"],d),className:"ml-2 rtl:mr-2 rtl:ml-0"}),e.jsx("span",{className:"text-xs text-gray-400",children:h?e.jsx(ge,{className:"inline w-4 h-4"}):e.jsx(Le,{className:"inline w-4 h-4"})}),e.jsx("span",{className:"text-xs text-gray-400 ml-2 rtl:mr-2 rtl:ml-0",children:h?r==="ar"?"ظاهر":"Visible":r==="ar"?"مخفي":"Hidden"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Sl.map(d=>e.jsxs("div",{children:[e.jsx(j,{htmlFor:`${n}_${d.key}`,className:"text-xs font-bold",children:d.label}),e.jsx(C,{id:`${n}_${d.key}`,type:n==="siteEmailAddress"?"email":"text",value:typeof s[l[d.key]]=="string"?s[l[d.key]]:"",onChange:g=>a(l[d.key],g.target.value),placeholder:i+(d.label?` (${d.label})`:""),dir:d.key==="ar"?"rtl":"ltr"})]},d.key))})]},n)}),e.jsxs("div",{className:"border p-4 rounded-md shadow-sm relative bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($s,{className:"w-5 h-5"}),e.jsx(j,{className:"font-semibold",children:r==="ar"?"واتساب":"WhatsApp"}),e.jsx(Ce,{checked:s.contactWhatsappEnabled!==!1,onCheckedChange:n=>a("contactWhatsappEnabled",n),className:"ml-2 rtl:mr-2 rtl:ml-0"}),e.jsx("span",{className:"text-xs text-gray-400",children:s.contactWhatsappEnabled!==!1?e.jsx(ge,{className:"inline w-4 h-4"}):e.jsx(Le,{className:"inline w-4 h-4"})}),e.jsx("span",{className:"text-xs text-gray-400 ml-2 rtl:mr-2 rtl:ml-0",children:s.contactWhatsappEnabled!==!1?r==="ar"?"ظاهر":"Visible":r==="ar"?"مخفي":"Hidden"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"whatsappLink",className:"text-xs font-bold",children:r==="ar"?"رابط واتساب":"WhatsApp Link"}),e.jsx(C,{id:"whatsappLink",value:s.whatsappLink||"",onChange:n=>a("whatsappLink",n.target.value),placeholder:"e.g., https://wa.me/1234567890",dir:"ltr"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r==="ar"?'سيظهر في صفحة "تواصل معنا".':'Will be displayed on the "Contact Us" page.'})]})]})]})]}),El=({settings:s,updateSetting:a,currentLanguage:r,t})=>e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"w-5 h-5"}),r==="ar"?"روابط التواصل الاجتماعي (للفوتر)":"Social Media Links (for Footer)"]}),e.jsx(q,{children:r==="ar"?"إدارة روابط التواصل الاجتماعي التي تظهر في الفوتر.":"Manage social media links shown in the footer."})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"facebookUrl",children:"Facebook URL"}),e.jsx(C,{id:"facebookUrl",value:s.facebookUrl||"",onChange:n=>a("facebookUrl",n.target.value),placeholder:"https://facebook.com/yourpage"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"instagramUrl",children:"Instagram URL"}),e.jsx(C,{id:"instagramUrl",value:s.instagramUrl||"",onChange:n=>a("instagramUrl",n.target.value),placeholder:"https://instagram.com/yourprofile"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"twitterUrl",children:"Twitter (X) URL"}),e.jsx(C,{id:"twitterUrl",value:s.twitterUrl||"",onChange:n=>a("twitterUrl",n.target.value),placeholder:"https://twitter.com/yourhandle"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"youtubeUrl",children:r==="ar"?"رابط يوتيوب":"YouTube URL"}),e.jsx(C,{id:"youtubeUrl",value:s.youtubeUrl||"",onChange:n=>a("youtubeUrl",n.target.value),placeholder:"https://youtube.com/yourchannel"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"whatsappLink",children:r==="ar"?"رابط واتساب":"WhatsApp Link"}),e.jsx(C,{id:"whatsappLink",value:s.whatsappLink||"",onChange:n=>a("whatsappLink",n.target.value),placeholder:"https://wa.me/yourphonenumber"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"linkedinUrl",children:r==="ar"?"رابط لينكدإن":"LinkedIn URL"}),e.jsx(C,{id:"linkedinUrl",value:s.linkedinUrl||"",onChange:n=>a("linkedinUrl",n.target.value),placeholder:"https://linkedin.com/in/yourprofile"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"tiktokUrl",children:r==="ar"?"رابط تيك توك":"TikTok URL"}),e.jsx(C,{id:"tiktokUrl",value:s.tiktokUrl||"",onChange:n=>a("tiktokUrl",n.target.value),placeholder:"https://tiktok.com/@yourusername"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"snapchatUrl",children:r==="ar"?"رابط سناب شات":"Snapchat URL"}),e.jsx(C,{id:"snapchatUrl",value:s.snapchatUrl||"",onChange:n=>a("snapchatUrl",n.target.value),placeholder:"https://snapchat.com/add/yourusername"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"pinterestUrl",children:r==="ar"?"رابط بينتريست":"Pinterest URL"}),e.jsx(C,{id:"pinterestUrl",value:s.pinterestUrl||"",onChange:n=>a("pinterestUrl",n.target.value),placeholder:"https://pinterest.com/yourusername"})]})]})]}),Al=({settings:s,updateSetting:a,currentLanguage:r,t})=>e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx("span",{children:"📧"}),r==="ar"?"إيميل الدعم الفني":"Support Email"]}),e.jsx(q,{children:r==="ar"?"سيظهر هذا البريد في فوتر الموقع وسيتم إرسال جميع رسائل التواصل إليه.":"This email will be displayed in the site footer and all contact form messages will be sent to it."})]}),e.jsxs(R,{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"supportEmail",children:r==="ar"?"بريد الدعم الفني":"Support Email"}),e.jsx(C,{id:"supportEmail",type:"email",value:s.supportEmail||"",onChange:n=>a("supportEmail",n.target.value),placeholder:"support@example.com",dir:"ltr"}),e.jsx("p",{className:"text-xs text-green-600 mt-1 font-medium",children:r==="ar"?"✓ جميع رسائل نموذج التواصل ستُرسل إلى هذا البريد":"✓ All contact form messages will be sent to this email"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"phoneNumber",children:r==="ar"?"رقم الدعم الفني":"Support Phone"}),e.jsx(C,{id:"phoneNumber",type:"tel",value:s.phoneNumber||"",onChange:n=>a("phoneNumber",n.target.value),placeholder:"+1234567890",dir:"ltr"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r==="ar"?"سيظهر هذا الرقم في فوتر الموقع بجانب الاتصال.":"This phone number will be displayed in the site footer for visitors to call you."})]})]})]}),Tl=({settings:s,updateSetting:a,currentLanguage:r,t})=>e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5"}),r==="ar"?"إعدادات الأمان":"Security Settings"]}),e.jsx(q,{children:r==="ar"?"إعدادات الأمان والخصوصية للموقع.":"Security and privacy settings for the site."})]}),e.jsxs(R,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx("input",{type:"checkbox",id:"registrationEnabled",checked:s.registrationEnabled,onChange:n=>a("registrationEnabled",n.target.checked),className:"w-4 h-4 accent-brand-accent"}),e.jsx(j,{htmlFor:"registrationEnabled",children:r==="ar"?"السماح بالتسجيل الجديد":"Allow New Registrations"})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx("input",{type:"checkbox",id:"maintenanceMode",checked:s.maintenanceMode,onChange:n=>a("maintenanceMode",n.target.checked),className:"w-4 h-4 accent-brand-accent"}),e.jsx(j,{htmlFor:"maintenanceMode",children:r==="ar"?"وضع الصيانة":"Maintenance Mode"})]}),s.maintenanceMode&&e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-yellow-800 text-sm",children:r==="ar"?"تحذير: وضع الصيانة سيجعل الموقع غير متاح للمستخدمين العاديين.":"Warning: Maintenance mode will make the site unavailable to regular users."})})]})]}),Fl=({settings:s,updateSetting:a,currentLanguage:r,t})=>e.jsxs("div",{className:"bg-gray-50 border border-gray-200 dark:bg-[#181c20] dark:border-gray-700 p-5 rounded-xl my-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 text-gray-800 dark:text-gray-100",children:t("siteSettings.heroSectionTitle")||"Hero Section"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium mb-1 text-sm text-gray-700 dark:text-gray-300",children:[t("arabic")||"Arabic"," ",t("title")||"Title"]}),e.jsx(C,{value:s.heroTitleAr||"",onChange:n=>a("heroTitleAr",n.target.value),placeholder:"العنوان في الهيرو (بالعربية)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium mb-1 text-sm text-gray-700 dark:text-gray-300",children:[t("english")||"English"," ",t("title")||"Title"]}),e.jsx(C,{value:s.heroTitleEn||"",onChange:n=>a("heroTitleEn",n.target.value),placeholder:"Hero title (English)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium mb-1 text-sm text-gray-700 dark:text-gray-300",children:[t("turkish")||"Turkish"," ",t("title")||"Title"]}),e.jsx(C,{value:s.heroTitleTr||"",onChange:n=>a("heroTitleTr",n.target.value),placeholder:"Hero başlık (Türkçe)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5 mt-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium mb-1 text-sm text-gray-700 dark:text-gray-300",children:[t("arabic")||"Arabic"," ",t("description")||"Description"]}),e.jsx(C,{value:s.heroDescriptionAr||"",onChange:n=>a("heroDescriptionAr",n.target.value),placeholder:"وصف الهيرو (بالعربية)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium mb-1 text-sm text-gray-700 dark:text-gray-300",children:[t("english")||"English"," ",t("description")||"Description"]}),e.jsx(C,{value:s.heroDescriptionEn||"",onChange:n=>a("heroDescriptionEn",n.target.value),placeholder:"Hero description (English)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block font-medium mb-1 text-sm text-gray-700 dark:text-gray-300",children:[t("turkish")||"Turkish"," ",t("description")||"Description"]}),e.jsx(C,{value:s.heroDescriptionTr||"",onChange:n=>a("heroDescriptionTr",n.target.value),placeholder:"Hero açıklama (Türkçe)"})]})]})]}),Ls=({label:s,value:a,onValueChange:r,bucketName:t,filePathPrefix:n=""})=>{const[c,o]=x.useState(!1),{toast:i}=se(),{currentLanguage:l}=F(),m=async d=>{var u;const g=(u=d.target.files)==null?void 0:u[0];if(g){o(!0);try{const v=g.name.split(".").pop(),_=`${`${n}${Date.now()}.${v}`}`;if(a){const w=a.split(`${t}/`).pop();w&&await T.storage.from(t).remove([w])}const{data:f,error:N}=await T.storage.from(t).upload(_,g,{upsert:!0});if(N)throw N;const{data:{publicUrl:y}}=T.storage.from(t).getPublicUrl(f.path);r(y),i({title:l==="ar"?"تم رفع الملف":"File Uploaded",description:l==="ar"?'الرجاء الضغط على "حفظ جميع الإعدادات" لتطبيق التغيير.':'Please click "Save All Settings" to apply the change.'})}catch(v){console.error("Error uploading file:",v),i({title:l==="ar"?"خطأ في الرفع":"Upload Error",description:v.message||(l==="ar"?"فشل رفع الملف.":"Failed to upload file."),variant:"destructive"})}finally{o(!1)}}},h=async()=>{if(a){o(!0);try{const d=a.split(`${t}/`).pop();if(d){const{error:g}=await T.storage.from(t).remove([d]);if(g)throw g}r(null),i({title:l==="ar"?"تمت إزالة الصورة":"Image Removed",description:l==="ar"?'الرجاء الضغط على "حفظ جميع الإعدادات" لتطبيق التغيير.':'Please click "Save All Settings" to apply the change.'})}catch(d){console.error("Error removing image:",d),i({title:l==="ar"?"خطأ":"Error",description:l==="ar"?"فشل في إزالة الصورة.":"Failed to remove image.",variant:"destructive"})}finally{o(!1)}}};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:s}),e.jsx("div",{className:"flex items-center gap-4",children:a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:a,alt:s,className:"w-24 h-24 object-contain rounded-md border p-1"}),e.jsx(S,{variant:"destructive",size:"icon",onClick:h,disabled:c,"aria-label":"Remove image",children:c?e.jsx(K,{className:"h-4 w-4 animate-spin"}):e.jsx(me,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"relative w-full",children:[e.jsx(C,{id:`uploader-${s}`,type:"file",onChange:m,disabled:c,accept:"image/*,.svg",className:"w-full"}),c&&e.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center rounded-md",children:e.jsx(K,{className:"h-6 w-6 animate-spin"})})]})})]})},Dl=({settings:s,updateSetting:a,t:r})=>e.jsxs(P,{children:[e.jsxs($,{children:[e.jsx(O,{children:"إعدادات صفحة 404 (غير موجود)"}),e.jsx(q,{children:"تحكم في محتوى صفحة الخطأ 404 التي تظهر للزوار عند محاولة الوصول إلى رابط غير موجود."})]}),e.jsx(R,{children:e.jsxs(Te,{defaultValue:"ar",className:"w-full",children:[e.jsxs(Fe,{className:"grid w-full grid-cols-3",children:[e.jsx(ae,{value:"ar",children:"العربية"}),e.jsx(ae,{value:"en",children:"English"}),e.jsx(ae,{value:"tr",children:"Türkçe"})]}),e.jsxs(re,{value:"ar",className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"notFoundTitleAr",children:"عنوان الصفحة (عربي)"}),e.jsx(C,{id:"notFoundTitleAr",value:s.notFoundTitleAr||"",onChange:t=>a("notFoundTitleAr",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"notFoundDescAr",children:"وصف قصير (عربي)"}),e.jsx(V,{id:"notFoundDescAr",value:s.notFoundDescAr||"",onChange:t=>a("notFoundDescAr",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"notFoundButtonAr",children:"نص زر العودة (عربي)"}),e.jsx(C,{id:"notFoundButtonAr",value:s.notFoundButtonAr||"",onChange:t=>a("notFoundButtonAr",t.target.value)})]}),e.jsx(Ls,{label:"صورة الصفحة (عربي)",value:s.notFoundSvgAr,onValueChange:t=>a("notFoundSvgAr",t===null?"":t),bucketName:"site-assets",filePathPrefix:"404-ar-",t:r})]}),e.jsxs(re,{value:"en",className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"notFoundTitleEn",children:"Page Title (English)"}),e.jsx(C,{id:"notFoundTitleEn",value:s.notFoundTitleEn||"",onChange:t=>a("notFoundTitleEn",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"notFoundDescEn",children:"Short Description (English)"}),e.jsx(V,{id:"notFoundDescEn",value:s.notFoundDescEn||"",onChange:t=>a("notFoundDescEn",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"notFoundButtonEn",children:"Button Text (English)"}),e.jsx(C,{id:"notFoundButtonEn",value:s.notFoundButtonEn||"",onChange:t=>a("notFoundButtonEn",t.target.value)})]}),e.jsx(Ls,{label:"Page Image (English)",value:s.notFoundSvgEn,onValueChange:t=>a("notFoundSvgEn",t===null?"":t),bucketName:"site-assets",filePathPrefix:"404-en-",t:r})]}),e.jsxs(re,{value:"tr",className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"notFoundTitleTr",children:"Sayfa Başlığı (Türkçe)"}),e.jsx(C,{id:"notFoundTitleTr",value:s.notFoundTitleTr||"",onChange:t=>a("notFoundTitleTr",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"notFoundDescTr",children:"Kısa Açıklama (Türkçe)"}),e.jsx(V,{id:"notFoundDescTr",value:s.notFoundDescTr||"",onChange:t=>a("notFoundDescTr",t.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"notFoundButtonTr",children:"Düğme Metni (Türkçe)"}),e.jsx(C,{id:"notFoundButtonTr",value:s.notFoundButtonTr||"",onChange:t=>a("notFoundButtonTr",t.target.value)})]}),e.jsx(Ls,{label:"Sayfa Resmi (Türkçe)",value:s.notFoundSvgTr,onValueChange:t=>a("notFoundSvgTr",t===null?"":t),bucketName:"site-assets",filePathPrefix:"404-tr-",t:r})]})]})})]}),Pl=({settings:s,updateSetting:a,currentLanguage:r})=>e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5"}),r==="ar"?"إعدادات حساب قيد المراجعة":r==="tr"?"İnceleme Bekleyen Hesap Ayarları":"Pending Approval Settings"]}),e.jsx(q,{children:r==="ar"?"رسائل تظهر للمستخدمين عندما تكون حساباتهم قيد المراجعة.":r==="tr"?"Hesapları inceleme beklerken kullanıcılara gösterilen mesajlar.":"Messages shown to users when their accounts are pending approval."})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:r==="ar"?"عنوان الرسالة":r==="tr"?"Mesaj Başlığı":"Message Title"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"pendingApprovalTitleAr",className:"text-sm font-medium",children:"العربية"}),e.jsx(C,{id:"pendingApprovalTitleAr",value:s.pendingApprovalTitleAr||"",onChange:t=>a("pendingApprovalTitleAr",t.target.value),placeholder:"حسابك قيد المراجعة",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"pendingApprovalTitleEn",className:"text-sm font-medium",children:"English"}),e.jsx(C,{id:"pendingApprovalTitleEn",value:s.pendingApprovalTitleEn||"",onChange:t=>a("pendingApprovalTitleEn",t.target.value),placeholder:"Account Under Review",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"pendingApprovalTitleTr",className:"text-sm font-medium",children:"Türkçe"}),e.jsx(C,{id:"pendingApprovalTitleTr",value:s.pendingApprovalTitleTr||"",onChange:t=>a("pendingApprovalTitleTr",t.target.value),placeholder:"Hesabınız İnceleniyor",className:"mt-1"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:r==="ar"?"نص الرسالة":r==="tr"?"Mesaj Metni":"Message Text"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"pendingApprovalMessageAr",className:"text-sm font-medium",children:"العربية"}),e.jsx(V,{id:"pendingApprovalMessageAr",value:s.pendingApprovalMessageAr||"",onChange:t=>a("pendingApprovalMessageAr",t.target.value),placeholder:"شكراً لتسجيلك في منصتنا! حسابك الآن قيد المراجعة من قبل الإدارة...",className:"mt-1 min-h-[100px]"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"pendingApprovalMessageEn",className:"text-sm font-medium",children:"English"}),e.jsx(V,{id:"pendingApprovalMessageEn",value:s.pendingApprovalMessageEn||"",onChange:t=>a("pendingApprovalMessageEn",t.target.value),placeholder:"Thank you for registering on our platform! Your account is now under review...",className:"mt-1 min-h-[100px]"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"pendingApprovalMessageTr",className:"text-sm font-medium",children:"Türkçe"}),e.jsx(V,{id:"pendingApprovalMessageTr",value:s.pendingApprovalMessageTr||"",onChange:t=>a("pendingApprovalMessageTr",t.target.value),placeholder:"Platformumuza kaydolduğunuz için teşekkür ederiz! Hesabınız şu anda inceleniyor...",className:"mt-1 min-h-[100px]"})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-2 text-gray-900 dark:text-white",children:r==="ar"?"معاينة":r==="tr"?"Önizleme":"Preview"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("strong",{children:r==="ar"?s.pendingApprovalTitleAr:r==="tr"?s.pendingApprovalTitleTr:s.pendingApprovalTitleEn}),e.jsx("p",{className:"mt-2",children:r==="ar"?s.pendingApprovalMessageAr:r==="tr"?s.pendingApprovalMessageTr:s.pendingApprovalMessageEn})]})]})]})]}),Rl=()=>{const{currentLanguage:s,t:a}=F(),{settings:r,loading:t,saving:n,updateSetting:c,saveSettings:o}=ks();return t?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(K,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:s==="ar"?"جاري التحميل...":"Loading..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a("siteSettings.title")}),e.jsx("p",{className:"text-gray-600",children:a("siteSettings.description")})]}),e.jsx(_l,{}),e.jsx(wl,{settings:r,updateSetting:c,currentLanguage:s,t:a}),e.jsx(Fl,{settings:r,updateSetting:c,currentLanguage:s,t:a}),e.jsx(Cl,{settings:r,updateSetting:c,currentLanguage:s,t:a}),e.jsx(ml,{settings:r,updateSetting:c}),e.jsx(kl,{settings:r,updateSetting:c,currentLanguage:s,t:a}),e.jsx(El,{settings:r,updateSetting:c,currentLanguage:s,t:a}),e.jsx(Al,{settings:r,updateSetting:c,currentLanguage:s,t:a}),e.jsx(Tl,{settings:r,updateSetting:c,currentLanguage:s,t:a}),e.jsx(Pl,{settings:r,updateSetting:c,currentLanguage:s,t:a}),e.jsx(Dl,{settings:r,updateSetting:c,t:a}),e.jsx(bl,{}),e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{onClick:o,disabled:n,className:"flex items-center gap-2 bg-brand-accent hover:bg-brand-accent/90 text-brand-accent-foreground",children:n?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 animate-spin"}),s==="ar"?"جاري الحفظ...":"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4"}),s==="ar"?"حفظ جميع الإعدادات":"Save All Settings"]})})})]})},Ml=({settings:s,updateSetting:a})=>{const r=!!s.announcementBarEnabled;return e.jsxs(P,{children:[e.jsx($,{children:e.jsx(O,{children:"شريط الإعلانات / Announcement Bar"})}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsx(j,{htmlFor:"announcementBarEnabled",className:"font-semibold cursor-pointer",children:"تفعيل شريط الإعلانات / Enable Announcement Bar"}),e.jsx(Ce,{id:"announcementBarEnabled",checked:r,onCheckedChange:t=>a("announcementBarEnabled",t)})]}),e.jsxs("div",{className:`space-y-4 pt-4 border-t transition-opacity ${r?"opacity-100":"opacity-50 pointer-events-none"}`,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"announcementBarTextAr",children:"النص باللغة العربية"}),e.jsx(V,{id:"announcementBarTextAr",dir:"rtl",value:s.announcementBarTextAr||"",onChange:t=>a("announcementBarTextAr",t.target.value),placeholder:"أدخل نص الإعلان باللغة العربية",disabled:!r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"announcementBarTextEn",children:"النص باللغة الإنجليزية"}),e.jsx(V,{id:"announcementBarTextEn",value:s.announcementBarTextEn||"",onChange:t=>a("announcementBarTextEn",t.target.value),placeholder:"Enter announcement text in English",disabled:!r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"announcementBarTextTr",children:"النص باللغة التركية"}),e.jsx(V,{id:"announcementBarTextTr",value:s.announcementBarTextTr||"",onChange:t=>a("announcementBarTextTr",t.target.value),placeholder:"Duyuru metnini Türkçe girin",disabled:!r})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"announcementBarLink",children:"الرابط (اختياري)"}),e.jsx(C,{id:"announcementBarLink",type:"url",value:s.announcementBarLink||"",onChange:t=>a("announcementBarLink",t.target.value),placeholder:"https://example.com",disabled:!r})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"announcementBarBackgroundColor",children:"لون الخلفية / Background Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{id:"announcementBarBackgroundColor",type:"color",value:s.announcementBarBackgroundColor||"#3b82f6",onChange:t=>a("announcementBarBackgroundColor",t.target.value),className:"p-1 h-10 w-14 cursor-pointer",disabled:!r}),e.jsx(C,{type:"text",value:s.announcementBarBackgroundColor||"",onChange:t=>a("announcementBarBackgroundColor",t.target.value),placeholder:"#3b82f6",disabled:!r,className:"max-w-xs"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"announcementBarTextColor",children:"لون النص / Text Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{id:"announcementBarTextColor",type:"color",value:s.announcementBarTextColor||"#ffffff",onChange:t=>a("announcementBarTextColor",t.target.value),className:"p-1 h-10 w-14 cursor-pointer",disabled:!r}),e.jsx(C,{type:"text",value:s.announcementBarTextColor||"",onChange:t=>a("announcementBarTextColor",t.target.value),placeholder:"#ffffff",disabled:!r,className:"max-w-xs"})]})]})]})]})]})]})},Ll=()=>{const{settings:s,loading:a,saving:r,updateSetting:t,saveSettings:n}=ks(),{currentLanguage:c}=F();return a?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(K,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:c==="ar"?"جاري التحميل...":"Loading..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:c==="ar"?"إدارة شريط الإعلانات":"Announcement Bar Management"}),e.jsx("p",{className:"text-gray-600",children:c==="ar"?"تفعيل وتخصيص شريط الإعلانات العلوي.":"Enable and customize the top announcement bar."})]}),e.jsx(Ml,{settings:s,updateSetting:t}),e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{onClick:n,disabled:r,className:"flex items-center gap-2 bg-brand-accent hover:bg-brand-accent/90 text-brand-accent-foreground",children:r?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 animate-spin"}),c==="ar"?"جاري الحفظ...":"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4"}),c==="ar"?"حفظ الإعدادات":"Save Settings"]})})})]})},Ul=({value:s,onChange:a,t:r})=>{const[t,n]=x.useState([]),[c,o]=x.useState(null),{toast:i}=se();x.useEffect(()=>{try{if(!s||s.trim()===""){n([]);return}const u=JSON.parse(s);if(!Array.isArray(u)){console.warn("Team members data is not an array, resetting to empty array"),n([]);return}const v=u.map(p=>({id:p.id||crypto.randomUUID(),name_ar:p.name_ar||"",name_en:p.name_en||"",name_tr:p.name_tr||"",role_ar:p.role_ar||"",role_en:p.role_en||"",role_tr:p.role_tr||"",avatar:p.avatar||"/placeholder.svg"}));n(v)}catch(u){console.error("Failed to parse team members JSON:",u),console.error("Value that caused error:",s),n([]),s&&s.trim()!==""&&s!=="[]"&&i({title:"Error",description:"Could not load team members. Using default data.",variant:"destructive"})}},[s,i]);const l=u=>{a(JSON.stringify(u))},m=()=>{const u={id:crypto.randomUUID(),name_ar:"",name_en:"",name_tr:"",role_ar:"",role_en:"",role_tr:"",avatar:"/placeholder.svg"},v=[...t,u];n(v),l(v)},h=(u,v,p)=>{const _=t.map(f=>f.id===u?{...f,[v]:p}:f);n(_),l(_)},d=u=>{const v=t.filter(p=>p.id!==u);n(v),l(v)},g=async(u,v)=>{if(v){o(u);try{const p=v.name.split(".").pop(),f=`team-avatars/${`${Date.now()}-${Math.random().toString(36).substring(2)}.${p}`}`,{error:N}=await T.storage.from("property-media").upload(f,v);if(N)throw N;const{data:{publicUrl:y}}=T.storage.from("property-media").getPublicUrl(f);h(u,"avatar",y),i({title:r("siteSettings.about.avatarUploadSuccess")})}catch(p){console.error("Error uploading avatar:",p),i({title:r("siteSettings.about.avatarUploadError"),description:p.message,variant:"destructive"})}finally{o(null)}}};return e.jsxs(P,{children:[e.jsxs($,{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(O,{children:r("siteSettings.about.teamMembers")}),e.jsx(q,{children:r("siteSettings.about.teamMembersDescription")})]}),e.jsxs(S,{onClick:m,className:"w-full md:w-auto",children:[e.jsx(Sn,{className:"mr-2 h-4 w-4"})," ",r("siteSettings.about.addMember")]})]}),e.jsxs(R,{className:"space-y-6",children:[t.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-4",children:r("siteSettings.about.noMembers")}),t.map(u=>{var v;return e.jsxs("div",{className:"border p-4 rounded-lg space-y-4 relative bg-gray-50/50",children:[e.jsx(S,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-8 w-8 text-gray-500 hover:bg-red-100 hover:text-red-600",onClick:()=>d(u.id),children:e.jsx(me,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-6",children:[e.jsxs("div",{className:"flex-shrink-0 space-y-2 text-center w-full md:w-auto",children:[e.jsxs(ws,{className:"h-24 w-24 mx-auto",children:[e.jsx(Cs,{src:u.avatar,alt:u.name_en}),e.jsx(Ss,{children:((v=u.name_en)==null?void 0:v.substring(0,2))||"AV"})]}),e.jsx("input",{type:"file",id:`avatar-upload-${u.id}`,className:"hidden",accept:"image/*",onChange:p=>p.target.files&&g(u.id,p.target.files[0])}),e.jsx(S,{asChild:!0,variant:"outline",size:"sm",className:"w-full",children:e.jsxs("label",{htmlFor:`avatar-upload-${u.id}`,className:"cursor-pointer",children:[c===u.id?e.jsx(K,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Ye,{className:"h-4 w-4 mr-2"}),r("siteSettings.about.uploadAvatar")]})})]}),e.jsxs("div",{className:"flex-grow space-y-4 w-full",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(j,{className:"md:col-span-3 font-semibold",children:r("siteSettings.about.memberName")}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:`name_en_${u.id}`,children:"English"}),e.jsx(C,{id:`name_en_${u.id}`,value:u.name_en,onChange:p=>h(u.id,"name_en",p.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:`name_ar_${u.id}`,children:"العربية"}),e.jsx(C,{id:`name_ar_${u.id}`,value:u.name_ar,dir:"rtl",onChange:p=>h(u.id,"name_ar",p.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:`name_tr_${u.id}`,children:"Türkçe"}),e.jsx(C,{id:`name_tr_${u.id}`,value:u.name_tr,onChange:p=>h(u.id,"name_tr",p.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(j,{className:"md:col-span-3 font-semibold",children:r("siteSettings.about.memberRole")}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:`role_en_${u.id}`,children:"English"}),e.jsx(C,{id:`role_en_${u.id}`,value:u.role_en,onChange:p=>h(u.id,"role_en",p.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:`role_ar_${u.id}`,children:"العربية"}),e.jsx(C,{id:`role_ar_${u.id}`,value:u.role_ar,dir:"rtl",onChange:p=>h(u.id,"role_ar",p.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:`role_tr_${u.id}`,children:"Türkçe"}),e.jsx(C,{id:`role_tr_${u.id}`,value:u.role_tr,onChange:p=>h(u.id,"role_tr",p.target.value)})]})]})]})]})]},u.id)})]})]})},$l=({settings:s,updateSetting:a,t:r,currentLanguage:t})=>{const n=(o,i)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 border p-4 rounded-md",children:[e.jsx(j,{className:"md:col-span-3 text-base font-semibold",children:i}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:`${o}En`,children:"English"}),e.jsx(C,{id:`${o}En`,value:s[`${o}En`]||"",onChange:l=>a(`${o}En`,l.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:`${o}Ar`,children:"العربية"}),e.jsx(C,{id:`${o}Ar`,value:s[`${o}Ar`]||"",onChange:l=>a(`${o}Ar`,l.target.value),dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:`${o}Tr`,children:"Türkçe"}),e.jsx(C,{id:`${o}Tr`,value:s[`${o}Tr`]||"",onChange:l=>a(`${o}Tr`,l.target.value)})]})]}),c=(o,i)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 border p-4 rounded-md",children:[e.jsx(j,{className:"md:col-span-3 text-base font-semibold",children:i}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:`${o}En`,children:"English"}),e.jsx(V,{id:`${o}En`,value:s[`${o}En`]||"",onChange:l=>a(`${o}En`,l.target.value),rows:4})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:`${o}Ar`,children:"العربية"}),e.jsx(V,{id:`${o}Ar`,value:s[`${o}Ar`]||"",onChange:l=>a(`${o}Ar`,l.target.value),dir:"rtl",rows:4})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:`${o}Tr`,children:"Türkçe"}),e.jsx(V,{id:`${o}Tr`,value:s[`${o}Tr`]||"",onChange:l=>a(`${o}Tr`,l.target.value),rows:4})]})]});return e.jsxs(P,{children:[e.jsxs($,{children:[e.jsx(O,{children:r("siteSettings.aboutPageTitle")}),e.jsx(q,{children:r("siteSettings.aboutPageDescription")})]}),e.jsxs(R,{className:"space-y-6",children:[n("aboutPageTitle",r("siteSettings.about.pageTitle")),c("aboutPageSubtitle",r("siteSettings.about.pageSubtitle")),n("aboutMissionTitle",r("siteSettings.about.missionTitle")),c("aboutMissionText",r("siteSettings.about.missionText")),n("aboutVisionTitle",r("siteSettings.about.visionTitle")),c("aboutVisionText",r("siteSettings.about.visionText")),n("aboutTeamTitle",r("siteSettings.about.teamTitle")),c("aboutTeamText",r("siteSettings.about.teamText")),e.jsx(Ul,{value:s.aboutTeamMembers||JSON.stringify([{id:"1",name_ar:"أحمد علي",name_en:"Ahmed Ali",name_tr:"Ahmet Ali",role_ar:"المدير التنفيذي",role_en:"CEO",role_tr:"CEO",avatar:"/placeholder.svg"},{id:"2",name_ar:"فاطمة خان",name_en:"Fatima Khan",name_tr:"Fatma Han",role_ar:"مديرة التسويق",role_en:"Marketing Director",role_tr:"Pazarlama Direktörü",avatar:"/placeholder.svg"},{id:"3",name_ar:"جان سميث",name_en:"John Smith",name_tr:"John Smith",role_ar:"كبير المطورين",role_en:"Lead Developer",role_tr:"Baş Geliştirici",avatar:"/placeholder.svg"}]),onChange:o=>a("aboutTeamMembers",o),t:r})]})]})},Il=()=>{const{currentLanguage:s,t:a}=F(),{settings:r,loading:t,saving:n,updateSetting:c,saveSettings:o}=ks();return t?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(K,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:s==="ar"?"جاري التحميل...":"Loading..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx($l,{settings:r,updateSetting:c,currentLanguage:s,t:a}),e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{onClick:o,disabled:n,className:"flex items-center gap-2 bg-brand-accent hover:bg-brand-accent/90 text-brand-accent-foreground",children:n?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 animate-spin"}),s==="ar"?"جاري الحفظ...":"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"w-4 h-4"}),s==="ar"?"حفظ التغييرات":"Save Changes"]})})})]})},Bl=()=>{const{currentLanguage:s}=F(),{settings:a,loading:r,saving:t,updateSetting:n,saveSettings:c}=Yt();return r?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(K,{className:"w-8 h-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:s==="ar"?"جاري التحميل...":"Loading..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s==="ar"?"إعدادات التواصل":"Contact Settings"}),e.jsx("p",{className:"text-gray-600",children:s==="ar"?"إدارة معلومات التواصل المعروضة في تفاصيل العقارات":"Manage contact information displayed in property details"})]}),e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5"}),s==="ar"?"معلومات التواصل":"Contact Information"]}),e.jsx(q,{children:s==="ar"?"هذه المعلومات ستظهر في أزرار التواصل بتفاصيل العقارات":"This information will be displayed in contact buttons on property details"})]}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(j,{htmlFor:"phone_number",className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4"}),s==="ar"?"رقم الهاتف":"Phone Number"]}),e.jsx(C,{id:"phone_number",value:a.phone_number,onChange:o=>n("phone_number",o.target.value),placeholder:s==="ar"?"أدخل رقم الهاتف":"Enter phone number",dir:"ltr"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s==="ar"?'سيتم استخدامه في زر "اتصل الآن"':'Will be used for "Call Now" button'})]}),e.jsxs("div",{children:[e.jsxs(j,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),s==="ar"?"البريد الإلكتروني":"Email"]}),e.jsx(C,{id:"email",type:"email",value:a.email,onChange:o=>n("email",o.target.value),placeholder:s==="ar"?"أدخل البريد الإلكتروني":"Enter email address",dir:"ltr"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s==="ar"?'سيتم استخدامه في زر "أرسل رسالة"':'Will be used for "Send Message" button'})]})]}),e.jsxs("div",{children:[e.jsxs(j,{htmlFor:"whatsapp_number",className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-4 h-4"}),s==="ar"?"رقم الواتساب":"WhatsApp Number"]}),e.jsx(C,{id:"whatsapp_number",value:a.whatsapp_number,onChange:o=>n("whatsapp_number",o.target.value),placeholder:s==="ar"?"أدخل رقم الواتساب (مع رمز البلد)":"Enter WhatsApp number (with country code)",dir:"ltr"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s==="ar"?"مثال: 966501234567 (بدون علامة +)":"Example: 966501234567 (without + sign)"})]}),e.jsxs("div",{children:[e.jsxs(j,{className:"flex items-center gap-2 font-semibold",children:[e.jsx($s,{className:"w-4 h-4"}),s==="ar"?"نص رسالة الواتساب الافتراضية لكل لغة":"WhatsApp Default Greeting for Each Language"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"whatsapp_greeting_ar",className:"text-xs font-bold",children:"العربية"}),e.jsx(V,{id:"whatsapp_greeting_ar",value:a.whatsapp_greeting_ar??"",onChange:o=>n("whatsapp_greeting_ar",o.target.value),placeholder:"مثال: السلام عليكم، أرغب في الاستفسار حول هذا العقار",rows:2})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"whatsapp_greeting_en",className:"text-xs font-bold",children:"English"}),e.jsx(V,{id:"whatsapp_greeting_en",value:a.whatsapp_greeting_en??"",onChange:o=>n("whatsapp_greeting_en",o.target.value),placeholder:"Example: Hello, I would like to inquire about this property",rows:2})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"whatsapp_greeting_tr",className:"text-xs font-bold",children:"Türkçe"}),e.jsx(V,{id:"whatsapp_greeting_tr",value:a.whatsapp_greeting_tr??"",onChange:o=>n("whatsapp_greeting_tr",o.target.value),placeholder:"Örnek: Merhaba, bu gayrimenkul hakkında bilgi almak istiyorum",rows:2})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s==="ar"?"ستظهر رسالة الترحيب في بداية رسالة الواتساب حسب لغة الزائر":"Greeting will appear at the top of the WhatsApp message depending on user language"})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx(S,{onClick:c,disabled:t,className:"flex items-center gap-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 animate-spin"}),s==="ar"?"جاري الحفظ...":"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4"}),s==="ar"?"حفظ إعدادات التواصل":"Save Contact Settings"]})})})]})]})]})},Us={name_ar:"",name_en:"",name_tr:""};function Ol(){const{currentLanguage:s}=F(),{data:a,isLoading:r,refetch:t}=Kt(),{toast:n}=se(),[c,o]=x.useState(Us),[i,l]=x.useState(null),[m,h]=x.useState(!1),[d,g]=x.useState(null),u=y=>{if(s==="ar"){if(y==="add")return"إضافة";if(y==="save")return"حفظ";if(y==="cancel")return"إلغاء";if(y==="edit")return"تعديل";if(y==="delete")return"حذف";if(y==="actions")return"الإجراءات";if(y==="active")return"نشط";if(y==="inactive")return"غير نشط";if(y==="arabic")return"بالعربية";if(y==="english")return"بالإنجليزية";if(y==="turkish")return"بالتركية";if(y==="contactSubjects")return"مواضيع التواصل";if(y==="newSubject")return"إضافة موضوع جديد"}if(s==="tr"){if(y==="add")return"Ekle";if(y==="save")return"Kaydet";if(y==="cancel")return"İptal";if(y==="edit")return"Düzenle";if(y==="delete")return"Sil";if(y==="actions")return"İşlemler";if(y==="active")return"Aktif";if(y==="inactive")return"Pasif";if(y==="arabic")return"Arapça";if(y==="english")return"İngilizce";if(y==="turkish")return"Türkçe";if(y==="contactSubjects")return"İletişim Konuları";if(y==="newSubject")return"Yeni Konu Ekle"}return y==="add"?"Add":y==="save"?"Save":y==="cancel"?"Cancel":y==="edit"?"Edit":y==="delete"?"Delete":y==="actions"?"Actions":y==="active"?"Active":y==="inactive"?"Inactive":y==="arabic"?"Arabic":y==="english"?"English":y==="turkish"?"Turkish":y==="contactSubjects"?"Contact Subjects":y==="newSubject"?"Add New Subject":y},v=y=>{o(w=>({...w,[y.target.name]:y.target.value}))},p=y=>{l(y.id),o({name_ar:y.name_ar,name_en:y.name_en,name_tr:y.name_tr})},_=()=>{l(null),o(Us)},f=async()=>{h(!0);try{if(i){const{error:y}=await T.from("contact_subjects").update({...c}).eq("id",i);if(y)throw y;n({title:u("save"),description:u("edit")+" "+u("contactSubjects")+" "+u("active").toLowerCase()})}else{const{error:y}=await T.from("contact_subjects").insert([{...c,is_active:!0}]);if(y)throw y;n({title:u("add"),description:u("contactSubjects")+" "+u("active").toLowerCase()})}o(Us),l(null),t()}catch(y){n({title:"Error",description:y.message||"Operation failed",variant:"destructive"})}finally{h(!1)}},N=async y=>{g(y);try{const{error:w}=await T.from("contact_subjects").update({is_active:!1}).eq("id",y);if(w)throw w;n({title:u("delete"),description:u("contactSubjects")+" "+u("inactive").toLowerCase()}),t()}catch(w){n({title:"Error",description:w.message||"Delete failed",variant:"destructive"})}finally{g(null)}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:u("contactSubjects")}),e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-end mb-4",children:[e.jsx(C,{name:"name_ar",value:c.name_ar,onChange:v,placeholder:u("arabic"),className:"md:w-[215px]"}),e.jsx(C,{name:"name_en",value:c.name_en,onChange:v,placeholder:u("english"),className:"md:w-[215px]"}),e.jsx(C,{name:"name_tr",value:c.name_tr,onChange:v,placeholder:u("turkish"),className:"md:w-[215px]"}),e.jsx(S,{onClick:f,disabled:m||!c.name_ar&&!c.name_en&&!c.name_tr,className:"mt-2 md:mt-0",children:m?e.jsx(K,{className:"w-4 h-4 animate-spin"}):u(i?"save":"add")}),i&&e.jsx(S,{variant:"outline",onClick:_,className:"mt-2 md:mt-0",children:u("cancel")})]}),e.jsx("div",{className:"overflow-x-auto bg-white rounded shadow",children:e.jsxs(ke,{children:[e.jsx(Ee,{children:e.jsxs(ee,{children:[e.jsx(L,{children:u("arabic")}),e.jsx(L,{children:u("english")}),e.jsx(L,{children:u("turkish")}),e.jsx(L,{children:u("active")}),e.jsx(L,{children:u("actions")})]})}),e.jsxs(Ae,{children:[r&&e.jsx(ee,{children:e.jsx(D,{colSpan:5,children:e.jsx(K,{className:"w-5 h-5 animate-spin"})})}),a&&a.length===0&&e.jsx(ee,{children:e.jsx(D,{colSpan:5,className:"text-center",children:u("noData")||"No data"})}),a&&a.map(y=>e.jsxs(ee,{children:[e.jsx(D,{children:y.name_ar}),e.jsx(D,{children:y.name_en}),e.jsx(D,{children:y.name_tr}),e.jsx(D,{children:e.jsx(G,{variant:y.is_active?"default":"secondary",children:y.is_active?u("active"):u("inactive")})}),e.jsx(D,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(S,{size:"sm",variant:"outline",onClick:()=>p(y),children:[e.jsx(we,{className:"w-4 h-4"})," ",u("edit")]}),e.jsxs(S,{size:"sm",variant:"outline",onClick:()=>N(y.id),disabled:d===y.id,className:"text-red-600",children:[d===y.id?e.jsx(K,{className:"w-4 h-4 animate-spin"}):e.jsx(me,{className:"w-4 h-4"}),u("delete")]})]})})]},y.id))]})]})})]})}const zl=()=>{const{currentLanguage:s}=F(),{toast:a}=se(),[r,t]=x.useState(null),[n,c]=x.useState(!0),o=async()=>{try{console.log("Fetching trial settings...");const{data:l,error:m}=await T.from("trial_settings").select("*").order("created_at",{ascending:!1}).limit(1).single();if(m){console.error("Error fetching trial settings:",m);return}console.log("Trial settings fetched:",l),t(l)}catch(l){console.error("Error fetching trial settings:",l)}finally{c(!1)}},i=async l=>{if(!r)return!1;try{console.log("Updating trial settings:",l);const{error:m}=await T.from("trial_settings").update({...l,updated_at:new Date().toISOString()}).eq("id",r.id);return m?(console.error("Error updating trial settings:",m),a({title:s==="ar"?"خطأ":"Error",description:s==="ar"?"فشل في تحديث الإعدادات":"Failed to update settings",variant:"destructive"}),!1):(console.log("Trial settings updated successfully"),a({title:s==="ar"?"نجح":"Success",description:s==="ar"?"تم تحديث الإعدادات بنجاح":"Settings updated successfully"}),t(h=>h?{...h,...l,updated_at:new Date().toISOString()}:null),!0)}catch(m){return console.error("Error updating trial settings:",m),a({title:s==="ar"?"خطأ":"Error",description:s==="ar"?"حدث خطأ غير متوقع":"An unexpected error occurred",variant:"destructive"}),!1}};return x.useEffect(()=>{o()},[]),{settings:r,loading:n,updateSettings:i,refetch:o}},Vl=()=>{const[s,a]=x.useState([]),[r,t]=x.useState(!0),n=async()=>{try{console.log("Fetching trial users...");const{data:c,error:o}=await T.from("profiles").select("*").eq("is_trial_active",!0).in("user_type",["seller","property_owner","real_estate_office"]).order("created_at",{ascending:!1});if(o)throw console.error("Error fetching trial users:",o),o;console.log("Trial users fetched:",(c==null?void 0:c.length)||0);let i=[];try{const{data:{users:m},error:h}=await T.auth.admin.listUsers();!h&&m&&(i=m)}catch(m){console.warn("Could not fetch auth users, continuing without emails:",m)}const l=(c||[]).map(m=>{const h=i.find(d=>d.id===m.id);return{id:m.id,full_name:m.full_name,phone:m.phone,email:(h==null?void 0:h.email)||`user_${m.id.substring(0,8)}@hidden.com`,user_type:m.user_type,is_trial_active:m.is_trial_active,trial_started_at:m.trial_started_at,created_at:m.created_at}});a(l)}catch(c){console.error("Error fetching trial users:",c),a([])}finally{t(!1)}};return x.useEffect(()=>{n()},[]),{trialUsers:s,loading:r,refetch:n}},ql=({trialStartedAt:s,trialDays:a,userId:r})=>{const{currentLanguage:t}=F(),[n,c]=x.useState({days:0,hours:0,minutes:0,seconds:0}),[o,i]=x.useState(!1),l=s&&new Date(s)<new Date("2010-01-01");if(x.useEffect(()=>{if(l)return;const h=()=>{const g=new Date(s),u=new Date(g.getTime()+a*24*60*60*1e3),v=new Date,p=u.getTime()-v.getTime();if(p<=0){i(!0),c({days:0,hours:0,minutes:0,seconds:0});return}const _=Math.floor(p/(1e3*60*60*24)),f=Math.floor(p%(1e3*60*60*24)/(1e3*60*60)),N=Math.floor(p%(1e3*60*60)/(1e3*60)),y=Math.floor(p%(1e3*60)/1e3);c({days:_,hours:f,minutes:N,seconds:y}),i(!1)};h();const d=setInterval(h,1e3);return()=>clearInterval(d)},[s,a,l]),l)return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs(G,{variant:"default",className:"flex items-center gap-1 justify-center",children:[e.jsx(ss,{className:"w-3 h-3"}),t==="ar"?"دائمة":"Permanent"]}),e.jsx("div",{className:"text-xs text-center font-mono text-green-600",children:t==="ar"?"لا تنتهي":"Never expires"})]});if(o)return e.jsxs(G,{variant:"destructive",className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"}),t==="ar"?"منتهية":"Expired"]});const m=()=>n.days>3?"default":n.days>1?"secondary":"destructive";return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs(G,{variant:m(),className:"flex items-center gap-1 justify-center",children:[e.jsx(je,{className:"w-3 h-3"}),t==="ar"?"متبقي":"Remaining"]}),e.jsx("div",{className:"text-xs text-center font-mono",children:t==="ar"?e.jsxs(e.Fragment,{children:[n.days>0&&e.jsxs("span",{children:[n.days," يوم "]}),e.jsxs("span",{children:[n.hours.toString().padStart(2,"0"),":"]}),e.jsxs("span",{children:[n.minutes.toString().padStart(2,"0"),":"]}),e.jsx("span",{children:n.seconds.toString().padStart(2,"0")})]}):e.jsxs(e.Fragment,{children:[n.days>0&&e.jsxs("span",{children:[n.days,"d "]}),e.jsxs("span",{children:[n.hours.toString().padStart(2,"0"),":"]}),e.jsxs("span",{children:[n.minutes.toString().padStart(2,"0"),":"]}),e.jsx("span",{children:n.seconds.toString().padStart(2,"0")})]})})]})},Gl=({userId:s,userName:a,onTrialEnded:r})=>{const{currentLanguage:t}=F(),{toast:n}=se(),[c,o]=x.useState(!1),i=async()=>{o(!0);try{const{error:l}=await T.from("profiles").update({is_trial_active:!1,updated_at:new Date().toISOString()}).eq("id",s);if(l){console.error("Error ending trial:",l),n({title:t==="ar"?"خطأ":"Error",description:t==="ar"?"فشل في إنهاء التجربة المجانية":"Failed to end free trial",variant:"destructive"});return}n({title:t==="ar"?"تم بنجاح":"Success",description:t==="ar"?"تم إنهاء التجربة المجانية":"Free trial ended successfully"}),r()}catch(l){console.error("Error ending trial:",l),n({title:t==="ar"?"خطأ":"Error",description:t==="ar"?"حدث خطأ غير متوقع":"An unexpected error occurred",variant:"destructive"})}finally{o(!1)}};return e.jsxs(Ts,{children:[e.jsx(Xs,{asChild:!0,children:e.jsxs(S,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:c,children:[c?e.jsx(K,{className:"w-4 h-4 animate-spin"}):e.jsx(Aa,{className:"w-4 h-4"}),t==="ar"?"إنهاء التجربة":"End Trial"]})}),e.jsxs(ts,{children:[e.jsxs(ns,{children:[e.jsx(ls,{children:t==="ar"?"إنهاء التجربة المجانية؟":"End Free Trial?"}),e.jsx(cs,{children:t==="ar"?`هل أنت متأكد من أنك تريد إنهاء التجربة المجانية للمستخدم "${a}"؟ لن يتمكن من استعادة التجربة المجانية مرة أخرى.`:`Are you sure you want to end the free trial for user "${a}"? They will not be able to restore the free trial again.`})]}),e.jsxs(is,{children:[e.jsx(ds,{children:t==="ar"?"إلغاء":"Cancel"}),e.jsx(os,{onClick:i,className:"bg-red-600 hover:bg-red-700",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4 animate-spin mr-2"}),t==="ar"?"جارٍ الإنهاء...":"Ending..."]}):t==="ar"?"إنهاء التجربة":"End Trial"})]})]})]})},Wl=()=>{const{currentLanguage:s}=F(),{settings:a,loading:r,updateSettings:t,refetch:n}=zl(),{trialUsers:c,loading:o,refetch:i}=Vl(),[l,m]=x.useState((a==null?void 0:a.trial_days)||7),[h,d]=x.useState(!1),g=async N=>{console.log("Trial toggle changed to:",N),d(!0);try{await t({is_trial_enabled:N})&&console.log("Trial enabled status updated successfully")}finally{d(!1)}},u=async()=>{d(!0);try{await t({trial_days:l})&&console.log("Trial days updated successfully")}finally{d(!1)}},v=()=>{n(),i()},p=()=>{i()},_=N=>new Date(N).toLocaleDateString(s==="ar"?"ar-SA":"en-US",{year:"numeric",month:"short",day:"numeric"}),f=N=>{switch(N){case"seller":return s==="ar"?"بائع":"Seller";case"property_owner":return s==="ar"?"مالك عقار":"Property Owner";case"real_estate_office":return s==="ar"?"مكتب عقارات":"Real Estate Office";default:return N}};return r?e.jsx(P,{children:e.jsx(R,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:s==="ar"?"جارٍ التحميل...":"Loading..."})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(P,{children:[e.jsx($,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(O,{children:s==="ar"?"إعدادات فترة التجربة المجانية":"Free Trial Settings"}),e.jsx(q,{children:s==="ar"?"تحكم في إعدادات فترة التجربة المجانية للمستخدمين الجدد":"Control free trial settings for new users"})]}),e.jsxs(S,{onClick:v,variant:"outline",size:"sm",disabled:h,children:[e.jsx(Ke,{className:`w-4 h-4 mr-2 ${h?"animate-spin":""}`}),s==="ar"?"تحديث":"Refresh"]})]})}),e.jsxs(R,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(j,{className:"text-base",children:s==="ar"?"تفعيل فترة التجربة المجانية":"Enable Free Trial"}),e.jsx("p",{className:"text-sm text-gray-500",children:s==="ar"?"عند التفعيل، سيحصل المستخدمون الجدد على فترة تجربة مجانية":"When enabled, new users will get a free trial period"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h&&e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx(Ce,{checked:(a==null?void 0:a.is_trial_enabled)||!1,onCheckedChange:g,disabled:h})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"trialDays",children:s==="ar"?"عدد أيام التجربة المجانية":"Trial Days Count"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{id:"trialDays",type:"number",min:"1",max:"30",value:l,onChange:N=>m(parseInt(N.target.value)||7),className:"w-32",disabled:h}),e.jsxs(S,{onClick:u,variant:"outline",disabled:h,children:[h?e.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin mr-2"}):null,s==="ar"?"تحديث":"Update"]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:s==="ar"?"العدد الحالي: "+((a==null?void 0:a.trial_days)||7)+" أيام":"Current: "+((a==null?void 0:a.trial_days)||7)+" days"})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:s==="ar"?"كيف تعمل فترة التجربة المجانية؟":"How does the free trial work?"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:s==="ar"?"• عند تسجيل البائعين ومالكي العقارات ومكاتب العقارات الجدد، يحصلون على فترة تجربة مجانية":"• When new sellers, property owners and real estate offices register, they get a free trial period"}),e.jsx("li",{children:s==="ar"?"• خلال فترة التجربة، يظهر رقمهم الشخصي في معلومات التواصل":"• During the trial, their personal contact information is displayed"}),e.jsx("li",{children:s==="ar"?"• بعد انتهاء فترة التجربة، يظهر رقم الموقع الأساسي":"• After the trial expires, the main site contact information is displayed"})]})]})]})]}),e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5 text-orange-500"}),s==="ar"?"المستخدمون في فترة التجربة المجانية":"Users in Free Trial",e.jsx(G,{variant:"secondary",children:c.length})]}),e.jsx(q,{children:s==="ar"?"قائمة بالمستخدمين الذين يستخدمون فترة التجربة المجانية حاليًا مع عداد مفصل للوقت المتبقي":"List of users currently using the free trial period with detailed countdown timer"})]}),e.jsx(R,{children:o?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-500",children:s==="ar"?"جارٍ تحميل المستخدمين...":"Loading users..."})]}):c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(je,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:s==="ar"?"لا يوجد مستخدمون في فترة التجربة المجانية حاليًا":"No users currently in free trial"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ke,{children:[e.jsx(Ee,{children:e.jsxs(ee,{children:[e.jsx(L,{children:s==="ar"?"الاسم":"Name"}),e.jsx(L,{children:s==="ar"?"البريد الإلكتروني":"Email"}),e.jsx(L,{children:s==="ar"?"الهاتف":"Phone"}),e.jsx(L,{children:s==="ar"?"النوع":"Type"}),e.jsx(L,{children:s==="ar"?"تاريخ البداية":"Start Date"}),e.jsx(L,{className:"text-center",children:s==="ar"?"الوقت المتبقي":"Time Remaining"}),e.jsx(L,{className:"text-center",children:s==="ar"?"الإجراءات":"Actions"})]})}),e.jsx(Ae,{children:c.map(N=>e.jsxs(ee,{children:[e.jsx(D,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pa,{className:"w-4 h-4 text-gray-400"}),N.full_name||(s==="ar"?"غير محدد":"Not specified")]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:N.email})]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:N.phone||(s==="ar"?"غير محدد":"Not specified")})]})}),e.jsx(D,{children:e.jsx(G,{variant:"outline",children:f(N.user_type)})}),e.jsx(D,{className:"text-sm text-gray-500",children:_(N.trial_started_at||N.created_at)}),e.jsx(D,{className:"text-center",children:e.jsx(ql,{trialStartedAt:N.trial_started_at||N.created_at,trialDays:(a==null?void 0:a.trial_days)||7,userId:N.id})}),e.jsx(D,{className:"text-center",children:e.jsx(Gl,{userId:N.id,userName:N.full_name||N.email,onTrialEnded:p})})]},N.id))})]})})})]})]})},Hl=()=>{const{currentLanguage:s}=F(),[a,r]=x.useState(!1),[t,n]=x.useState(null),[c,o]=x.useState({title_ar:"",title_en:"",title_tr:"",content_ar:"",content_en:"",content_tr:"",is_active:!1}),{terms:i,loading:l,isAdmin:m,submitting:h,user:d,addTerms:g,updateTerms:u,deleteTerms:v,toggleActiveStatus:p}=Xt(),_=()=>{o({title_ar:"",title_en:"",title_tr:"",content_ar:"",content_en:"",content_tr:"",is_active:!1}),r(!1),n(null)},f=w=>{n(w),o({title_ar:w.title_ar||"",title_en:w.title_en||"",title_tr:w.title_tr||"",content_ar:w.content_ar||"",content_en:w.content_en||"",content_tr:w.content_tr||"",is_active:w.is_active}),r(!1)},N=async w=>{w.preventDefault();let M=!1;t?M=await u(t.id,c):M=await g(c),M&&_()},y=w=>s==="ar"&&w.title_ar?w.title_ar:s==="tr"&&w.title_tr?w.title_tr:s==="en"&&w.title_en?w.title_en:w.title_en||w.title_ar||w.title_tr||"بدون عنوان";return d?m?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s==="ar"?"إدارة الأحكام والشروط":"Terms & Conditions Management"}),e.jsx("p",{className:"text-gray-600",children:s==="ar"?"إضافة وتعديل وحذف الأحكام والشروط":"Add, edit, and delete terms and conditions"})]}),e.jsxs(S,{onClick:()=>r(!0),className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),s==="ar"?"إضافة أحكام وشروط جديدة":"Add New Terms"]})]}),(a||t)&&e.jsxs(P,{children:[e.jsx($,{children:e.jsx(O,{children:t?s==="ar"?"تعديل الأحكام والشروط":"Edit Terms & Conditions":s==="ar"?"إضافة أحكام وشروط جديدة":"Add New Terms & Conditions"})}),e.jsx(R,{children:e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{children:s==="ar"?"العنوان بالعربية":"Title in Arabic"}),e.jsx(C,{value:c.title_ar,onChange:w=>o({...c,title_ar:w.target.value}),placeholder:s==="ar"?"العنوان بالعربية":"Title in Arabic"})]}),e.jsxs("div",{children:[e.jsx(j,{children:s==="ar"?"العنوان بالإنجليزية":"Title in English"}),e.jsx(C,{value:c.title_en,onChange:w=>o({...c,title_en:w.target.value}),placeholder:s==="ar"?"العنوان بالإنجليزية":"Title in English"})]}),e.jsxs("div",{children:[e.jsx(j,{children:s==="ar"?"العنوان بالتركية":"Title in Turkish"}),e.jsx(C,{value:c.title_tr,onChange:w=>o({...c,title_tr:w.target.value}),placeholder:s==="ar"?"العنوان بالتركية":"Title in Turkish"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{children:s==="ar"?"المحتوى بالعربية":"Content in Arabic"}),e.jsx(V,{value:c.content_ar,onChange:w=>o({...c,content_ar:w.target.value}),placeholder:s==="ar"?"المحتوى بالعربية":"Content in Arabic",rows:8})]}),e.jsxs("div",{children:[e.jsx(j,{children:s==="ar"?"المحتوى بالإنجليزية":"Content in English"}),e.jsx(V,{value:c.content_en,onChange:w=>o({...c,content_en:w.target.value}),placeholder:s==="ar"?"المحتوى بالإنجليزية":"Content in English",rows:8})]}),e.jsxs("div",{children:[e.jsx(j,{children:s==="ar"?"المحتوى بالتركية":"Content in Turkish"}),e.jsx(V,{value:c.content_tr,onChange:w=>o({...c,content_tr:w.target.value}),placeholder:s==="ar"?"المحتوى بالتركية":"Content in Turkish",rows:8})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"is_active",checked:c.is_active,onCheckedChange:w=>o({...c,is_active:w})}),e.jsx(j,{htmlFor:"is_active",children:s==="ar"?"تفعيل هذه الأحكام والشروط":"Activate these terms"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{type:"submit",disabled:h,children:h?s==="ar"?"جاري الحفظ...":"Saving...":t?s==="ar"?"تحديث":"Update":s==="ar"?"حفظ":"Save"}),e.jsx(S,{type:"button",variant:"outline",onClick:_,children:s==="ar"?"إلغاء":"Cancel"})]})]})})]}),e.jsxs(P,{children:[e.jsxs($,{children:[e.jsx(O,{children:s==="ar"?"قائمة الأحكام والشروط":"Terms & Conditions List"}),e.jsx(q,{children:s==="ar"?"جميع الأحكام والشروط المضافة في النظام":"All terms and conditions in the system"})]}),e.jsx(R,{children:l?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:s==="ar"?"لا توجد أحكام وشروط":"No terms and conditions found"})}):i.map(w=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:y(w)}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-2",children:[e.jsxs("span",{children:[s==="ar"?"تم الإنشاء: ":"Created: ",new Date(w.created_at).toLocaleDateString()]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.is_active?s==="ar"?"نشط":"Active":s==="ar"?"غير نشط":"Inactive"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:"sm",variant:"outline",onClick:()=>f(w),title:s==="ar"?"تعديل":"Edit",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:()=>p(w.id,w.is_active),title:w.is_active?s==="ar"?"إلغاء التفعيل":"Deactivate":s==="ar"?"تفعيل":"Activate",children:w.is_active?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(ge,{className:"w-4 h-4"})}),e.jsx(S,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>v(w.id),children:e.jsx(me,{className:"w-4 h-4"})})]})]})},w.id))})})]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600 mb-4",children:s==="ar"?"لا تملك صلاحيات الإدارة":"You do not have admin privileges"})}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-600",children:s==="ar"?"يجب تسجيل الدخول للوصول إلى الإدارة":"Please login to access admin panel"})})},Yl=()=>{const{currentLanguage:s}=F(),{user:a}=Ns(),{toast:r}=se(),[t,n]=x.useState(""),[c,o]=x.useState([]),[i,l]=x.useState(!0),[m,h]=x.useState(!1);x.useEffect(()=>{d()},[]);const d=async()=>{l(!0);try{const{data:p,error:_}=await T.from("admin_management").select("*").order("created_at",{ascending:!1});if(_)throw _;const f=(p||[]).map(N=>({id:N.id,admin_email:N.admin_email,created_at:N.created_at,is_active:N.is_active}));o(f)}catch(p){console.error("Error fetching admins:",p),r({title:s==="ar"?"خطأ":"Error",description:s==="ar"?"فشل في تحميل قائمة الأدمن":"Failed to load admin list",variant:"destructive"})}finally{l(!1)}},g=async()=>{if(!t.trim()){r({title:s==="ar"?"خطأ":"Error",description:s==="ar"?"يرجى إدخال البريد الإلكتروني":"Please enter email address",variant:"destructive"});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){r({title:s==="ar"?"خطأ":"Error",description:s==="ar"?"يرجى إدخال بريد إلكتروني صحيح":"Please enter a valid email address",variant:"destructive"});return}h(!0);try{const{error:_}=await T.from("admin_management").insert([{admin_email:t.toLowerCase().trim(),created_by:a==null?void 0:a.id}]);if(_){if(_.code==="23505")r({title:s==="ar"?"خطأ":"Error",description:s==="ar"?"هذا البريد الإلكتروني مضاف مسبقاً":"This email is already added",variant:"destructive"});else throw _;return}r({title:s==="ar"?"نجح":"Success",description:s==="ar"?"تم إضافة الأدمن بنجاح":"Admin added successfully"}),n(""),d()}catch(_){console.error("Error adding admin:",_),r({title:s==="ar"?"خطأ":"Error",description:(_==null?void 0:_.message)||(s==="ar"?"فشل في إضافة الأدمن":"Failed to add admin"),variant:"destructive"})}finally{h(!1)}},u=async(p,_)=>{if(confirm(s==="ar"?`هل أنت متأكد من حذف ${_}؟`:`Are you sure you want to delete ${_}?`))try{const{error:f}=await T.from("admin_management").delete().eq("id",p);if(f)throw f;r({title:s==="ar"?"نجح":"Success",description:s==="ar"?"تم حذف الأدمن بنجاح":"Admin deleted successfully"}),d()}catch(f){console.error("Error deleting admin:",f),r({title:s==="ar"?"خطأ":"Error",description:(f==null?void 0:f.message)||(s==="ar"?"فشل في حذف الأدمن":"Failed to delete admin"),variant:"destructive"})}},v=async(p,_)=>{try{const{error:f}=await T.from("admin_management").update({is_active:!_}).eq("id",p);if(f)throw f;r({title:s==="ar"?"نجح":"Success",description:s==="ar"?"تم تحديث حالة الأدمن":"Admin status updated"}),d()}catch(f){console.error("Error updating admin status:",f),r({title:s==="ar"?"خطأ":"Error",description:(f==null?void 0:f.message)||(s==="ar"?"فشل في تحديث الحالة":"Failed to update status"),variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s==="ar"?"إدارة الأدمن":"Admin Management"}),e.jsx("p",{className:"text-gray-600",children:s==="ar"?"إضافة وإدارة حسابات الأدمن":"Add and manage admin accounts"})]}),e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"w-5 h-5"}),s==="ar"?"إضافة أدمن جديد":"Add New Admin"]}),e.jsx(q,{children:s==="ar"?"أدخل البريد الإلكتروني لحساب مسجل مسبقاً لتعيينه كأدمن":"Enter the email address of an existing account to assign admin privileges"})]}),e.jsx(R,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(j,{htmlFor:"admin-email",children:s==="ar"?"البريد الإلكتروني":"Email Address"}),e.jsx(C,{id:"admin-email",type:"email",value:t,onChange:p=>n(p.target.value),placeholder:s==="ar"?"أدخل البريد الإلكتروني":"Enter email address",onKeyPress:p=>p.key==="Enter"&&g()})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(S,{onClick:g,disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),s==="ar"?"جارٍ الإضافة...":"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),s==="ar"?"إضافة":"Add"]})})})]})})]}),e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5"}),s==="ar"?"قائمة الأدمن":"Admin List"]}),e.jsx(q,{children:s==="ar"?"جميع حسابات الأدمن المضافة":"All added admin accounts"})]}),e.jsx(R,{children:i?e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto"})}):e.jsxs(ke,{children:[e.jsx(Ee,{children:e.jsxs(ee,{children:[e.jsx(L,{children:s==="ar"?"البريد الإلكتروني":"Email"}),e.jsx(L,{children:s==="ar"?"تاريخ الإضافة":"Added Date"}),e.jsx(L,{children:s==="ar"?"الحالة":"Status"}),e.jsx(L,{children:s==="ar"?"الإجراءات":"Actions"})]})}),e.jsxs(Ae,{children:[c.map(p=>e.jsxs(ee,{children:[e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400"}),p.admin_email]})}),e.jsx(D,{children:new Date(p.created_at).toLocaleDateString(s==="ar"?"ar-SA":"en-US")}),e.jsx(D,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.is_active?s==="ar"?"نشط":"Active":s==="ar"?"معطل":"Inactive"})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:"sm",variant:"outline",onClick:()=>v(p.id,p.is_active),children:p.is_active?s==="ar"?"تعطيل":"Deactivate":s==="ar"?"تفعيل":"Activate"}),e.jsx(S,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>u(p.id,p.admin_email),children:e.jsx(me,{className:"w-4 h-4"})})]})})]},p.id)),c.length===0&&e.jsx(ee,{children:e.jsx(D,{colSpan:4,className:"text-center py-8 text-gray-500",children:s==="ar"?"لا توجد حسابات أدمن مضافة":"No admin accounts added"})})]})]})})]})]})},Kl=()=>{const{currentLanguage:s}=F(),{toast:a}=se(),[r,t]=x.useState({}),[n,c]=x.useState(!0),[o,i]=x.useState(!1),l=async()=>{try{const{data:h,error:d}=await T.from("suspension_settings").select("*").order("setting_key");if(d)throw d;const g={};h==null||h.forEach(u=>{g[u.setting_key]=u}),t(g)}catch(h){console.error("Error fetching suspension settings:",h)}finally{c(!1)}},m=async(h,d)=>{i(!0);try{const{error:g}=await T.from("suspension_settings").update({...d,updated_at:new Date().toISOString()}).eq("setting_key",h);if(g)throw g;return t(u=>({...u,[h]:{...u[h],...d}})),a({title:s==="ar"?"نجح":"Success",description:s==="ar"?"تم تحديث الإعدادات":"Settings updated successfully"}),{success:!0}}catch(g){return a({title:s==="ar"?"خطأ":"Error",description:g.message||(s==="ar"?"فشل في تحديث الإعدادات":"Failed to update settings"),variant:"destructive"}),{success:!1,error:g}}finally{i(!1)}};return x.useEffect(()=>{l()},[]),{settings:r,loading:n,saving:o,updateSetting:m,fetchSettings:l}},Xl=()=>{const{currentLanguage:s}=F(),{settings:a,loading:r,saving:t,updateSetting:n}=Kl(),o={ar:{title:"إعدادات رسائل الحظر المحسنة",description:"تخصيص الرسائل التي تظهر للمستخدمين المحظورين مؤقتاً أو دائماً",permanent:"الحظر الدائم",temporary:"الحظر المؤقت",messageTitle:"عنوان الرسالة",messageContent:"محتوى الرسالة",inArabic:"بالعربية",inEnglish:"بالإنجليزية",inTurkish:"بالتركية",save:"حفظ التغييرات",saving:"جارٍ الحفظ...",loading:"جاري تحميل الإعدادات..."},en:{title:"Enhanced Suspension Message Settings",description:"Customize messages shown to temporarily or permanently suspended users",permanent:"Permanent Suspension",temporary:"Temporary Suspension",messageTitle:"Message Title",messageContent:"Message Content",inArabic:"In Arabic",inEnglish:"In English",inTurkish:"In Turkish",save:"Save Changes",saving:"Saving...",loading:"Loading settings..."},tr:{title:"Gelişmiş Askıya Alma Mesajı Ayarları",description:"Geçici veya kalıcı olarak askıya alınmış kullanıcılara gösterilen mesajları özelleştirin",permanent:"Kalıcı Askıya Alma",temporary:"Geçici Askıya Alma",messageTitle:"Mesaj Başlığı",messageContent:"Mesaj İçeriği",inArabic:"Arapça",inEnglish:"İngilizce",inTurkish:"Türkçe",save:"Değişiklikleri Kaydet",saving:"Kaydediliyor...",loading:"Ayarlar yükleniyor..."}}[s];if(r)return e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(K,{className:"w-6 h-6 animate-spin mr-2"}),e.jsx("span",{children:o.loading})]});const i=async m=>{await n(m,a[m])},l=(m,h,d)=>{({...a,[m]:{...a[m],[h]:0}})};return e.jsxs(P,{children:[e.jsxs($,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5"}),o.title]}),e.jsx(q,{children:o.description})]}),e.jsx(R,{children:e.jsxs(Te,{defaultValue:"permanent_suspension",className:"space-y-6",children:[e.jsxs(Fe,{className:"grid w-full grid-cols-2",children:[e.jsxs(ae,{value:"permanent_suspension",className:"flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4"}),o.permanent]}),e.jsxs(ae,{value:"temporary_suspension",className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),o.temporary]})]}),e.jsx(re,{value:"permanent_suspension",className:"space-y-6",children:a.permanent_suspension&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:o.messageTitle}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"perm-title-ar",children:o.inArabic}),e.jsx(C,{id:"perm-title-ar",value:a.permanent_suspension.title_ar||"",onChange:m=>l("permanent_suspension","title_ar",m.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"perm-title-en",children:o.inEnglish}),e.jsx(C,{id:"perm-title-en",value:a.permanent_suspension.title_en||"",onChange:m=>l("permanent_suspension","title_en",m.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"perm-title-tr",children:o.inTurkish}),e.jsx(C,{id:"perm-title-tr",value:a.permanent_suspension.title_tr||"",onChange:m=>l("permanent_suspension","title_tr",m.target.value)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:o.messageContent}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"perm-message-ar",children:o.inArabic}),e.jsx(V,{id:"perm-message-ar",value:a.permanent_suspension.message_ar||"",onChange:m=>l("permanent_suspension","message_ar",m.target.value),className:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"perm-message-en",children:o.inEnglish}),e.jsx(V,{id:"perm-message-en",value:a.permanent_suspension.message_en||"",onChange:m=>l("permanent_suspension","message_en",m.target.value),className:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"perm-message-tr",children:o.inTurkish}),e.jsx(V,{id:"perm-message-tr",value:a.permanent_suspension.message_tr||"",onChange:m=>l("permanent_suspension","message_tr",m.target.value),className:"min-h-[120px]"})]})]})]}),e.jsx(S,{onClick:()=>i("permanent_suspension"),disabled:t,children:t?o.saving:o.save})]})}),e.jsx(re,{value:"temporary_suspension",className:"space-y-6",children:a.temporary_suspension&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:o.messageTitle}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"temp-title-ar",children:o.inArabic}),e.jsx(C,{id:"temp-title-ar",value:a.temporary_suspension.title_ar||"",onChange:m=>l("temporary_suspension","title_ar",m.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"temp-title-en",children:o.inEnglish}),e.jsx(C,{id:"temp-title-en",value:a.temporary_suspension.title_en||"",onChange:m=>l("temporary_suspension","title_en",m.target.value)})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"temp-title-tr",children:o.inTurkish}),e.jsx(C,{id:"temp-title-tr",value:a.temporary_suspension.title_tr||"",onChange:m=>l("temporary_suspension","title_tr",m.target.value)})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:o.messageContent}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"temp-message-ar",children:o.inArabic}),e.jsx(V,{id:"temp-message-ar",value:a.temporary_suspension.message_ar||"",onChange:m=>l("temporary_suspension","message_ar",m.target.value),className:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"temp-message-en",children:o.inEnglish}),e.jsx(V,{id:"temp-message-en",value:a.temporary_suspension.message_en||"",onChange:m=>l("temporary_suspension","message_en",m.target.value),className:"min-h-[120px]"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"temp-message-tr",children:o.inTurkish}),e.jsx(V,{id:"temp-message-tr",value:a.temporary_suspension.message_tr||"",onChange:m=>l("temporary_suspension","message_tr",m.target.value),className:"min-h-[120px]"})]})]})]}),e.jsx(S,{onClick:()=>i("temporary_suspension"),disabled:t,children:t?o.saving:o.save})]})})]})})]})},Hc=()=>{const{currentLanguage:s}=F(),{profile:a,loading:r}=ga(),{isAdmin:t,isLoading:n}=En(),[c,o]=x.useState("statistics"),{pendingUsers:i,loading:l,toggleApproval:m,rejectUser:h,approveAllPending:d}=ya();if(r||n)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-gray-900"})});if(!(a!=null&&a.is_admin))return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-red-500 font-bold text-2xl",children:s==="ar"?"غير مصرح لك بالدخول إلى هذه الصفحة":s==="tr"?"Bu sayfaya erişim yetkiniz yok":"You are not authorized to access this page"})});const u=[{id:"statistics",label:s==="ar"?"الإحصائيات":s==="tr"?"İstatistikler":"Statistics",icon:da,component:e.jsx(Tn,{})},{id:"reports",label:s==="ar"?"التقارير":s==="tr"?"Raporlar":"Reports",icon:Ea,component:e.jsx(jt,{})},{id:"report-types",label:s==="ar"?"أنواع التقارير":s==="tr"?"Rapor Türleri":"Report Types",icon:Jt,component:e.jsx(Ei,{})},{id:"properties",label:s==="ar"?"العقارات":s==="tr"?"Emlaklar":"Properties",icon:Me,component:e.jsx(Bi,{})},{id:"property-activities",label:s==="ar"?"أنشطة العقارات":s==="tr"?"Emlak Etkinlikleri":"Property Activities",icon:ka,component:e.jsx(vt,{})},{id:"property-limits",label:s==="ar"?"حدود العقارات":s==="tr"?"Emlak Limitleri":"Property Limits",icon:an,component:e.jsx(zi,{})},{id:"property-types-layouts",label:s==="ar"?"أنواع العقارات وتقسيماتها":s==="tr"?"Emlak Türleri ve Düzenleri":"Property Types & Layouts",icon:qs,component:e.jsx(Hi,{})},{id:"users",label:s==="ar"?"المستخدمون":s==="tr"?"Kullanıcılar":"Users",icon:Qe,component:e.jsx(Zi,{})},{id:"cities-districts",label:s==="ar"?"المدن والأحياء":s==="tr"?"Şehirler ve İlçeler":"Cities & Districts",icon:as,component:e.jsx(nl,{})},{id:"reviews",label:s==="ar"?"المراجعات":s==="tr"?"Değerlendirmeler":"Reviews",icon:fs,component:e.jsx(ft,{})},{id:"languages",label:s==="ar"?"اللغات":s==="tr"?"Diller":"Languages",icon:Da,component:e.jsx(il,{})},{id:"site-settings",label:s==="ar"?"إعدادات الموقع":s==="tr"?"Site Ayarları":"Site Settings",icon:St,component:e.jsx(Rl,{})},{id:"announcement-bar",label:s==="ar"?"شريط الإعلانات":s==="tr"?"Duyuru Çubuğu":"Announcement Bar",icon:gn,component:e.jsx(Ll,{})},{id:"about-page",label:s==="ar"?"صفحة من نحن":s==="tr"?"Hakkımızda Sayfası":"About Us Page",icon:un,component:e.jsx(Il,{})},{id:"contact-settings",label:s==="ar"?"إعدادات الاتصال":s==="tr"?"İletişim Ayarları":"Contact Settings",icon:Re,component:e.jsx(Bl,{})},{id:"contact-subjects",label:s==="ar"?"مواضيع الاتصال":s==="tr"?"İletişim Konuları":"Contact Subjects",icon:Oe,component:e.jsx(Ol,{})},{id:"trial-settings",label:s==="ar"?"إعدادات التجربة":s==="tr"?"Deneme Ayarları":"Trial Settings",icon:je,component:e.jsx(Wl,{})},{id:"terms",label:s==="ar"?"الشروط والأحكام":s==="tr"?"Şartlar ve Koşullar":"Terms & Conditions",icon:ln,component:e.jsx(Hl,{})},{id:"enhanced-suspension-settings",label:s==="ar"?"إعدادات الحظر المحسنة":s==="tr"?"Gelişmiş Askıya Alma Ayarları":"Enhanced Suspension Settings",icon:Es,component:e.jsx(Xl,{})},{id:"admin-management",label:s==="ar"?"إدارة المدراء":s==="tr"?"Yönetici Yönetimi":"Admin Management",icon:vn,component:e.jsx(Yl,{})},{id:"pending-approvals",label:s==="ar"?"الموافقات المعلقة":s==="tr"?"Bekleyen Onaylar":"Pending Approvals",icon:en,component:e.jsx(Na,{pendingUsers:i,onApprove:m,onReject:h,onApproveAll:d,loading:l})}];return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",dir:s==="ar"?"rtl":"ltr",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsx(P,{className:"mb-8",children:e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(O,{className:"text-2xl font-bold",children:s==="ar"?"لوحة التحكم الإدارية":s==="tr"?"Yönetim Paneli":"Admin Dashboard"}),e.jsx(q,{children:s==="ar"?"إدارة شاملة لجميع جوانب النظام":s==="tr"?"Sistemin tüm yönlerinin kapsamlı yönetimi":"Comprehensive management of all system aspects"})]}),e.jsx(G,{variant:"secondary",className:"text-sm",children:s==="ar"?"مدير":s==="tr"?"Yönetici":"Admin"})]})})}),e.jsxs(Te,{value:c,onValueChange:o,className:"space-y-6",children:[e.jsx(Fe,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3 h-auto p-2",children:u.map(v=>e.jsxs(ae,{value:v.id,className:"flex flex-col items-center justify-center h-20 p-3 border rounded-lg transition-all hover:shadow-md data-[state=active]:bg-primary data-[state=active]:text-primary-foreground text-center",children:[e.jsx(v.icon,{className:"w-5 h-5 mb-1"}),e.jsx("span",{className:"text-xs leading-tight",children:v.label})]},v.id))}),u.map(v=>e.jsx(re,{value:v.id,className:"space-y-6",children:v.component},v.id))]})]})})};export{Hc as default};
