import{K as Z,r as v,a as w,L as Q,j as e,u as oe,s as M,G as q,I as T,M as ce,D as X,aj as ue,ab as me,V as ge,ae as he,H as O}from"./index-Ba-_IHuQ.js";import{C as _,a as S,c as A,b as N,d as $}from"./card-DocFJD5R.js";import{P as xe,a as pe,C as Y,I as be,T as ve,b as fe,u as ee}from"./ImageUpload-D0MBGldL.js";import{T as ye,a as je,b as G,c as K}from"./tabs-3zOAl0ep.js";import{a as D,g as _e,b as Ne,u as we,d as ke}from"./cityUtils-DwiwOoBI.js";import{L as b}from"./label-3yzes-iA.js";import{I as C}from"./input-BB7eCBwl.js";import{S as P,a as F,b as R,c as I,d as y}from"./select-B0LLBn5t.js";import{C as Ce}from"./checkbox-DzOBksiD.js";import{S as Te}from"./switch-CCSj0eWM.js";import{B as z}from"./badge-DRGEcZbO.js";import{T as W}from"./textarea-D6kC44b6.js";import{B as J}from"./ban-DH3c8ygT.js";import{B as Se,a as Ae,S as Ee}from"./square-CxCi9vpu.js";import{E as re,a as Le}from"./eye-off-QLdkjG-i.js";import{S as Me}from"./square-pen-XvOR2TU8.js";import{C as ae}from"./circle-check-big-D_hgqrRM.js";import{T as ze}from"./trash-2-D9yzkGdt.js";import{C as te}from"./clock-Fq3ibpDw.js";import{C as se}from"./circle-alert-DRhy0Vr1.js";import{P as Pe}from"./plus-BhvacCnt.js";import"./usePropertyLayouts-0iGFrxcO.js";import"./image-BgofXdSF.js";import"./useQuery-D_0ZzEPi.js";const Fe=r=>{const{districts:t}=Z(),[s,a]=v.useState({title_ar:"",title_en:"",title_tr:"",description_ar:"",description_en:"",description_tr:"",price:"",currency:"EUR",listing_type:"rent",deposit:"0",deposit_currency:"EUR",commission:"0",commission_currency:"EUR",city:"",district:"",property_type:"",property_layout_id:"",bedrooms:"",bathrooms:"",area:"",status:"available",images:[],cover_image:"",is_featured:!1,is_student_housing:!1,student_housing_gender:"unspecified"}),[o,d]=v.useState(t);return v.useEffect(()=>{var u,c,m,l,n,i;if(r){console.log("Initializing form with editing property:",r);const p=!!r.is_student_housing,x=r.student_housing_gender||"unspecified";a({title_ar:r.title_ar||"",title_en:r.title_en||"",title_tr:r.title_tr||"",description_ar:r.description_ar||"",description_en:r.description_en||"",description_tr:r.description_tr||"",price:((u=r.price)==null?void 0:u.toString())||"",currency:r.currency||"EUR",listing_type:r.listing_type||"rent",deposit:((c=r.deposit)==null?void 0:c.toString())||"0",deposit_currency:r.deposit_currency||r.currency||"EUR",commission:((m=r.commission)==null?void 0:m.toString())||"0",commission_currency:r.commission_currency||r.currency||"EUR",city:r.city||"",district:r.district||"",property_type:r.property_type_id||r.property_type||"",property_layout_id:r.property_layout_id||"",bedrooms:((l=r.bedrooms)==null?void 0:l.toString())||"",bathrooms:((n=r.bathrooms)==null?void 0:n.toString())||"",area:((i=r.area)==null?void 0:i.toString())||"",status:r.status||"available",images:Array.isArray(r.images)?r.images:[],cover_image:r.cover_image||"",is_featured:!!r.is_featured,is_student_housing:p,student_housing_gender:x}),console.log("Form initialized with student housing data:",{is_student_housing:p,student_housing_gender:x})}},[r]),v.useEffect(()=>{if(s.city){const u=D(s.city,t);d(u)}},[s.city,t]),{formData:s,setFormData:a,availableDistricts:o,handleCityChange:u=>{a(m=>({...m,city:u,district:""}));const c=D(u,t);d(c)},handlePropertyTypeChange:u=>{a(c=>({...c,property_type:u,property_layout_id:""}))}}},Re=({formData:r,setFormData:t,handlePropertyTypeChange:s})=>{const{t:a,currentLanguage:o}=w(),{cities:d,districts:g}=Z(),{profile:h}=Q(),u=r.city?D(r.city,g):[],c=(n,i)=>{t(p=>({...p,[n]:i}))},m=n=>{t(i=>({...i,is_student_housing:n,student_housing_gender:"unspecified"}))},l=(h==null?void 0:h.user_type)==="partner_and_site_owner";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-4 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:a("basicPropertyInformation")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(xe,{value:r.property_type,onChange:s,required:!0}),e.jsx(pe,{value:r.property_layout_id,onChange:n=>c("property_layout_id",n),propertyTypeId:r.property_type})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"city",children:a("cityRequired")}),e.jsxs(P,{value:r.city,onValueChange:n=>c("city",n),required:!0,children:[e.jsx(F,{id:"city",children:e.jsx(R,{placeholder:a("selectCity")})}),e.jsx(I,{children:d.map(n=>e.jsx(y,{value:n.id,children:_e(n,o)},n.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"district",children:a("district")}),e.jsxs(P,{value:r.district,onValueChange:n=>c("district",n),disabled:!r.city,children:[e.jsx(F,{id:"district",children:e.jsx(R,{placeholder:r.city?a("selectDistrict"):a("selectCityFirst")})}),e.jsx(I,{children:u.map(n=>e.jsx(y,{value:n.id,children:Ne(n,o)},n.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"bedrooms",children:a("bedrooms")}),e.jsx(C,{id:"bedrooms",type:"number",min:"0",value:r.bedrooms,onChange:n=>c("bedrooms",n.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"bathrooms",children:a("bathrooms")}),e.jsx(C,{id:"bathrooms",type:"number",min:"0",value:r.bathrooms,onChange:n=>c("bathrooms",n.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"area",children:a("areaSqM")}),e.jsx(C,{id:"area",type:"number",min:"0",value:r.area,onChange:n=>c("area",n.target.value),placeholder:"0"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:a("pricingInformation")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"listing_type",children:a("listingTypeRequired")}),e.jsxs(P,{value:r.listing_type,onValueChange:n=>c("listing_type",n),required:!0,children:[e.jsx(F,{id:"listing_type",children:e.jsx(R,{})}),e.jsxs(I,{children:[e.jsx(y,{value:"rent",children:a("forRent")}),e.jsx(y,{value:"sale",children:a("forSale")})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"status",children:a("status")}),e.jsxs(P,{value:r.status,onValueChange:n=>c("status",n),children:[e.jsx(F,{id:"status",children:e.jsx(R,{})}),e.jsxs(I,{children:[e.jsx(y,{value:"available",children:a("available")}),e.jsx(y,{value:"pending",children:a("hidden")}),e.jsx(y,{value:"rented",children:a("rented")}),e.jsx(y,{value:"sold",children:a("sold")})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"price",children:a("priceRequired")}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(C,{id:"price",type:"number",min:"0",step:"0.01",value:r.price,onChange:n=>c("price",n.target.value),placeholder:"0.00",className:"col-span-2",required:!0}),e.jsx(Y,{value:r.currency,onValueChange:n=>c("currency",n)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"deposit",children:a("deposit")}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(C,{id:"deposit",type:"number",min:"0",step:"0.01",value:r.deposit,onChange:n=>c("deposit",n.target.value),placeholder:"0.00",className:"col-span-2"}),e.jsx(Y,{value:r.deposit_currency,onValueChange:n=>c("deposit_currency",n)})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"commission",children:a("commission")}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(C,{id:"commission",type:"number",min:"0",step:"0.01",value:r.commission,onChange:n=>c("commission",n.target.value),placeholder:"0.00",className:"col-span-2"}),e.jsx(Y,{value:r.commission_currency,onValueChange:n=>c("commission_currency",n)})]})]})})]}),e.jsxs("div",{className:"border rounded-lg p-4 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:a("studentHousingOptions")}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse mb-2",children:[e.jsx(Te,{id:"is_student_housing",checked:r.is_student_housing,onCheckedChange:m}),e.jsx(b,{htmlFor:"is_student_housing",className:"cursor-pointer",children:a("studentHousing")}),r.is_student_housing&&e.jsx(z,{variant:"secondary",className:"ml-2",children:a("studentHousing")})]}),r.is_student_housing&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"student_housing_gender",children:a("studentHousingType")}),e.jsxs(P,{value:r.student_housing_gender,onValueChange:n=>c("student_housing_gender",n),children:[e.jsx(F,{id:"student_housing_gender",children:e.jsx(R,{})}),e.jsxs(I,{children:[e.jsx(y,{value:"male",children:a("maleOnly")}),e.jsx(y,{value:"female",children:a("femaleOnly")}),e.jsx(y,{value:"mixed",children:a("mixed")}),e.jsx(y,{value:"unspecified",children:a("unspecified")})]})]})]})]}),l&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ce,{id:"is_featured",checked:r.is_featured,onCheckedChange:n=>c("is_featured",!!n)}),e.jsx(b,{htmlFor:"is_featured",className:"cursor-pointer",children:a("featuredProperty")})]})]})},Ie=({formData:r,setFormData:t})=>{const{t:s}=w();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-right",children:s("arabic")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"title_ar",children:s("titleInArabicRequired")}),e.jsx(C,{id:"title_ar",value:r.title_ar,onChange:a=>t(o=>({...o,title_ar:a.target.value})),placeholder:"أدخل عنوان العقار بالعربية",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"description_ar",children:s("descriptionInArabic")}),e.jsx(W,{id:"description_ar",value:r.description_ar,onChange:a=>t(o=>({...o,description_ar:a.target.value})),placeholder:"أدخل وصف العقار بالعربية...",rows:3,dir:"rtl"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s("english")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"title_en",children:s("titleInEnglishRequired")}),e.jsx(C,{id:"title_en",value:r.title_en,onChange:a=>t(o=>({...o,title_en:a.target.value})),placeholder:"Enter property title in English"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"description_en",children:s("descriptionInEnglish")}),e.jsx(W,{id:"description_en",value:r.description_en,onChange:a=>t(o=>({...o,description_en:a.target.value})),placeholder:"Enter property description in English...",rows:3})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:s("turkish")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"title_tr",children:s("titleInTurkishRequired")}),e.jsx(C,{id:"title_tr",value:r.title_tr,onChange:a=>t(o=>({...o,title_tr:a.target.value})),placeholder:"Türkçe mülk başlığını girin"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"description_tr",children:s("descriptionInTurkish")}),e.jsx(W,{id:"description_tr",value:r.description_tr,onChange:a=>t(o=>({...o,description_tr:a.target.value})),placeholder:"Türkçe mülk açıklamasını girin...",rows:3})]})]})]})]})},Be=({formData:r,setFormData:t})=>e.jsx(be,{onCoverImageChange:s=>t(a=>({...a,cover_image:s})),onImagesChange:s=>t(a=>({...a,images:s})),coverImage:r.cover_image,images:r.images}),$e=({onCancel:r,onSubmit:t,loading:s,editingProperty:a})=>{const{t:o}=w();return e.jsxs("div",{className:"flex justify-end items-center gap-3 mt-8",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 border rounded hover:bg-gray-100 text-gray-700 bg-white",disabled:s,children:o("cancel")}),e.jsx("button",{type:"submit",onClick:t,className:"px-4 py-2 rounded bg-primary text-white font-semibold hover:bg-primary/90 transition",disabled:s,children:o(a?"editProperty":"addProperty")})]})},qe=()=>{const{user:r}=oe(),[t,s]=v.useState(10),[a,o]=v.useState(0),[d,g]=v.useState(!0),[h,u]=v.useState(!0),c=async()=>{if(r)try{u(!0);const{data:m,error:l}=await M.rpc("get_user_property_limit",{user_id_param:r.id});if(l)throw l;s(m||10);const{data:n,error:i}=await M.rpc("get_user_property_count",{user_id_param:r.id});if(i)throw i;o(n||0);const{data:p,error:x}=await M.rpc("can_user_add_property",{user_id_param:r.id});if(x)throw x;g(p||!1)}catch(m){console.error("Error fetching user property limit:",m)}finally{u(!1)}};return v.useEffect(()=>{c()},[r]),{propertyLimit:t,currentCount:a,canAdd:d,loading:h,refetch:c}},Ue=({onCancel:r,onSuccess:t,editingProperty:s})=>{const{t:a,currentLanguage:o}=w(),{toast:d}=q(),{profile:g}=Q(),{propertyLimit:h,currentCount:u,canAdd:c,loading:m}=qe(),[l,n]=v.useState(!1),{formData:i,setFormData:p,availableDistricts:x,handleCityChange:k,handlePropertyTypeChange:E}=Fe(s);if(g!=null&&g.is_suspended)return e.jsxs(_,{className:"w-full max-w-6xl mx-auto",children:[e.jsxs(S,{className:"text-center",children:[e.jsx(J,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx(A,{className:"text-red-600",children:a("accountSuspended")})]}),e.jsx(N,{className:"text-center space-y-4",children:e.jsx("p",{className:"text-gray-600",children:a("accountSuspendedPropertyMessage")})})]});if(!s&&!m&&!c)return e.jsxs("div",{className:"min-h-[60vh] flex items-center justify-center py-8 px-4 relative overflow-hidden transition-all duration-500",style:{background:`
            linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 3%, transparent),
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 2%, transparent)
            ),
            linear-gradient(to bottom right,
              #fafbff 0%,
              #f1f5f9 50%,
              #e2e8f0 100%
            )
          `,...typeof window<"u"&&document.documentElement.classList.contains("dark")&&{background:`
              linear-gradient(135deg,
                color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 8%, transparent),
                color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 5%, transparent)
              ),
              linear-gradient(to bottom right,
                #0f172a 0%,
                #1e293b 50%,
                #334155 100%
              )
            `}},children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-5 dark:opacity-10",style:{background:`linear-gradient(135deg,
                color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 8%, transparent) 0%,
                transparent 50%,
                color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 5%, transparent) 100%
              )`}}),e.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 rounded-full blur-3xl animate-pulse delay-1000 opacity-3 dark:opacity-5",style:{background:`linear-gradient(135deg,
                color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 6%, transparent),
                color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 4%, transparent)
              )`}}),e.jsx("div",{className:"absolute bottom-20 right-20 w-48 h-48 rounded-full blur-2xl animate-pulse delay-500 opacity-4 dark:opacity-6",style:{background:`linear-gradient(135deg,
                color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 5%, transparent),
                color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 3%, transparent)
              )`}}),e.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 rounded-full blur-2xl animate-pulse delay-200 opacity-5 dark:opacity-8",style:{background:`linear-gradient(135deg,
                color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 5%, transparent),
                color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 4%, transparent)
              )`}}),e.jsx("div",{className:"absolute bottom-32 left-10 w-40 h-40 rounded-full blur-3xl animate-pulse delay-800 opacity-4 dark:opacity-6",style:{background:`linear-gradient(135deg,
                color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 4%, transparent),
                color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 3%, transparent)
              )`}}),e.jsx("div",{className:"absolute top-1/4 left-1/4 opacity-10 dark:opacity-20 animate-bounce delay-1000",children:e.jsx("div",{className:"w-8 h-8 text-orange-400",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})})})}),e.jsx("div",{className:"absolute top-1/3 right-1/4 opacity-8 dark:opacity-15 animate-pulse delay-2000",children:e.jsx("div",{className:"w-6 h-6 text-pink-400",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})})})}),e.jsx("div",{className:"absolute bottom-1/3 left-1/3 opacity-12 dark:opacity-25 animate-bounce delay-500",children:e.jsx("div",{className:"w-7 h-7 text-orange-500",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})})})}),e.jsx("div",{className:"absolute top-2/3 right-1/3 opacity-9 dark:opacity-18 animate-pulse delay-1500",children:e.jsx("div",{className:"w-5 h-5 text-pink-500",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})})})}),e.jsx("div",{className:"absolute bottom-1/4 right-1/5 opacity-11 dark:opacity-22 animate-bounce delay-3000",children:e.jsx("div",{className:"w-6 h-6 text-orange-300",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})})})})]}),e.jsx("div",{className:"relative z-10 w-full max-w-md",children:e.jsxs(_,{className:"backdrop-blur-xl bg-white/90 dark:bg-slate-800/90 border border-white/30 dark:border-slate-700/50 shadow-xl rounded-3xl transition-all duration-300 hover:shadow-2xl",children:[e.jsxs(S,{className:"text-center pt-6 pb-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-xl ring-4 ring-orange-500/10 dark:ring-orange-400/20",style:{background:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)"},children:e.jsx(ve,{className:"w-10 h-10 text-white"})}),e.jsx(A,{className:"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent dark:from-gray-100 dark:to-gray-400",children:o==="ar"?"تم الوصول للحد الأقصى":o==="tr"?"Limit Ulaşıldı":"Limit Reached"}),e.jsx($,{className:"text-lg text-slate-600 dark:text-slate-300 mt-2 leading-relaxed",children:o==="ar"?`لقد وصلت للحد الأقصى من العقارات المسموح بها (${u}/${h}). لا يمكنك إضافة المزيد من العقارات.`:o==="tr"?`İzin verilen mülk sınırına ulaştınız (${u}/${h}). Daha fazla mülk ekleyemezsiniz.`:`You have reached your property limit (${u}/${h}). You cannot add more properties.`})]}),e.jsx(N,{className:"px-8 pb-12",children:e.jsx(T,{onClick:r,className:"w-full h-12 rounded-xl text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] hover:brightness-95",style:{background:"linear-gradient(135deg, var(--brand-gradient-from-color, #ec489a) 0%, var(--brand-gradient-to-color, #f43f5e) 100%)"},children:o==="ar"?"العودة":o==="tr"?"Geri Dön":"Go Back"})})]})})]});const U={is_featured:!1,...i},H=async V=>{V.preventDefault(),n(!0);try{if(g!=null&&g.is_suspended){d({title:a("error"),description:a("accountSuspendedPropertyMessage"),variant:"destructive"}),n(!1);return}if(!s&&!c){d({title:a("error"),description:o==="ar"?"لقد وصلت للحد الأقصى من العقارات المسموح بها":"You have reached your property limit",variant:"destructive"}),n(!1);return}if(!i.title_ar.trim()&&!i.title_en.trim()&&!i.title_tr.trim()){d({title:a("error"),description:a("titleRequiredInOneLanguage"),variant:"destructive"}),n(!1);return}if(!i.price||parseFloat(i.price)<=0){d({title:a("error"),description:a("priceRequiredAndPositive"),variant:"destructive"}),n(!1);return}if(!i.city||!i.property_type){d({title:a("error"),description:a("cityAndTypeRequired"),variant:"destructive"}),n(!1);return}if(!i.cover_image){d({title:a("error"),description:o==="ar"?"صورة الغلاف مطلوبة":o==="tr"?"Kapak fotoğrafı gereklidir":"Cover image is required",variant:"destructive"}),n(!1);return}if(!i.bedrooms||parseInt(i.bedrooms)<=0){d({title:a("error"),description:o==="ar"?"عدد غرف النوم مطلوب":o==="tr"?"Yatak odası sayısı zorunludur":"Bedrooms count is required",variant:"destructive"}),n(!1);return}if(!i.bathrooms||parseInt(i.bathrooms)<=0){d({title:a("error"),description:o==="ar"?"عدد الحمامات مطلوب":o==="tr"?"Banyo sayısı zorunludur":"Bathrooms count is required",variant:"destructive"}),n(!1);return}if(!i.area||parseFloat(i.area)<=0){d({title:a("error"),description:o==="ar"?"المساحة مطلوبة":o==="tr"?"Alan zorunludur":"Area is required",variant:"destructive"}),n(!1);return}const j={title:i.title_ar.trim()||i.title_en.trim()||i.title_tr.trim(),title_ar:i.title_ar.trim()||null,title_en:i.title_en.trim()||null,title_tr:i.title_tr.trim()||null,description:i.description_ar.trim()||i.description_en.trim()||i.description_tr.trim()||null,description_ar:i.description_ar.trim()||null,description_en:i.description_en.trim()||null,description_tr:i.description_tr.trim()||null,price:parseFloat(i.price),currency:i.currency,listing_type:i.listing_type,deposit:parseFloat(i.deposit)||0,deposit_currency:i.deposit_currency,commission:parseFloat(i.commission)||0,commission_currency:i.commission_currency,city:i.city,district:i.district.trim()||null,property_type_id:i.property_type,property_layout_id:i.property_layout_id||null,bedrooms:i.bedrooms?parseInt(i.bedrooms):null,bathrooms:i.bathrooms?parseInt(i.bathrooms):null,area:i.area?parseFloat(i.area):null,status:i.status,images:i.images,cover_image:i.cover_image,is_student_housing:!!i.is_student_housing,student_housing_gender:i.is_student_housing&&i.student_housing_gender||"unspecified"};console.log("Saving property with complete data:",{is_student_housing:j.is_student_housing,student_housing_gender:j.student_housing_gender,property_type_id:j.property_type_id,city:j.city,district:j.district});let L;if(s?(console.log("Updating existing property:",s.id),L=await M.from("properties").update(j).eq("id",s.id).select()):(console.log("Creating new property with user ID:",g==null?void 0:g.id),L=await M.from("properties").insert([{...j,created_by:g==null?void 0:g.id}]).select()),L.error)throw console.error("Supabase error:",L.error),L.error;console.log("Property saved successfully:",L.data),d({title:a("success"),description:a(s?"propertyUpdatedSuccess":"propertyAddedSuccess")}),t()}catch(j){console.error("Error saving property:",j),d({title:a("error"),description:a("failedToSaveProperty"),variant:"destructive"})}finally{n(!1)}};return e.jsxs(_,{className:"w-full max-w-6xl mx-auto",children:[e.jsxs(S,{children:[e.jsx(A,{children:a(s?"editProperty":"addNewProperty")}),e.jsxs($,{children:[a("propertyDetails"),!s&&!m&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx(z,{variant:"outline",className:"mr-2",children:o==="ar"?`العقارات: ${u}/${h}`:`Properties: ${u}/${h}`}),h-u<=2&&e.jsx("span",{className:"text-orange-600",children:o==="ar"?`متبقي ${h-u} عقارات فقط`:`Only ${h-u} properties left`})]})]})]}),e.jsxs(N,{children:[e.jsxs(ye,{defaultValue:"basic",className:"space-y-4",children:[e.jsxs(je,{className:"grid w-full grid-cols-3",children:[e.jsx(G,{value:"basic",children:a("basicInfo")}),e.jsx(G,{value:"multilang",children:a("multipleLanguages")}),e.jsx(G,{value:"media",children:a("mediaSeller")})]}),e.jsx(K,{value:"basic",className:"space-y-4",children:e.jsx(Re,{formData:U,setFormData:p,handlePropertyTypeChange:E})}),e.jsx(K,{value:"multilang",className:"space-y-4",children:e.jsx(Ie,{formData:i,setFormData:p})}),e.jsx(K,{value:"media",className:"space-y-4",children:e.jsx(Be,{formData:i,setFormData:p})})]}),e.jsx($e,{onCancel:r,onSubmit:H,loading:l,editingProperty:s})]})]})},He=({status:r})=>{const{currentLanguage:t}=w();if(!r)return null;const s=()=>{switch(r){case"available":return{text:t==="ar"?"متاح":t==="tr"?"Müsait":"Available",className:"bg-green-500 hover:bg-green-600"};case"pending":return{text:t==="ar"?"مخفي":t==="tr"?"Gizli":"Hidden",className:"bg-yellow-500 hover:bg-yellow-600"};case"sold":return{text:t==="ar"?"مباع":t==="tr"?"Satıldı":"Sold",className:"bg-red-500 hover:bg-red-600"};case"rented":return{text:t==="ar"?"مؤجر":t==="tr"?"Kiralandı":"Rented",className:"bg-blue-500 hover:bg-blue-600"};default:return{text:r,className:"bg-gray-500 hover:bg-gray-600"}}},{text:a,className:o}=s();return e.jsx(z,{className:`absolute top-2 right-2 text-white ${o}`,children:a})},Ve=({property:r})=>{const{currentLanguage:t,t:s}=w(),{propertyTypes:a,loading:o}=we(),d=ke(r,a,t,o),g=t==="ar"&&r.title_ar?r.title_ar:t==="tr"&&r.title_tr?r.title_tr:r.title_en||r.title,h=r.listing_type?r.listing_type==="rent"?s("forRent"):s("forSale"):"",u=s("forSale"),c=s("forRent");let m=g;if(r.listing_type==="sale")try{m=m.replace(new RegExp(u,"ig"),"")}catch(l){console.error(l)}else if(r.listing_type==="rent")try{m=m.replace(new RegExp(c,"ig"),"")}catch(l){console.error(l)}return m=m.replace(/-\s*$/,"").trim(),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"font-semibold text-lg line-clamp-2",children:[m,r.listing_type&&e.jsxs("span",{className:"text-gray-600 font-normal",children:[" - ",h]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:r.city})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[r.bedrooms&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Se,{className:"w-4 h-4 mr-1"}),r.bedrooms]}),r.bathrooms&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ae,{className:"w-4 h-4 mr-1"}),r.bathrooms]}),r.area&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{className:"w-4 h-4 mr-1"}),r.area,"m²"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[r.price.toLocaleString()," ",r.currency||"EUR"]}),r.listing_type==="rent"&&e.jsx("p",{className:"text-xs text-gray-500",children:t==="ar"?"شهرياً":"per month"})]}),e.jsx(z,{variant:"outline",children:d})]})]})},Oe=({property:r,onView:t,onEdit:s,onDelete:a})=>{const{t:o,currentLanguage:d}=w(),{toast:g}=q(),{logActivity:h}=fe(),[u,c]=v.useState(!1),m=async()=>{c(!0);try{const x=r.status,k=r.status==="sold"||r.status==="rented"?"available":"sold",{error:E}=await M.from("properties").update({status:k}).eq("id",r.id);if(E)throw E;await h.propertyStatusChanged({title:r.title_ar||r.title_en||r.title_tr||"Unknown Property",property_id:r.id,old_status:x,new_status:k,price:r.price,currency:r.currency}),g({title:d==="ar"?"تم التحديث":"Updated",description:k==="sold"?d==="ar"?"تم تحديث حالة العقار إلى مباع/مؤجر":"Property marked as sold/rented":d==="ar"?"تم تحديث حالة العقار إلى متاح":"Property marked as available"}),window.location.reload()}catch(x){g({title:d==="ar"?"خطأ":"Error",description:(x==null?void 0:x.message)||(d==="ar"?"فشل في تحديث الحالة":"Failed to update status"),variant:"destructive"})}finally{c(!1)}},l=async()=>{if(r.hidden_by_admin&&(r.status==="hidden"||r.status==="pending")){g({title:d==="ar"?"غير مسموح":"Not Allowed",description:d==="ar"?"لا يمكنك إظهار هذا العقار لأنه تم إخفاؤه من قبل الإدارة":"You cannot show this property as it was hidden by admin",variant:"destructive"});return}c(!0);try{const x=r.status==="hidden"||r.status==="pending"?"available":"pending",{error:k}=await M.from("properties").update({status:x}).eq("id",r.id);if(k)throw k;const E=x==="hidden";await h.propertyVisibilityChanged({title:r.title_ar||r.title_en||r.title_tr||"Unknown Property",property_id:r.id,is_hidden:E}),g({title:d==="ar"?"تم التحديث":"Updated",description:x==="available"?d==="ar"?"تم إظهار العقار":"Property is now visible":d==="ar"?"تم إخفاء العقار":"Property is now hidden"}),window.location.reload()}catch(x){g({title:d==="ar"?"خطأ":"Error",description:(x==null?void 0:x.message)||(d==="ar"?"فشل في تحديث حالة العرض":"Failed to update visibility"),variant:"destructive"})}finally{c(!1)}},n=r.status==="sold"||r.status==="rented",i=r.status==="pending"||r.status==="hidden",p=r.hidden_by_admin&&i;return e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t",children:[e.jsxs(T,{size:"sm",variant:"outline",onClick:()=>t(r),className:"flex-1",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),d==="ar"?"عرض":d==="tr"?"Görüntüle":"View"]}),s&&e.jsx(T,{size:"sm",variant:"outline",onClick:()=>s(r),children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx(T,{size:"sm",variant:i?"default":"outline",onClick:l,disabled:u||p,className:`${i?"bg-orange-600 hover:bg-orange-700 text-white":""} ${p?"opacity-50 cursor-not-allowed":""}`,title:p?d==="ar"?"تم إخفاء هذا العقار من قبل الإدارة":"This property was hidden by admin":i?d==="ar"?"إظهار العقار":"Show property":d==="ar"?"إخفاء العقار":"Hide property",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx(T,{size:"sm",variant:n?"default":"outline",onClick:m,disabled:u,className:n?"bg-green-600 hover:bg-green-700 text-white":"",title:n?d==="ar"?"إعادة تعيين إلى متاح":"Mark as available":d==="ar"?"تحديد كمباع/مؤجر":"Mark as sold/rented",children:e.jsx(ae,{className:`w-4 h-4 ${n?"fill-current":""}`})}),e.jsx(T,{size:"sm",variant:"outline",onClick:()=>a(r.id),className:"text-red-600 hover:text-red-700",children:e.jsx(ze,{className:"w-4 h-4"})})]})},Ye=({property:r,onView:t,onEdit:s,onDelete:a})=>{const{t:o,currentLanguage:d}=w(),g=r.status==="sold"||r.status==="rented";return e.jsxs(_,{className:X("overflow-hidden backdrop-blur-xl bg-white/90 dark:bg-slate-800/90 border border-white/30 dark:border-slate-700/50 shadow-xl rounded-3xl transition-all duration-300 hover:shadow-2xl",r.is_featured&&"shadow-brand-glow",g&&"opacity-80 border-2 border-green-500"),children:[r.cover_image&&e.jsxs("div",{className:"relative h-48",children:[e.jsx("img",{src:r.cover_image,alt:r.title,className:X("w-full h-full object-cover transition-all duration-200",g&&"filter grayscale-50")}),r.is_featured&&e.jsx(z,{className:"absolute top-2 left-2 bg-yellow-500",children:o("featured")}),g&&e.jsxs(z,{className:"absolute top-2 left-2 bg-green-600 text-white flex items-center gap-1",children:[e.jsx(ae,{className:"w-3 h-3 fill-current"}),r.status==="sold"?d==="ar"?"مباع":d==="tr"?"Satıldı":"Sold":d==="ar"?"مؤجر":d==="tr"?"Kiralandı":"Rented"]}),e.jsx(He,{status:r.status})]}),e.jsxs(N,{className:"p-4",children:[e.jsx(Ve,{property:r}),e.jsxs("div",{className:"mt-4 flex items-center text-sm text-muted-foreground",children:[e.jsx(re,{className:"mr-1.5 h-4 w-4"}),e.jsxs("span",{children:[ue(r.views_count??0)," ",d==="ar"?"مشاهدات":d==="tr"?"Görüntüleme":"Views"]})]}),e.jsx(Oe,{property:r,onView:t,onEdit:s,onDelete:a})]})]})},Ge=({properties:r,loading:t,onEditProperty:s,onRefresh:a})=>{const{t:o,currentLanguage:d}=w(),{handleDeleteProperty:g}=ee(),{toast:h}=q(),u=async m=>{const l=r.find(p=>p.id===m),n=(l==null?void 0:l.title)||(d==="ar"?"العقار":"Property"),i=d==="ar"?`هل أنت متأكد من حذف "${n}"؟`:`Are you sure you want to delete "${n}"?`;if(confirm(i))try{await g(m)?(h({title:d==="ar"?"تم الحذف بنجاح":"Deleted Successfully",description:d==="ar"?`تم حذف العقار "${n}" بنجاح`:`Property "${n}" has been deleted successfully`}),a&&a()):h({title:d==="ar"?"خطأ في الحذف":"Delete Error",description:d==="ar"?"فشل في حذف العقار. يرجى المحاولة مرة أخرى":"Failed to delete property. Please try again",variant:"destructive"})}catch(p){console.error("Error deleting property:",p),h({title:d==="ar"?"خطأ":"Error",description:d==="ar"?"حدث خطأ غير متوقع. يرجى المحاولة مرة أخرى":"An unexpected error occurred. Please try again",variant:"destructive"})}},c=m=>{window.open(`/property/${m.id}`,"_blank")};return t?e.jsx(_,{className:"backdrop-blur-xl bg-white/90 dark:bg-slate-800/90 border border-white/30 dark:border-slate-700/50 shadow-xl rounded-3xl transition-all duration-300 hover:shadow-2xl",children:e.jsx(N,{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})})}):r.length===0?e.jsx(_,{children:e.jsxs(S,{children:[e.jsx(A,{children:o("myProperties")||(d==="ar"?"عقاراتي":"My Properties")}),e.jsx($,{children:o("haventAddedPropertiesYet")||(d==="ar"?"لم تقم بإضافة أي عقارات بعد":"You haven't added any properties yet")})]})}):e.jsxs(_,{className:"backdrop-blur-xl bg-white/90 dark:bg-slate-800/90 border border-white/30 dark:border-slate-700/50 shadow-xl rounded-3xl transition-all duration-300 hover:shadow-2xl",children:[e.jsxs(S,{children:[e.jsx(A,{className:"text-xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent dark:from-gray-100 dark:to-gray-400",children:o("myProperties")||(d==="ar"?"عقاراتي":"My Properties")}),e.jsx($,{className:"text-slate-600 dark:text-slate-300",children:o("totalPropertiesLabel")?`${o("totalPropertiesLabel")} ${r.length}`:d==="ar"?`إجمالي العقارات: ${r.length}`:`Total properties: ${r.length}`})]}),e.jsx(N,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(m=>e.jsx(Ye,{property:m,onView:c,onEdit:s,onDelete:u},m.id))})})]})},Ke=({title:r,message:t,note:s,cannotPublish:a})=>e.jsx("div",{className:"flex justify-center items-center min-h-[70vh] py-[69px] px-[15px] my-0",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"rounded-3xl shadow-2xl border-0 bg-white/95 dark:bg-[#232433]/95 backdrop-blur-xl px-8 py-10 flex flex-col items-center transition-all duration-300 hover:shadow-3xl",style:{boxShadow:"0 8px 32px 0 rgba(var(--brand-accent-r, 236), var(--brand-accent-g, 72), var(--brand-accent-b, 154), 0.15)",background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.90) 100%)"},children:[e.jsxs("div",{className:"relative mb-6 flex items-center justify-center",children:[e.jsx("span",{className:"absolute -inset-4 rounded-full blur-xl opacity-20 animate-pulse",style:{background:"linear-gradient(135deg, var(--brand-gradient-from-color, hsl(var(--brand-accent-h) var(--brand-accent-s) var(--brand-accent-l))) 0%, var(--brand-gradient-to-color, hsl(var(--brand-accent-h) var(--brand-accent-s) var(--brand-accent-l))) 100%)"}}),e.jsx("span",{className:"relative flex items-center justify-center p-6 rounded-full shadow-lg border-2",style:{background:"linear-gradient(135deg, var(--brand-gradient-from-color, hsl(var(--brand-accent-h) var(--brand-accent-s) var(--brand-accent-l))) 0%, var(--brand-gradient-to-color, hsl(var(--brand-accent-h) var(--brand-accent-s) calc(var(--brand-accent-l) - 5%))) 100%)",borderColor:"var(--brand-gradient-from-color, hsl(var(--brand-accent-h) var(--brand-accent-s) var(--brand-accent-l)))"},children:e.jsx(te,{className:"w-16 h-16 text-white animate-spin-slow"})})]}),e.jsx("h2",{className:"text-3xl font-extrabold text-center mb-4 tracking-tight bg-gradient-to-r bg-clip-text text-transparent",style:{backgroundImage:"linear-gradient(135deg, var(--brand-gradient-from-color, hsl(var(--brand-accent-h) var(--brand-accent-s) var(--brand-accent-l))) 0%, var(--brand-gradient-to-color, hsl(var(--brand-accent-h) var(--brand-accent-s) calc(var(--brand-accent-l) - 10%))) 100%)"},children:r}),e.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-base sm:text-lg text-center mb-6 leading-relaxed",children:t}),e.jsx("div",{className:"w-full bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-[#223153] dark:to-[#1e2a4a] p-4 rounded-xl shadow-inner mb-6 border border-blue-100 dark:border-blue-800 animate-fade-in",children:e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-200 text-center font-medium",children:s})}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-full",style:{background:"linear-gradient(135deg, var(--brand-gradient-from-color, hsl(var(--brand-accent-h) var(--brand-accent-s) var(--brand-accent-l))) 0%, var(--brand-gradient-to-color, hsl(var(--brand-accent-h) var(--brand-accent-s) calc(var(--brand-accent-l) - 5%))) 100%)"},children:e.jsx(se,{className:"w-6 h-6 text-white animate-bounce"})}),e.jsx("span",{className:"font-semibold text-lg animate-fade-in bg-gradient-to-r bg-clip-text text-transparent",style:{backgroundImage:"linear-gradient(135deg, var(--brand-gradient-from-color, hsl(var(--brand-accent-h) var(--brand-accent-s) var(--brand-accent-l))) 0%, var(--brand-gradient-to-color, hsl(var(--brand-accent-h) var(--brand-accent-s) calc(var(--brand-accent-l) - 5%))) 100%)"},children:a})]}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-2 h-2 rounded-full animate-bounce opacity-60",style:{background:"var(--brand-gradient-from-color, hsl(var(--brand-accent-h) var(--brand-accent-s) var(--brand-accent-l)))"}}),e.jsx("div",{className:"absolute bottom-20 right-10 w-1 h-1 rounded-full animate-bounce delay-300 opacity-50",style:{background:"var(--brand-gradient-to-color, hsl(var(--brand-accent-h) var(--brand-accent-s) calc(var(--brand-accent-l) - 5%)))"}}),e.jsx("div",{className:"absolute top-1/2 right-8 w-1.5 h-1.5 rounded-full animate-ping delay-700 opacity-40",style:{background:"var(--brand-gradient-from-color, hsl(var(--brand-accent-h) var(--brand-accent-s) var(--brand-accent-l)))"}})]})]})})}),vr=()=>{const{t:r,currentLanguage:t}=w(),{profile:s,loading:a}=Q(),{properties:o,loading:d,refetch:g}=ee(),[h,u]=v.useState(!1),[c,m]=v.useState(null),{settings:l,loading:n}=me(),{toast:i}=q(),p=ge(),x=v.useRef(!1);v.useEffect(()=>{if(s&&s.is_suspended&&!a&&!n&&!x.current){const f=t==="ar"?l.suspensionTitleAr||"الحساب موقوف":t==="tr"?l.suspensionTitleTr||"Hesap Askıya Alındı":l.suspensionTitleEn||"Account Suspended",de=t==="ar"?l.suspensionMessageAr||"تم إيقاف حسابك ولا يمكنك إدارة أي عقار.":t==="tr"?l.suspensionMessageTr||"Hesabınız askıya alındı و artık işlem yapamazsınız.":l.suspensionMessageEn||"Your account is suspended. You cannot manage properties.";i({title:f,description:de,variant:"destructive"}),x.current=!0}},[s,a,l,n,t,i]);const k=()=>t==="ar"&&l.suspensionTitleAr?l.suspensionTitleAr:t==="tr"&&l.suspensionTitleTr?l.suspensionTitleTr:t==="en"&&l.suspensionTitleEn?l.suspensionTitleEn:l.suspensionTitleEn||l.suspensionTitleAr||l.suspensionTitleTr||(t==="ar"?"تم إيقاف الحساب":t==="tr"?"Hesap Askıya Alındı":"Account Suspended"),E=()=>t==="ar"&&l.suspensionMessageAr?l.suspensionMessageAr:t==="tr"&&l.suspensionMessageTr?l.suspensionMessageTr:t==="en"&&l.suspensionMessageEn?l.suspensionMessageEn:l.suspensionMessageEn||l.suspensionMessageAr||l.suspensionMessageTr||(t==="ar"?"تم إيقاف حسابك. يرجى مراجعة شروط الاستخدام أو التواصل مع الدعم.":t==="tr"?"Hesabınız askıya alındı. Lütfen hizmet şartlarımızı inceleyin veya destek ile iletişime geçin.":"Your account has been suspended. Please review our terms of service or contact support."),U=()=>t==="ar"?"سياسة الخصوصية والأحكام والشروط":t==="tr"?"Gizlilik Politikası ve Şartlar":"Privacy Policy & Terms and Conditions",H=()=>t==="ar"&&l.pendingApprovalTitleAr?l.pendingApprovalTitleAr:t==="tr"&&l.pendingApprovalTitleTr?l.pendingApprovalTitleTr:t==="en"&&l.pendingApprovalTitleEn?l.pendingApprovalTitleEn:l.pendingApprovalTitleEn||l.pendingApprovalTitleAr||l.pendingApprovalTitleTr||(t==="ar"?"حسابك قيد المراجعة":t==="tr"?"Hesabınız İnceleniyor":"Account Under Review"),V=()=>t==="ar"&&l.pendingApprovalMessageAr?l.pendingApprovalMessageAr:t==="tr"&&l.pendingApprovalMessageTr?l.pendingApprovalMessageTr:t==="en"&&l.pendingApprovalMessageEn?l.pendingApprovalMessageEn:l.pendingApprovalMessageEn||l.pendingApprovalMessageAr||l.pendingApprovalMessageTr||(t==="ar"?"شكراً لتسجيلك في منصتنا! حسابك الآن قيد المراجعة من قبل الإدارة، لا يمكنك نشر أي عقار حتى تتم الموافقة.":t==="tr"?"Platformumuza kaydolduğunuz için teşekkür ederiz! Hesabınız şu anda yönetim tarafından inceleniyor.":"Thank you for registering on our platform! Your account is now under review by management."),j=()=>t==="ar"?"إذا كنت تعتقد أن هناك تأخيراً، يمكنك التواصل مع الدعم.":t==="tr"?"Gecikme olduğunu düşünüyorsanız, destek ile iletişime geçebilirsiniz.":"If you think there is a delay, you can contact support.",L=()=>t==="ar"?"لا يمكنك نشر عقار حالياً":t==="tr"?"Şu anda ilan yayınlayamazsınız":"You cannot publish properties now",B=o.filter(f=>f.created_by===(s==null?void 0:s.id)),ne=f=>{m(f),u(!0)},ie=()=>{m(null),u(!1)},le=()=>{m(null),u(!1)};if(a||n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center dark:bg-[#181926] bg-gray-50 transition-colors",children:e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})});if(s!=null&&s.is_suspended){const f=s.suspension_end_date;return e.jsx("div",{className:"flex justify-center items-center min-h-[70vh] py-[69px] px-[15px] my-0",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"rounded-3xl shadow-2xl border-0 bg-white/95 dark:bg-[#232433]/95 backdrop-blur-xl px-8 py-10 flex flex-col items-center transition-all duration-300 hover:shadow-3xl",style:{boxShadow:"0 8px 32px 0 rgba(220, 38, 38, 0.15)",background:"linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.90) 100%)"},children:[e.jsxs("div",{className:"relative mb-6 flex items-center justify-center",children:[e.jsx("span",{className:"absolute -inset-4 rounded-full bg-red-500/20 blur-xl animate-pulse"}),e.jsx("span",{className:"relative flex items-center justify-center p-6 rounded-full shadow-lg border-2 bg-gradient-to-br from-red-500 to-red-600 border-red-500",children:e.jsx(J,{className:"w-16 h-16 text-white animate-pulse"})})]}),e.jsx("h2",{className:"text-3xl font-extrabold text-center mb-4 tracking-tight bg-gradient-to-r from-red-500 to-red-600 bg-clip-text text-transparent",children:k()}),e.jsx("p",{className:"text-gray-700 dark:text-gray-200 text-base sm:text-lg text-center mb-6 leading-relaxed",children:E()}),e.jsxs("div",{className:"w-full bg-gradient-to-r from-red-50 to-pink-50 dark:from-red-900/20 dark:to-pink-900/20 p-4 rounded-xl shadow-inner mb-6 border border-red-100 dark:border-red-800",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-5 h-5 text-orange-600 animate-spin"}),e.jsx("span",{className:"font-semibold text-orange-700 dark:text-orange-300",children:t==="ar"?"حظر مؤقت":t==="tr"?"Geçici Askıya Alma":"Temporary Suspension"})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"font-semibold text-red-700 dark:text-red-300",children:t==="ar"?"حظر دائم":t==="tr"?"Kalıcı Askıya Alma":"Permanent Suspension"})]})}),f&&e.jsxs("p",{className:"text-sm text-center text-gray-600 dark:text-gray-300",children:[t==="ar"?"سيتم إلغاء الحظر تلقائياً في: ":t==="tr"?"Otomatik olarak kaldırılacak: ":"Will be automatically lifted on: ",e.jsx("span",{className:"font-medium",children:new Date(s.suspension_end_date).toLocaleDateString(t==="ar"?"ar-EG":t==="tr"?"tr-TR":"en-US",{year:"numeric",month:"long",day:"numeric",calendar:"gregory"})})]})]}),s.suspension_reason&&e.jsxs("div",{className:"w-full bg-gray-50 dark:bg-gray-800/50 p-4 rounded-xl mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 mb-2",children:t==="ar"?"سبب الحظر:":t==="tr"?"Askıya Alma Nedeni:":"Suspension Reason:"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:s.suspension_reason})]}),e.jsxs("div",{className:"w-full space-y-3",children:[e.jsx(T,{variant:"outline",asChild:!0,className:"w-full",children:e.jsx(he,{to:"/terms",children:U()})}),e.jsx(T,{variant:"ghost",onClick:()=>{M.auth.signOut(),p("/")},className:"w-full text-gray-500",children:t==="ar"?"تسجيل الخروج":t==="tr"?"Çıkış Yap":"Sign Out"})]}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 left-10 w-2 h-2 bg-red-400 rounded-full animate-bounce opacity-60"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-1 h-1 bg-red-500 rounded-full animate-bounce delay-300 opacity-50"}),e.jsx("div",{className:"absolute top-1/2 right-8 w-1.5 h-1.5 bg-red-400 rounded-full animate-ping delay-700 opacity-40"})]})]})})})}return s&&s.is_approved===!1?e.jsx(Ke,{title:H(),message:V(),note:j(),cannotPublish:L()}):!s||s.user_type!=="agent"&&s.user_type!=="property_owner"&&s.user_type!=="real_estate_office"&&s.user_type!=="partner_and_site_owner"?e.jsx("div",{className:"min-h-screen flex items-center justify-center dark:bg-[#181926] bg-gray-50 transition-colors p-4 pt-20",children:e.jsxs(_,{className:"max-w-md bg-white dark:bg-[#232433] border-0 shadow-2xl transition-colors",children:[e.jsxs(S,{className:"text-center",children:[e.jsx(se,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx(A,{className:"text-red-600 dark:text-red-400",children:r("unauthorized")})]}),e.jsxs(N,{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:r("unauthorizedSellerPage")}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 p-3 rounded-lg",children:[e.jsxs("p",{className:"mb-2",children:[t==="ar"?"نوع المستخدم الحالي:":t==="tr"?"Mevcut kullanıcı türü:":"Current user type:"," ",e.jsx("strong",{children:(s==null?void 0:s.user_type)||"غير محدد"})]}),e.jsx("p",{children:t==="ar"?"الأنواع المسموحة: وسيط، مالك عقار، مكتب عقاري، شريك":t==="tr"?"İzin verilen türler: Acente, Mülk sahibi, Emlak ofisi, Ortak":"Allowed types: Agent, Property Owner, Real Estate Office, Partner"})]})]})]})}):e.jsxs("div",{className:"min-h-screen flex flex-col p-4 py-24 relative overflow-hidden transition-all duration-500",style:{background:`
          linear-gradient(135deg,
            color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 3%, transparent),
            color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 2%, transparent)
          ),
          linear-gradient(to bottom right,
            #fafbff 0%,
            #f1f5f9 50%,
            #e2e8f0 100%
          )
        `,...typeof window<"u"&&document.documentElement.classList.contains("dark")&&{background:`
            linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 8%, transparent),
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 5%, transparent)
            ),
            linear-gradient(to bottom right,
              #0f172a 0%,
              #1e293b 50%,
              #334155 100%
            )
          `}},children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full opacity-5 dark:opacity-10",style:{background:`linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 8%, transparent) 0%,
              transparent 50%,
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 5%, transparent) 100%
            )`}}),e.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 rounded-full blur-3xl animate-pulse opacity-10 dark:opacity-15",style:{background:`linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 8%, transparent),
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 6%, transparent)
            )`}}),e.jsx("div",{className:"absolute bottom-20 right-20 w-80 h-80 rounded-full blur-3xl animate-pulse delay-1000 opacity-8 dark:opacity-12",style:{background:`linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 6%, transparent),
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 5%, transparent)
            )`}}),e.jsx("div",{className:"absolute top-32 right-1/4 w-3 h-3 rounded-full animate-bounce opacity-20 dark:opacity-30",style:{background:"color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 25%, transparent)"}}),e.jsx("div",{className:"absolute bottom-40 left-1/3 w-2 h-2 rounded-full animate-bounce delay-300 opacity-15 dark:opacity-25",style:{background:"color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 20%, transparent)"}}),e.jsx("div",{className:"absolute top-2/3 right-1/3 w-1 h-1 rounded-full animate-ping delay-700 opacity-25 dark:opacity-35",style:{background:"color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 30%, transparent)"}}),e.jsx("div",{className:"absolute top-10 right-10 w-32 h-32 rounded-full blur-2xl animate-pulse delay-200 opacity-5 dark:opacity-8",style:{background:`linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 5%, transparent),
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 4%, transparent)
            )`}}),e.jsx("div",{className:"absolute bottom-32 left-10 w-40 h-40 rounded-full blur-3xl animate-pulse delay-800 opacity-4 dark:opacity-6",style:{background:`linear-gradient(135deg,
              color-mix(in srgb, var(--brand-gradient-to-color, #f43f5e) 4%, transparent),
              color-mix(in srgb, var(--brand-gradient-from-color, #ec489a) 3%, transparent)
            )`}})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-7xl mx-auto px-4",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent dark:from-gray-100 dark:to-gray-400",children:r("sellerDashboard")}),e.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-300 mt-2 leading-relaxed",children:r("manageYourProperties")})]}),!h&&e.jsxs(T,{onClick:()=>u(!0),className:"flex items-center gap-2 h-12 rounded-xl text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-[1.02] hover:brightness-95",style:{background:"linear-gradient(135deg, var(--brand-gradient-from-color, #ec489a) 0%, var(--brand-gradient-to-color, #f43f5e) 100%)"},children:[e.jsx(Pe,{className:"w-4 h-4"}),r("addNewProperty")]})]})}),h?e.jsx(Ue,{onCancel:ie,onSuccess:le,editingProperty:c}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(_,{className:"backdrop-blur-xl bg-white/90 dark:bg-slate-800/90 border border-white/30 dark:border-slate-700/50 shadow-xl rounded-3xl transition-all duration-300 hover:shadow-2xl",children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:r("totalProperties")}),e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:B.length})})]}),e.jsxs(_,{className:"backdrop-blur-xl bg-white/90 dark:bg-slate-800/90 border border-white/30 dark:border-slate-700/50 shadow-xl rounded-3xl transition-all duration-300 hover:shadow-2xl",children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:r("availableProperties")}),e.jsx(O,{className:"h-4 w-4 text-green-600"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:B.filter(f=>f.status==="available").length})})]}),e.jsxs(_,{className:"backdrop-blur-xl bg-white/90 dark:bg-slate-800/90 border border-white/30 dark:border-slate-700/50 shadow-xl rounded-3xl transition-all duration-300 hover:shadow-2xl",children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(A,{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:r("rentedProperties")}),e.jsx(O,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:B.filter(f=>f.status==="rented").length})})]})]}),e.jsx(Ge,{properties:B,loading:d,onEditProperty:ne,onRefresh:g})]})]})]})};export{vr as default};
